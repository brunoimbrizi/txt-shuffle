!function(){"use strict";var t=function(){for(var t=0;t<arguments.length;t++)if(void 0!==arguments[t])return arguments[t]};Number.EPSILON;var e={mod:function(t,e){return(t%e+e)%e},clamp01:function(t){return e=t,(n=0)<(i=1)?e<n?n:e>i?i:e:e<i?i:e>n?n:e;var e,n,i}},n={};(function(t){(function(){var e=[],i=void 0===t?window:t,o=Math.pow(256,6),r=Math.pow(2,52),s=2*r,a=Math.random;function l(t){var e,n=t.length,i=this,o=0,r=i.i=i.j=0,s=i.S=[];for(n||(t=[n++]);o<256;)s[o]=o++;for(o=0;o<256;o++)s[o]=s[r=255&r+t[o%n]+(e=s[o])],s[r]=e;(i.g=function(t){for(var e,n=0,o=i.i,r=i.j,s=i.S;t--;)e=s[o=255&o+1],n=256*n+s[255&(s[o]=s[r=255&r+e])+(s[r]=e)];return i.i=o,i.j=r,n})(256)}function p(t,e){for(var n,i=t+"",o=0;o<i.length;)e[255&o]=255&(n^=19*e[255&o])+i.charCodeAt(o++);return d(e)}function d(t){return String.fromCharCode.apply(0,t)}(n=function(t,a){if(a&&!0===a.global)return a.global=!1,Math.random=n(t,a),a.global=!0,Math.random;var c=[],h=(p(function t(e,n){var i,o=[],r=(typeof e)[0];if(n&&"o"==r)for(i in e)try{o.push(t(e[i],n-1))}catch(s){}return o.length?o:"s"==r?e:e+"\0"}(a&&a.entropy?[t,d(e)]:0 in arguments?t:function(t){try{return i.crypto.getRandomValues(t=new Uint8Array(256)),d(t)}catch(n){return[+new Date,i,i.navigator&&i.navigator.plugins,i.screen,d(e)]}}(),3),c),new l(c));return p(d(h.S),e),function(){for(var t=h.g(6),e=o,n=0;t<r;)t=256*(t+n),e*=256,n=h.g(1);for(;t>=s;)t/=2,e/=2,n>>>=1;return(t+n)/e}}).resetGlobal=function(){Math.random=a},p(Math.random(),e)}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var i={exports:{}};!function(){var t=.5*(Math.sqrt(3)-1),e=(3-Math.sqrt(3))/6,n=(Math.sqrt(5)-1)/4,o=(5-Math.sqrt(5))/20;function r(t){var e;e="function"==typeof t?t:t?function(){var t,e=0,n=0,i=0,o=1,r=(t=4022871197,function(e){e=e.toString();for(var n=0;n<e.length;n++){var i=.02519603282416938*(t+=e.charCodeAt(n));i-=t=i>>>0,t=(i*=t)>>>0,t+=4294967296*(i-=t)}return 2.3283064365386963e-10*(t>>>0)});e=r(" "),n=r(" "),i=r(" ");for(var s=0;s<arguments.length;s++)(e-=r(arguments[s]))<0&&(e+=1),(n-=r(arguments[s]))<0&&(n+=1),(i-=r(arguments[s]))<0&&(i+=1);return r=null,function(){var t=2091639*e+2.3283064365386963e-10*o;return e=n,n=i,i=t-(o=0|t)}}(t):Math.random,this.p=s(e),this.perm=new Uint8Array(512),this.permMod12=new Uint8Array(512);for(var n=0;n<512;n++)this.perm[n]=this.p[255&n],this.permMod12[n]=this.perm[n]%12}function s(t){var e,n=new Uint8Array(256);for(e=0;e<256;e++)n[e]=e;for(e=0;e<255;e++){var i=e+~~(t()*(256-e)),o=n[e];n[e]=n[i],n[i]=o}return n}r.prototype={grad3:new Float32Array([1,1,0,-1,1,0,1,-1,0,-1,-1,0,1,0,1,-1,0,1,1,0,-1,-1,0,-1,0,1,1,0,-1,1,0,1,-1,0,-1,-1]),grad4:new Float32Array([0,1,1,1,0,1,1,-1,0,1,-1,1,0,1,-1,-1,0,-1,1,1,0,-1,1,-1,0,-1,-1,1,0,-1,-1,-1,1,0,1,1,1,0,1,-1,1,0,-1,1,1,0,-1,-1,-1,0,1,1,-1,0,1,-1,-1,0,-1,1,-1,0,-1,-1,1,1,0,1,1,1,0,-1,1,-1,0,1,1,-1,0,-1,-1,1,0,1,-1,1,0,-1,-1,-1,0,1,-1,-1,0,-1,1,1,1,0,1,1,-1,0,1,-1,1,0,1,-1,-1,0,-1,1,1,0,-1,1,-1,0,-1,-1,1,0,-1,-1,-1,0]),noise2D:function(n,i){var o,r,s=this.permMod12,a=this.perm,l=this.grad3,p=0,d=0,c=0,h=(n+i)*t,u=Math.floor(n+h),v=Math.floor(i+h),m=(u+v)*e,b=n-(u-m),g=i-(v-m);b>g?(o=1,r=0):(o=0,r=1);var _=b-o+e,f=g-r+e,w=b-1+2*e,x=g-1+2*e,y=255&u,C=255&v,P=.5-b*b-g*g;if(P>=0){var k=3*s[y+a[C]];p=(P*=P)*P*(l[k]*b+l[k+1]*g)}var E=.5-_*_-f*f;if(E>=0){var V=3*s[y+o+a[C+r]];d=(E*=E)*E*(l[V]*_+l[V+1]*f)}var M=.5-w*w-x*x;if(M>=0){var S=3*s[y+1+a[C+1]];c=(M*=M)*M*(l[S]*w+l[S+1]*x)}return 70*(p+d+c)},noise3D:function(t,e,n){var i,o,r,s,a,l,p,d,c,h,u=this.permMod12,v=this.perm,m=this.grad3,b=(t+e+n)*(1/3),g=Math.floor(t+b),_=Math.floor(e+b),f=Math.floor(n+b),w=(g+_+f)*(1/6),x=t-(g-w),y=e-(_-w),C=n-(f-w);x>=y?y>=C?(a=1,l=0,p=0,d=1,c=1,h=0):x>=C?(a=1,l=0,p=0,d=1,c=0,h=1):(a=0,l=0,p=1,d=1,c=0,h=1):y<C?(a=0,l=0,p=1,d=0,c=1,h=1):x<C?(a=0,l=1,p=0,d=0,c=1,h=1):(a=0,l=1,p=0,d=1,c=1,h=0);var P=x-a+1/6,k=y-l+1/6,E=C-p+1/6,V=x-d+1/6*2,M=y-c+1/6*2,S=C-h+1/6*2,L=x-1+.5,D=y-1+.5,A=C-1+.5,j=255&g,I=255&_,R=255&f,T=.6-x*x-y*y-C*C;if(T<0)i=0;else{var O=3*u[j+v[I+v[R]]];i=(T*=T)*T*(m[O]*x+m[O+1]*y+m[O+2]*C)}var N=.6-P*P-k*k-E*E;if(N<0)o=0;else{var U=3*u[j+a+v[I+l+v[R+p]]];o=(N*=N)*N*(m[U]*P+m[U+1]*k+m[U+2]*E)}var K=.6-V*V-M*M-S*S;if(K<0)r=0;else{var F=3*u[j+d+v[I+c+v[R+h]]];r=(K*=K)*K*(m[F]*V+m[F+1]*M+m[F+2]*S)}var B=.6-L*L-D*D-A*A;if(B<0)s=0;else{var H=3*u[j+1+v[I+1+v[R+1]]];s=(B*=B)*B*(m[H]*L+m[H+1]*D+m[H+2]*A)}return 32*(i+o+r+s)},noise4D:function(t,e,i,r){var s,a,l,p,d,c,h,u,v,m,b,g,_,f,w,x,y,C=this.perm,P=this.grad4,k=(t+e+i+r)*n,E=Math.floor(t+k),V=Math.floor(e+k),M=Math.floor(i+k),S=Math.floor(r+k),L=(E+V+M+S)*o,D=t-(E-L),A=e-(V-L),j=i-(M-L),I=r-(S-L),R=0,T=0,O=0,N=0;D>A?R++:T++,D>j?R++:O++,D>I?R++:N++,A>j?T++:O++,A>I?T++:N++,j>I?O++:N++;var U=D-(c=R>=3?1:0)+o,K=A-(h=T>=3?1:0)+o,F=j-(u=O>=3?1:0)+o,B=I-(v=N>=3?1:0)+o,H=D-(m=R>=2?1:0)+2*o,q=A-(b=T>=2?1:0)+2*o,z=j-(g=O>=2?1:0)+2*o,$=I-(_=N>=2?1:0)+2*o,G=D-(f=R>=1?1:0)+3*o,Y=A-(w=T>=1?1:0)+3*o,W=j-(x=O>=1?1:0)+3*o,X=I-(y=N>=1?1:0)+3*o,Q=D-1+4*o,Z=A-1+4*o,J=j-1+4*o,tt=I-1+4*o,et=255&E,nt=255&V,it=255&M,ot=255&S,rt=.6-D*D-A*A-j*j-I*I;if(rt<0)s=0;else{var st=C[et+C[nt+C[it+C[ot]]]]%32*4;s=(rt*=rt)*rt*(P[st]*D+P[st+1]*A+P[st+2]*j+P[st+3]*I)}var at=.6-U*U-K*K-F*F-B*B;if(at<0)a=0;else{var lt=C[et+c+C[nt+h+C[it+u+C[ot+v]]]]%32*4;a=(at*=at)*at*(P[lt]*U+P[lt+1]*K+P[lt+2]*F+P[lt+3]*B)}var pt=.6-H*H-q*q-z*z-$*$;if(pt<0)l=0;else{var dt=C[et+m+C[nt+b+C[it+g+C[ot+_]]]]%32*4;l=(pt*=pt)*pt*(P[dt]*H+P[dt+1]*q+P[dt+2]*z+P[dt+3]*$)}var ct=.6-G*G-Y*Y-W*W-X*X;if(ct<0)p=0;else{var ht=C[et+f+C[nt+w+C[it+x+C[ot+y]]]]%32*4;p=(ct*=ct)*ct*(P[ht]*G+P[ht+1]*Y+P[ht+2]*W+P[ht+3]*X)}var ut=.6-Q*Q-Z*Z-J*J-tt*tt;if(ut<0)d=0;else{var vt=C[et+1+C[nt+1+C[it+1+C[ot+1]]]]%32*4;d=(ut*=ut)*ut*(P[vt]*Q+P[vt+1]*Z+P[vt+2]*J+P[vt+3]*tt)}return 27*(s+a+l+p+d)}},r._buildPermutationTable=s,"undefined"!=typeof define&&define.amd&&define((function(){return r})),void 0!==i.exports?i.exports.SimplexNoise=r:"undefined"!=typeof window&&(window.SimplexNoise=r),i.exports=r}(),i=i.exports;var o=function e(o){o=t(o,null);var r,s,a,l=Math.random,p=null,d=!1;return c(o),{value:h,createRandom:function(t){return e(t)},setSeed:c,getSeed:function(){return r},getRandomSeed:function(){return String(Math.floor(1e6*Math.random()))},valueNonZero:function(){for(var t=0;0===t;)t=h();return t},permuteNoise:function(){a=u()},noise1D:function(e,n,i){if(!isFinite(e))throw new TypeError("x component for noise() must be finite");return n=t(n,1),(i=t(i,1))*a.noise2D(e*n,0)},noise2D:function(e,n,i,o){if(!isFinite(e))throw new TypeError("x component for noise() must be finite");if(!isFinite(n))throw new TypeError("y component for noise() must be finite");return i=t(i,1),(o=t(o,1))*a.noise2D(e*i,n*i)},noise3D:function(e,n,i,o,r){if(!isFinite(e))throw new TypeError("x component for noise() must be finite");if(!isFinite(n))throw new TypeError("y component for noise() must be finite");if(!isFinite(i))throw new TypeError("z component for noise() must be finite");return o=t(o,1),(r=t(r,1))*a.noise3D(e*o,n*o,i*o)},noise4D:function(e,n,i,o,r,s){if(!isFinite(e))throw new TypeError("x component for noise() must be finite");if(!isFinite(n))throw new TypeError("y component for noise() must be finite");if(!isFinite(i))throw new TypeError("z component for noise() must be finite");if(!isFinite(o))throw new TypeError("w component for noise() must be finite");return r=t(r,1),(s=t(s,1))*a.noise4D(e*r,n*r,i*r,o*r)},sign:function(){return v()?1:-1},boolean:v,chance:function(e){if("number"!=typeof(e=t(e,.5)))throw new TypeError("expected n to be a number");return h()<e},range:m,rangeFloor:b,pick:function(t){return 0===t.length?void 0:t[b(0,t.length)]},shuffle:function(t){if(!Array.isArray(t))throw new TypeError("Expected Array, got "+typeof t);for(var e,n,i=t.length,o=t.slice();i;)e=Math.floor(h()*i--),n=o[i],o[i]=o[e],o[e]=n;return o},onCircle:g,insideCircle:function(e,n){e=t(e,1),g(1,n=n||[]);var i=e*Math.sqrt(h());return n[0]*=i,n[1]*=i,n},onSphere:function(e,n){e=t(e,1),n=n||[];var i=h()*Math.PI*2,o=2*h()-1,r=i,s=Math.acos(o);return n[0]=e*Math.sin(s)*Math.cos(r),n[1]=e*Math.sin(s)*Math.sin(r),n[2]=e*Math.cos(s),n},insideSphere:function(e,n){e=t(e,1),n=n||[];var i=h()*Math.PI*2,o=2*h()-1,r=h(),s=i,a=Math.acos(o),l=e*Math.cbrt(r);return n[0]=l*Math.sin(a)*Math.cos(s),n[1]=l*Math.sin(a)*Math.sin(s),n[2]=l*Math.cos(a),n},quaternion:function(t){t=t||[];var e=h(),n=h(),i=h(),o=Math.sqrt(1-e),r=Math.sqrt(e),s=2*Math.PI*n,a=2*Math.PI*i,l=Math.sin(s)*o,p=Math.cos(s)*o,d=Math.sin(a)*r,c=Math.cos(a)*r;return t[0]=l,t[1]=p,t[2]=d,t[3]=c,t},weighted:f,weightedSet:function(t){return 0===(t=t||[]).length?null:t[_(t)].value},weightedSetIndex:_,gaussian:function(e,n){if(e=t(e,0),n=t(n,1),d){d=!1;var i=p;return p=null,e+n*i}var o=0,r=0,s=0;do{s=(o=2*h()-1)*o+(r=2*h()-1)*r}while(s>=1||0===s);var a=Math.sqrt(-2*Math.log(s)/s);return p=r*a,d=!0,e+n*(o*a)}};function c(t,e){"number"==typeof t||"string"==typeof t?s=n(r=t,e):(r=void 0,s=l),a=u(),p=null,d=!1}function h(){return s()}function u(){return new i(s)}function v(){return h()>.5}function m(t,e){if(void 0===e&&(e=t,t=0),"number"!=typeof t||"number"!=typeof e)throw new TypeError("Expected all arguments to be numbers");return h()*(e-t)+t}function b(t,e){if(void 0===e&&(e=t,t=0),"number"!=typeof t||"number"!=typeof e)throw new TypeError("Expected all arguments to be numbers");return Math.floor(m(t,e))}function g(e,n){e=t(e,1),n=n||[];var i=2*h()*Math.PI;return n[0]=e*Math.cos(i),n[1]=e*Math.sin(i),n}function _(t){return 0===(t=t||[]).length?-1:f(t.map((function(t){return t.weight})))}function f(t){if(0===(t=t||[]).length)return-1;var e,n=0;for(e=0;e<t.length;e++)n+=t[e];if(n<=0)throw new Error("Weights must sum to > 0");var i=h()*n;for(e=0;e<t.length;e++){if(i<t[e])return e;i-=t[e]}return 0}}(),r=function(t){return(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1)},s=function(t){return Math.pow(t-1,3)*(1-t)+1};const a={RIGHT:"right",LEFT:"left",RANDOM:"random"},l={SHOW:"show",HIDE:"hide",STAY:"stay"};var p,d,c={animations:l,directions:a,shuffle:({text:t="",duration:n=1,delay:i=0,delayResolve:p=.2,fps:d=60,glyphs:c=" !#$&%()*+0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[]^_`abcdefghijklmnopqrstu\xfcvwxyz{|}~",animation:h=l.SHOW,direction:u=a.RIGHT,onUpdate:v=null,onComplete:m=null}={})=>{const b=c.split(""),g=t.split(""),_=1e3/d;let f,w,x,y,C,P,k,E,V,M=Date.now(),S=Date.now(),L=g.map((t,e)=>e);h==l.HIDE&&(u==a.LEFT?u=a.RIGHT:u==a.RIGHT&&(u=a.LEFT)),u==a.LEFT&&L.reverse(),u==a.RANDOM&&(L=o.shuffle(L));const D=()=>{if(Date.now()-M<_)requestAnimationFrame(D);else{M=Date.now(),y="",k=.001*(M-S)/n,h==l.HIDE&&(k=1-k),E=e.clamp01(k-i),E=s(E),V=e.clamp01(k-i-p),V*=1/(1-p),V=r(V),f=Math.round(E*t.length),w=Math.round(V*t.length);for(let e=0;e<t.length;e++)P=L[e],x=g[e],P>=f&&h!=l.STAY&&(x=" ")," "!=x&&P>=w&&(x=o.pick(b)),y=`${y}${x}`;(C=h==l.HIDE?E<=0:E>=1)?y=h==l.HIDE?"":t:requestAnimationFrame(D),v&&v(y),C&&m&&m(y)}};D()},shuffleScroll:({text:t="",delay:n=0,fps:i=60,glyphs:r=" '\"\u201c\u201d\u2018\u2019\xb9\xb2\xb3!#$&%()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstu\xfcvwxyz{|}~\xbd\xbc\xa1\xab\xbb\xd7\u2591\u2592\u2593\u2502\u2524\u2561\u2562\u2556\u2555\u2563\u2551\u2557\u255d\u255c\u255b\u2510\u2514\u2534\u252c\u251c\u2500\u253c\u255e\u255f\u255a\u2554\u2569\u2566\u2560\u2550\u256c\u2567\u2568\u2564\u2565\u2559\u2558\u2552\u2553\u256b\u256a\u2518\u250c",animation:s=l.SHOW,stayFrames:a=25,onUpdate:p=null,onComplete:d=null}={})=>{const c=r.split(""),h=t.split(""),u=1e3/i;h.map((t,e)=>e),c.map((t,e)=>e);let v=h.map(t=>0),m=h.map(t=>c.findIndex(e=>e==t));s==l.HIDE&&(v=m.concat()),s==l.STAY&&(v=m.map(t=>e.mod(t-o.rangeFloor(5,a),c.length)));let b,g,_,f,w,x,y=Date.now(),C=Date.now(),P=0;const k=()=>{if(Date.now()-y<u)requestAnimationFrame(k);else{(y=Date.now())-C>1e3*n&&P++,g="",f=0;for(let e=0;e<t.length;e++)w=v[e],x=m[e],s==l.SHOW&&(w!=x?e<P&&w++:f++),s==l.HIDE&&(w>0?e<P&&w--:f++),s==l.STAY&&(w!=x?w++:f++),b=c[w%c.length],v[e]=w%c.length,g=`${g}${b}`;(_=f>=t.length)?g=s==l.HIDE?"":t:requestAnimationFrame(k),p&&p(g),_&&d&&d(g)}};k()}},h={exports:{}};p=this,d=function(t){class e{constructor(t){this.controller_=t}get element(){return this.controller_.view.element}get disabled(){return this.controller_.viewProps.get("disabled")}set disabled(t){this.controller_.viewProps.set("disabled",t)}get hidden(){return this.controller_.viewProps.get("hidden")}set hidden(t){this.controller_.viewProps.set("hidden",t)}dispose(){this.controller_.viewProps.set("disposed",!0)}}class n{constructor(t){this.target=t}}class i extends n{constructor(t,e,n,i){super(t),this.value=e,this.presetKey=n,this.last=null==i||i}}class o extends n{constructor(t,e,n){super(t),this.value=e,this.presetKey=n}}class r extends n{constructor(t,e){super(t),this.expanded=e}}class s extends n{constructor(t,e){super(t),this.index=e}}function a(t){return null==t}function l(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function p(t,e){let n=t;do{const t=Object.getOwnPropertyDescriptor(n,e);if(t&&(void 0!==t.set||!0===t.writable))return!0;n=Object.getPrototypeOf(n)}while(null!==n);return!1}const d={alreadydisposed:()=>"View has been already disposed",invalidparams:t=>`Invalid parameters for '${t.name}'`,nomatchingcontroller:t=>`No matching controller for '${t.key}'`,nomatchingview:t=>`No matching view for '${JSON.stringify(t.params)}'`,notbindable:()=>"Value is not bindable",propertynotfound:t=>`Property '${t.name}' not found`,shouldneverhappen:()=>"This error should never happen"};class c{static alreadyDisposed(){return new c({type:"alreadydisposed"})}static notBindable(){return new c({type:"notbindable"})}static propertyNotFound(t){return new c({type:"propertynotfound",context:{name:t}})}static shouldNeverHappen(){return new c({type:"shouldneverhappen"})}constructor(t){var e;this.message=null!==(e=d[t.type](t.context))&&void 0!==e?e:"Unexpected error",this.name=this.constructor.name,this.stack=new Error(this.message).stack,this.type=t.type}}class h{constructor(t,e,n){this.obj_=t,this.key_=e,this.presetKey_=null!=n?n:e}static isBindable(t){return null!==t&&"object"==typeof t}get key(){return this.key_}get presetKey(){return this.presetKey_}read(){return this.obj_[this.key_]}write(t){this.obj_[this.key_]=t}writeProperty(t,e){const n=this.read();if(!h.isBindable(n))throw c.notBindable();if(!(t in n))throw c.propertyNotFound(t);n[t]=e}}class u extends e{get label(){return this.controller_.props.get("label")}set label(t){this.controller_.props.set("label",t)}get title(){var t;return null!==(t=this.controller_.valueController.props.get("title"))&&void 0!==t?t:""}set title(t){this.controller_.valueController.props.set("title",t)}on(t,e){const i=e.bind(this);return this.controller_.valueController.emitter.on(t,()=>{i(new n(this))}),this}}class v{constructor(){this.observers_={}}on(t,e){let n=this.observers_[t];return n||(n=this.observers_[t]=[]),n.push({handler:e}),this}off(t,e){const n=this.observers_[t];return n&&(this.observers_[t]=n.filter(t=>t.handler!==e)),this}emit(t,e){const n=this.observers_[t];n&&n.forEach(t=>{t.handler(e)})}}const m="tp";function b(t){return(e,n)=>[m,"-",t,"v",e?"_"+e:"",n?"-"+n:""].join("")}function g(t){return t.rawValue}function _(t,e){var n,i;t.emitter.on("change",(n=g,i=e,t=>i(n(t)))),e(t.rawValue)}function f(t,e,n){_(t.value(e),n)}function w(t,e){return n=>{!function(t,e,n){n?t.classList.add(e):t.classList.remove(e)}(t,e,n)}}function x(t,e){_(t,t=>{e.textContent=null!=t?t:""})}const y=b("btn");class C{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(y()),e.viewProps.bindClassModifiers(this.element);const n=t.createElement("button");n.classList.add(y("b")),e.viewProps.bindDisabled(n),this.element.appendChild(n),this.buttonElement=n;const i=t.createElement("div");i.classList.add(y("t")),x(e.props.value("title"),i),this.buttonElement.appendChild(i)}}class P{constructor(t,e){this.emitter=new v,this.onClick_=this.onClick_.bind(this),this.props=e.props,this.viewProps=e.viewProps,this.view=new C(t,{props:this.props,viewProps:this.viewProps}),this.view.buttonElement.addEventListener("click",this.onClick_)}onClick_(){this.emitter.emit("click",{sender:this})}}class k{constructor(t,e){var n;this.constraint_=null==e?void 0:e.constraint,this.equals_=null!==(n=null==e?void 0:e.equals)&&void 0!==n?n:(t,e)=>t===e,this.emitter=new v,this.rawValue_=t}get constraint(){return this.constraint_}get rawValue(){return this.rawValue_}set rawValue(t){this.setRawValue(t,{forceEmit:!1,last:!0})}setRawValue(t,e){const n=null!=e?e:{forceEmit:!1,last:!0},i=this.constraint_?this.constraint_.constrain(t):t,o=this.rawValue_;(!this.equals_(o,i)||n.forceEmit)&&(this.emitter.emit("beforechange",{sender:this}),this.rawValue_=i,this.emitter.emit("change",{options:n,previousRawValue:o,rawValue:i,sender:this}))}}class E{constructor(t){this.emitter=new v,this.value_=t}get rawValue(){return this.value_}set rawValue(t){this.setRawValue(t,{forceEmit:!1,last:!0})}setRawValue(t,e){const n=null!=e?e:{forceEmit:!1,last:!0},i=this.value_;(i!==t||n.forceEmit)&&(this.emitter.emit("beforechange",{sender:this}),this.value_=t,this.emitter.emit("change",{options:n,previousRawValue:i,rawValue:this.value_,sender:this}))}}function V(t,e){const n=null==e?void 0:e.constraint,i=null==e?void 0:e.equals;return n||i?new k(t,e):new E(t)}class M{constructor(t){this.emitter=new v,this.valMap_=t;for(const e in this.valMap_)this.valMap_[e].emitter.on("change",()=>{this.emitter.emit("change",{key:e,sender:this})})}static createCore(t){return Object.keys(t).reduce((e,n)=>Object.assign(e,{[n]:V(t[n])}),{})}static fromObject(t){const e=this.createCore(t);return new M(e)}get(t){return this.valMap_[t].rawValue}set(t,e){this.valMap_[t].rawValue=e}value(t){return this.valMap_[t]}}function S(t){return e=>n=>{if(!e&&void 0===n)return{succeeded:!1,value:void 0};if(e&&void 0===n)return{succeeded:!0,value:void 0};const i=t(n);return void 0!==i?{succeeded:!0,value:i}:{succeeded:!1,value:void 0}}}function L(t){return{custom:e=>S(e)(t),boolean:S(t=>"boolean"==typeof t?t:void 0)(t),number:S(t=>"number"==typeof t?t:void 0)(t),string:S(t=>"string"==typeof t?t:void 0)(t),function:S(t=>"function"==typeof t?t:void 0)(t),constant:e=>S(t=>t===e?e:void 0)(t),raw:S(t=>t)(t),object:e=>S(t=>{if(null!==(n=t)&&"object"==typeof n)return function(t,e){return Object.keys(e).reduce((n,i)=>{if(void 0===n)return;const o=(0,e[i])(t[i]);return o.succeeded?Object.assign(Object.assign({},n),{[i]:o.value}):void 0},{})}(t,e);var n})(t),array:e=>S(t=>{if(Array.isArray(t))return n=e,t.reduce((t,e)=>{if(void 0===t)return;const i=n(e);return i.succeeded&&void 0!==i.value?[...t,i.value]:void 0},[]);var n})(t)}}const D={optional:L(!0),required:L(!1)};function A(t,e){const n=D.required.object(e)(t);return n.succeeded?n.value:void 0}function j(t){console.warn([`Missing '${t.key}' of ${t.target} in ${t.place}.`,"Please rebuild plugins with the latest core package."].join(" "))}class I{constructor(t){this.value_=t}static create(t){return[new I(t),(e,n)=>{t.setRawValue(e,n)}]}get emitter(){return this.value_.emitter}get rawValue(){return this.value_.rawValue}}const R=b("");function T(t,e){return w(t,R(void 0,e))}class O extends M{constructor(t){var e;super(t),this.onDisabledChange_=this.onDisabledChange_.bind(this),this.onParentChange_=this.onParentChange_.bind(this),this.onParentGlobalDisabledChange_=this.onParentGlobalDisabledChange_.bind(this),[this.globalDisabled_,this.setGlobalDisabled_]=I.create(V(this.getGlobalDisabled_())),this.value("disabled").emitter.on("change",this.onDisabledChange_),this.value("parent").emitter.on("change",this.onParentChange_),null===(e=this.get("parent"))||void 0===e||e.globalDisabled.emitter.on("change",this.onParentGlobalDisabledChange_)}static create(t){var e,n,i;const o=null!=t?t:{};return new O(M.createCore({disabled:null!==(e=o.disabled)&&void 0!==e&&e,disposed:!1,hidden:null!==(n=o.hidden)&&void 0!==n&&n,parent:null!==(i=o.parent)&&void 0!==i?i:null}))}get globalDisabled(){return this.globalDisabled_}bindClassModifiers(t){_(this.globalDisabled_,T(t,"disabled")),f(this,"hidden",T(t,"hidden"))}bindDisabled(t){_(this.globalDisabled_,e=>{t.disabled=e})}bindTabIndex(t){_(this.globalDisabled_,e=>{t.tabIndex=e?-1:0})}handleDispose(t){this.value("disposed").emitter.on("change",e=>{e&&t()})}getGlobalDisabled_(){const t=this.get("parent");return!!t&&t.globalDisabled.rawValue||this.get("disabled")}updateGlobalDisabled_(){this.setGlobalDisabled_(this.getGlobalDisabled_())}onDisabledChange_(){this.updateGlobalDisabled_()}onParentGlobalDisabledChange_(){this.updateGlobalDisabled_()}onParentChange_(t){var e;const n=t.previousRawValue;null==n||n.globalDisabled.emitter.off("change",this.onParentGlobalDisabledChange_),null===(e=this.get("parent"))||void 0===e||e.globalDisabled.emitter.on("change",this.onParentGlobalDisabledChange_),this.updateGlobalDisabled_()}}const N=b(""),U={veryfirst:"vfst",first:"fst",last:"lst",verylast:"vlst"};class K{constructor(t){this.parent_=null,this.blade=t.blade,this.view=t.view,this.viewProps=t.viewProps;const e=this.view.element;this.blade.value("positions").emitter.on("change",()=>{["veryfirst","first","last","verylast"].forEach(t=>{e.classList.remove(N(void 0,U[t]))}),this.blade.get("positions").forEach(t=>{e.classList.add(N(void 0,U[t]))})}),this.viewProps.handleDispose(()=>{!function(t){t&&t.parentElement&&t.parentElement.removeChild(t)}(e)})}get parent(){return this.parent_}set parent(t){this.parent_=t,"parent"in this.viewProps.valMap_?this.viewProps.set("parent",this.parent_?this.parent_.viewProps:null):j({key:"parent",target:O.name,place:"BladeController.parent"})}}const F="http://www.w3.org/2000/svg";function B(t){t.offsetHeight}function H(t){return void 0!==t.ontouchstart}const q={check:'<path d="M2 8l4 4l8 -8"/>',dropdown:'<path d="M5 7h6l-3 3 z"/>',p2dpad:'<path d="M8 4v8"/><path d="M4 8h8"/><circle cx="12" cy="12" r="1.2"/>'};function z(t,e){const n=t.createElementNS(F,"svg");return n.innerHTML=q[e],n}function $(t,e,n){t.insertBefore(e,t.children[n])}function G(t){t.parentElement&&t.parentElement.removeChild(t)}function Y(t){for(;t.children.length>0;)t.removeChild(t.children[0])}function W(t){return t.relatedTarget?t.relatedTarget:"explicitOriginalTarget"in t?t.explicitOriginalTarget:null}const X=b("lbl");class Q{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(X()),e.viewProps.bindClassModifiers(this.element);const n=t.createElement("div");n.classList.add(X("l")),f(e.props,"label",e=>{a(e)?this.element.classList.add(X(void 0,"nol")):(this.element.classList.remove(X(void 0,"nol")),function(t){for(;t.childNodes.length>0;)t.removeChild(t.childNodes[0])}(n),n.appendChild(function(t,e){const n=t.createDocumentFragment();return e.split("\n").map(e=>t.createTextNode(e)).forEach((e,i)=>{i>0&&n.appendChild(t.createElement("br")),n.appendChild(e)}),n}(t,e)))}),this.element.appendChild(n),this.labelElement=n;const i=t.createElement("div");i.classList.add(X("v")),this.element.appendChild(i),this.valueElement=i}}class Z extends K{constructor(t,e){const n=e.valueController.viewProps;super(Object.assign(Object.assign({},e),{view:new Q(t,{props:e.props,viewProps:n}),viewProps:n})),this.props=e.props,this.valueController=e.valueController,this.view.valueElement.appendChild(this.valueController.view.element)}}const J={id:"button",type:"blade",accept(t){const e=D,n=A(t,{title:e.required.string,view:e.required.constant("button"),label:e.optional.string});return n?{params:n}:null},controller:t=>new Z(t.document,{blade:t.blade,props:M.fromObject({label:t.params.label}),valueController:new P(t.document,{props:M.fromObject({title:t.params.title}),viewProps:t.viewProps})}),api:t=>t.controller instanceof Z&&t.controller.valueController instanceof P?new u(t.controller):null};class tt extends K{constructor(t){super(t),this.value=t.value}}function et(){return new M({positions:V([],{equals:l})})}class nt extends M{constructor(t){super(t)}static create(t){const e={completed:!0,expanded:t,expandedHeight:null,shouldFixHeight:!1,temporaryExpanded:null},n=M.createCore(e);return new nt(n)}get styleExpanded(){var t;return null!==(t=this.get("temporaryExpanded"))&&void 0!==t?t:this.get("expanded")}get styleHeight(){if(!this.styleExpanded)return"0";const t=this.get("expandedHeight");return this.get("shouldFixHeight")&&!a(t)?t+"px":"auto"}bindExpandedClass(t,e){const n=()=>{this.styleExpanded?t.classList.add(e):t.classList.remove(e)};f(this,"expanded",n),f(this,"temporaryExpanded",n)}cleanUpTransition(){this.set("shouldFixHeight",!1),this.set("expandedHeight",null),this.set("completed",!0)}}function it(t,e){e.style.height=t.styleHeight}function ot(t,e){t.value("expanded").emitter.on("beforechange",()=>{if(t.set("completed",!1),a(t.get("expandedHeight"))){const n=function(t,e){let n=0;return function(i,o){const r=i.style.transition;i.style.transition="none",t.set("expandedHeight",null),t.set("temporaryExpanded",!0),B(e),n=e.clientHeight,t.set("temporaryExpanded",null),B(e),i.style.transition=r}(e),n}(t,e);n>0&&t.set("expandedHeight",n)}t.set("shouldFixHeight",!0),B(e)}),t.emitter.on("change",()=>{it(t,e)}),it(t,e),e.addEventListener("transitionend",e=>{"height"===e.propertyName&&t.cleanUpTransition()})}class rt extends e{constructor(t,e){super(t),this.rackApi_=e}}class st{constructor(t){this.emitter=new v,this.items_=[],this.cache_=new Set,this.onSubListAdd_=this.onSubListAdd_.bind(this),this.onSubListRemove_=this.onSubListRemove_.bind(this),this.extract_=t}get items(){return this.items_}allItems(){return Array.from(this.cache_)}find(t){for(const e of this.allItems())if(t(e))return e;return null}includes(t){return this.cache_.has(t)}add(t,e){if(this.includes(t))throw c.shouldNeverHappen();const n=void 0!==e?e:this.items_.length;this.items_.splice(n,0,t),this.cache_.add(t);const i=this.extract_(t);i&&(i.emitter.on("add",this.onSubListAdd_),i.emitter.on("remove",this.onSubListRemove_),i.allItems().forEach(t=>{this.cache_.add(t)})),this.emitter.emit("add",{index:n,item:t,root:this,target:this})}remove(t){const e=this.items_.indexOf(t);if(e<0)return;this.items_.splice(e,1),this.cache_.delete(t);const n=this.extract_(t);n&&(n.emitter.off("add",this.onSubListAdd_),n.emitter.off("remove",this.onSubListRemove_)),this.emitter.emit("remove",{index:e,item:t,root:this,target:this})}onSubListAdd_(t){this.cache_.add(t.item),this.emitter.emit("add",{index:t.index,item:t.item,root:this,target:t.target})}onSubListRemove_(t){this.cache_.delete(t.item),this.emitter.emit("remove",{index:t.index,item:t.item,root:this,target:t.target})}}class at extends e{constructor(t){super(t),this.onBindingChange_=this.onBindingChange_.bind(this),this.emitter_=new v,this.controller_.binding.emitter.on("change",this.onBindingChange_)}get label(){return this.controller_.props.get("label")}set label(t){this.controller_.props.set("label",t)}on(t,e){const n=e.bind(this);return this.emitter_.on(t,t=>{n(t.event)}),this}refresh(){this.controller_.binding.read()}onBindingChange_(t){const e=t.sender.target.read();this.emitter_.emit("change",{event:new i(this,e,this.controller_.binding.target.presetKey,t.options.last)})}}class lt extends Z{constructor(t,e){super(t,e),this.binding=e.binding}}class pt extends e{constructor(t){super(t),this.onBindingUpdate_=this.onBindingUpdate_.bind(this),this.emitter_=new v,this.controller_.binding.emitter.on("update",this.onBindingUpdate_)}get label(){return this.controller_.props.get("label")}set label(t){this.controller_.props.set("label",t)}on(t,e){const n=e.bind(this);return this.emitter_.on(t,t=>{n(t.event)}),this}refresh(){this.controller_.binding.read()}onBindingUpdate_(t){const e=t.sender.target.read();this.emitter_.emit("update",{event:new o(this,e,this.controller_.binding.target.presetKey)})}}class dt extends Z{constructor(t,e){super(t,e),this.binding=e.binding,this.viewProps.bindDisabled(this.binding.ticker),this.viewProps.handleDispose(()=>{this.binding.dispose()})}}function ct(t){return t instanceof vt?t.apiSet_:t instanceof rt?t.rackApi_.apiSet_:null}function ht(t,e){const n=t.find(t=>t.controller_===e);if(!n)throw c.shouldNeverHappen();return n}function ut(t,e,n){if(!h.isBindable(t))throw c.notBindable();return new h(t,e,n)}class vt extends e{constructor(t,e){super(t),this.onRackAdd_=this.onRackAdd_.bind(this),this.onRackRemove_=this.onRackRemove_.bind(this),this.onRackInputChange_=this.onRackInputChange_.bind(this),this.onRackMonitorUpdate_=this.onRackMonitorUpdate_.bind(this),this.emitter_=new v,this.apiSet_=new st(ct),this.pool_=e;const n=this.controller_.rack;n.emitter.on("add",this.onRackAdd_),n.emitter.on("remove",this.onRackRemove_),n.emitter.on("inputchange",this.onRackInputChange_),n.emitter.on("monitorupdate",this.onRackMonitorUpdate_),n.children.forEach(t=>{this.setUpApi_(t)})}get children(){return this.controller_.rack.children.map(t=>ht(this.apiSet_,t))}addInput(t,e,n){const i=null!=n?n:{},o=this.controller_.view.element.ownerDocument,r=this.pool_.createInput(o,ut(t,e,i.presetKey),i),s=new at(r);return this.add(s,i.index)}addMonitor(t,e,n){const i=null!=n?n:{},o=this.controller_.view.element.ownerDocument,r=this.pool_.createMonitor(o,ut(t,e),i),s=new pt(r);return this.add(s,i.index)}addFolder(t){return function(t,e){return t.addBlade(Object.assign(Object.assign({},e),{view:"folder"}))}(this,t)}addButton(t){return function(t,e){return t.addBlade(Object.assign(Object.assign({},e),{view:"button"}))}(this,t)}addSeparator(t){return function(t,e){const n=null!=e?e:{};return t.addBlade(Object.assign(Object.assign({},n),{view:"separator"}))}(this,t)}addTab(t){return function(t,e){return t.addBlade(Object.assign(Object.assign({},e),{view:"tab"}))}(this,t)}add(t,e){this.controller_.rack.add(t.controller_,e);const n=this.apiSet_.find(e=>e.controller_===t.controller_);return n&&this.apiSet_.remove(n),this.apiSet_.add(t),t}remove(t){this.controller_.rack.remove(t.controller_)}addBlade(t){const e=this.controller_.view.element.ownerDocument,n=this.pool_.createBlade(e,t),i=this.pool_.createBladeApi(n);return this.add(i,t.index)}on(t,e){const n=e.bind(this);return this.emitter_.on(t,t=>{n(t.event)}),this}setUpApi_(t){this.apiSet_.find(e=>e.controller_===t)||this.apiSet_.add(this.pool_.createBladeApi(t))}onRackAdd_(t){this.setUpApi_(t.bladeController)}onRackRemove_(t){if(t.isRoot){const e=ht(this.apiSet_,t.bladeController);this.apiSet_.remove(e)}}onRackInputChange_(t){const e=t.bladeController;if(e instanceof lt){const n=ht(this.apiSet_,e),o=e.binding;this.emitter_.emit("change",{event:new i(n,o.target.read(),o.target.presetKey,t.options.last)})}else if(e instanceof tt){const n=ht(this.apiSet_,e);this.emitter_.emit("change",{event:new i(n,e.value.rawValue,void 0,t.options.last)})}}onRackMonitorUpdate_(t){if(!(t.bladeController instanceof dt))throw c.shouldNeverHappen();const e=ht(this.apiSet_,t.bladeController),n=t.bladeController.binding;this.emitter_.emit("update",{event:new o(e,n.target.read(),n.target.presetKey)})}}class mt extends rt{constructor(t,e){super(t,new vt(t.rackController,e)),this.emitter_=new v,this.controller_.foldable.value("expanded").emitter.on("change",t=>{this.emitter_.emit("fold",{event:new r(this,t.sender.rawValue)})}),this.rackApi_.on("change",t=>{this.emitter_.emit("change",{event:t})}),this.rackApi_.on("update",t=>{this.emitter_.emit("update",{event:t})})}get expanded(){return this.controller_.foldable.get("expanded")}set expanded(t){this.controller_.foldable.set("expanded",t)}get title(){return this.controller_.props.get("title")}set title(t){this.controller_.props.set("title",t)}get children(){return this.rackApi_.children}addInput(t,e,n){return this.rackApi_.addInput(t,e,n)}addMonitor(t,e,n){return this.rackApi_.addMonitor(t,e,n)}addFolder(t){return this.rackApi_.addFolder(t)}addButton(t){return this.rackApi_.addButton(t)}addSeparator(t){return this.rackApi_.addSeparator(t)}addTab(t){return this.rackApi_.addTab(t)}add(t,e){return this.rackApi_.add(t,e)}remove(t){this.rackApi_.remove(t)}addBlade(t){return this.rackApi_.addBlade(t)}on(t,e){const n=e.bind(this);return this.emitter_.on(t,t=>{n(t.event)}),this}}class bt extends K{constructor(t){super({blade:t.blade,view:t.view,viewProps:t.rackController.viewProps}),this.rackController=t.rackController}}class gt{constructor(t,e){const n=b(e.viewName);this.element=t.createElement("div"),this.element.classList.add(n()),e.viewProps.bindClassModifiers(this.element)}}function _t(t){return t instanceof xt?t.rack:t instanceof bt?t.rackController.rack:null}function ft(t){const e=_t(t);return e?e.bcSet_:null}class wt{constructor(t){var e,n;this.onBladePositionsChange_=this.onBladePositionsChange_.bind(this),this.onSetAdd_=this.onSetAdd_.bind(this),this.onSetRemove_=this.onSetRemove_.bind(this),this.onChildDispose_=this.onChildDispose_.bind(this),this.onChildPositionsChange_=this.onChildPositionsChange_.bind(this),this.onChildInputChange_=this.onChildInputChange_.bind(this),this.onChildMonitorUpdate_=this.onChildMonitorUpdate_.bind(this),this.onChildValueChange_=this.onChildValueChange_.bind(this),this.onChildViewPropsChange_=this.onChildViewPropsChange_.bind(this),this.onDescendantLayout_=this.onDescendantLayout_.bind(this),this.onDescendantInputChange_=this.onDescendantInputChange_.bind(this),this.onDescendantMonitorUpdate_=this.onDescendantMonitorUpdate_.bind(this),this.emitter=new v,this.blade_=null!==(e=t.blade)&&void 0!==e?e:null,null===(n=this.blade_)||void 0===n||n.value("positions").emitter.on("change",this.onBladePositionsChange_),this.viewProps=t.viewProps,this.bcSet_=new st(ft),this.bcSet_.emitter.on("add",this.onSetAdd_),this.bcSet_.emitter.on("remove",this.onSetRemove_)}get children(){return this.bcSet_.items}add(t,e){var n;null===(n=t.parent)||void 0===n||n.remove(t),p(t,"parent")?t.parent=this:(t.parent_=this,j({key:"parent",target:"BladeController",place:"BladeRack.add"})),this.bcSet_.add(t,e)}remove(t){p(t,"parent")?t.parent=null:(t.parent_=null,j({key:"parent",target:"BladeController",place:"BladeRack.remove"})),this.bcSet_.remove(t)}find(t){return this.bcSet_.allItems().filter(e=>e instanceof t)}onSetAdd_(t){this.updatePositions_();const e=t.target===t.root;if(this.emitter.emit("add",{bladeController:t.item,index:t.index,isRoot:e,sender:this}),!e)return;const n=t.item;if(n.viewProps.emitter.on("change",this.onChildViewPropsChange_),n.blade.value("positions").emitter.on("change",this.onChildPositionsChange_),n.viewProps.handleDispose(this.onChildDispose_),n instanceof lt)n.binding.emitter.on("change",this.onChildInputChange_);else if(n instanceof dt)n.binding.emitter.on("update",this.onChildMonitorUpdate_);else if(n instanceof tt)n.value.emitter.on("change",this.onChildValueChange_);else{const t=_t(n);if(t){const e=t.emitter;e.on("layout",this.onDescendantLayout_),e.on("inputchange",this.onDescendantInputChange_),e.on("monitorupdate",this.onDescendantMonitorUpdate_)}}}onSetRemove_(t){this.updatePositions_();const e=t.target===t.root;if(this.emitter.emit("remove",{bladeController:t.item,isRoot:e,sender:this}),!e)return;const n=t.item;if(n instanceof lt)n.binding.emitter.off("change",this.onChildInputChange_);else if(n instanceof dt)n.binding.emitter.off("update",this.onChildMonitorUpdate_);else if(n instanceof tt)n.value.emitter.off("change",this.onChildValueChange_);else{const t=_t(n);if(t){const e=t.emitter;e.off("layout",this.onDescendantLayout_),e.off("inputchange",this.onDescendantInputChange_),e.off("monitorupdate",this.onDescendantMonitorUpdate_)}}}updatePositions_(){const t=this.bcSet_.items.filter(t=>!t.viewProps.get("hidden")),e=t[0],n=t[t.length-1];this.bcSet_.items.forEach(t=>{const i=[];t===e&&(i.push("first"),this.blade_&&!this.blade_.get("positions").includes("veryfirst")||i.push("veryfirst")),t===n&&(i.push("last"),this.blade_&&!this.blade_.get("positions").includes("verylast")||i.push("verylast")),t.blade.set("positions",i)})}onChildPositionsChange_(){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onChildViewPropsChange_(t){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onChildDispose_(){this.bcSet_.items.filter(t=>t.viewProps.get("disposed")).forEach(t=>{this.bcSet_.remove(t)})}onChildInputChange_(t){const e=function(t,e){for(let n=0;n<t.length;n++){const i=t[n];if(i instanceof lt&&i.binding===e)return i}return null}(this.find(lt),t.sender);if(!e)throw c.alreadyDisposed();this.emitter.emit("inputchange",{bladeController:e,options:t.options,sender:this})}onChildMonitorUpdate_(t){const e=function(t,e){for(let n=0;n<t.length;n++){const i=t[n];if(i instanceof dt&&i.binding===e)return i}return null}(this.find(dt),t.sender);if(!e)throw c.alreadyDisposed();this.emitter.emit("monitorupdate",{bladeController:e,sender:this})}onChildValueChange_(t){const e=function(t,e){for(let n=0;n<t.length;n++){const i=t[n];if(i instanceof tt&&i.value===e)return i}return null}(this.find(tt),t.sender);if(!e)throw c.alreadyDisposed();this.emitter.emit("inputchange",{bladeController:e,options:t.options,sender:this})}onDescendantLayout_(t){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onDescendantInputChange_(t){this.emitter.emit("inputchange",{bladeController:t.bladeController,options:t.options,sender:this})}onDescendantMonitorUpdate_(t){this.emitter.emit("monitorupdate",{bladeController:t.bladeController,sender:this})}onBladePositionsChange_(){this.updatePositions_()}}class xt extends K{constructor(t,e){super(Object.assign(Object.assign({},e),{view:new gt(t,{viewName:"brk",viewProps:e.viewProps})})),this.onRackAdd_=this.onRackAdd_.bind(this),this.onRackRemove_=this.onRackRemove_.bind(this);const n=new wt({blade:e.root?void 0:e.blade,viewProps:e.viewProps});n.emitter.on("add",this.onRackAdd_),n.emitter.on("remove",this.onRackRemove_),this.rack=n,this.viewProps.handleDispose(()=>{for(let t=this.rack.children.length-1;t>=0;t--)this.rack.children[t].viewProps.set("disposed",!0)})}onRackAdd_(t){t.isRoot&&$(this.view.element,t.bladeController.view.element,t.index)}onRackRemove_(t){t.isRoot&&G(t.bladeController.view.element)}}const yt=b("cnt");class Ct{constructor(t,e){var n;this.className_=b(null!==(n=e.viewName)&&void 0!==n?n:"fld"),this.element=t.createElement("div"),this.element.classList.add(this.className_(),yt()),e.viewProps.bindClassModifiers(this.element),this.foldable_=e.foldable,this.foldable_.bindExpandedClass(this.element,this.className_(void 0,"expanded")),f(this.foldable_,"completed",w(this.element,this.className_(void 0,"cpl")));const i=t.createElement("button");i.classList.add(this.className_("b")),f(e.props,"title",t=>{a(t)?this.element.classList.add(this.className_(void 0,"not")):this.element.classList.remove(this.className_(void 0,"not"))}),e.viewProps.bindDisabled(i),this.element.appendChild(i),this.buttonElement=i;const o=t.createElement("div");o.classList.add(this.className_("i")),this.element.appendChild(o);const r=t.createElement("div");r.classList.add(this.className_("t")),x(e.props.value("title"),r),this.buttonElement.appendChild(r),this.titleElement=r;const s=t.createElement("div");s.classList.add(this.className_("m")),this.buttonElement.appendChild(s);const l=e.containerElement;l.classList.add(this.className_("c")),this.element.appendChild(l),this.containerElement=l}}class Pt extends bt{constructor(t,e){var n;const i=nt.create(null===(n=e.expanded)||void 0===n||n),o=new xt(t,{blade:e.blade,root:e.root,viewProps:e.viewProps});super(Object.assign(Object.assign({},e),{rackController:o,view:new Ct(t,{containerElement:o.view.element,foldable:i,props:e.props,viewName:e.root?"rot":void 0,viewProps:e.viewProps})})),this.onTitleClick_=this.onTitleClick_.bind(this),this.props=e.props,this.foldable=i,ot(this.foldable,this.view.containerElement),this.rackController.rack.emitter.on("add",()=>{this.foldable.cleanUpTransition()}),this.rackController.rack.emitter.on("remove",()=>{this.foldable.cleanUpTransition()}),this.view.buttonElement.addEventListener("click",this.onTitleClick_)}get document(){return this.view.element.ownerDocument}onTitleClick_(){this.foldable.set("expanded",!this.foldable.get("expanded"))}}const kt={id:"folder",type:"blade",accept(t){const e=D,n=A(t,{title:e.required.string,view:e.required.constant("folder"),expanded:e.optional.boolean});return n?{params:n}:null},controller:t=>new Pt(t.document,{blade:t.blade,expanded:t.params.expanded,props:M.fromObject({title:t.params.title}),viewProps:t.viewProps}),api:t=>t.controller instanceof Pt?new mt(t.controller,t.pool):null};class Et extends tt{constructor(t,e){const n=e.valueController.viewProps;super(Object.assign(Object.assign({},e),{value:e.valueController.value,view:new Q(t,{props:e.props,viewProps:n}),viewProps:n})),this.props=e.props,this.valueController=e.valueController,this.view.valueElement.appendChild(this.valueController.view.element)}}class Vt extends e{}const Mt=b("spr");class St{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(Mt()),e.viewProps.bindClassModifiers(this.element);const n=t.createElement("hr");n.classList.add(Mt("r")),this.element.appendChild(n)}}class Lt extends K{constructor(t,e){super(Object.assign(Object.assign({},e),{view:new St(t,{viewProps:e.viewProps})}))}}const Dt={id:"separator",type:"blade",accept(t){const e=A(t,{view:D.required.constant("separator")});return e?{params:e}:null},controller:t=>new Lt(t.document,{blade:t.blade,viewProps:t.viewProps}),api:t=>t.controller instanceof Lt?new Vt(t.controller):null},At=b("tbi");class jt{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(At()),e.viewProps.bindClassModifiers(this.element),f(e.props,"selected",t=>{t?this.element.classList.add(At(void 0,"sel")):this.element.classList.remove(At(void 0,"sel"))});const n=t.createElement("button");n.classList.add(At("b")),e.viewProps.bindDisabled(n),this.element.appendChild(n),this.buttonElement=n;const i=t.createElement("div");i.classList.add(At("t")),x(e.props.value("title"),i),this.buttonElement.appendChild(i),this.titleElement=i}}class It{constructor(t,e){this.emitter=new v,this.onClick_=this.onClick_.bind(this),this.props=e.props,this.viewProps=e.viewProps,this.view=new jt(t,{props:e.props,viewProps:e.viewProps}),this.view.buttonElement.addEventListener("click",this.onClick_)}onClick_(){this.emitter.emit("click",{sender:this})}}class Rt{constructor(t,e){this.onItemClick_=this.onItemClick_.bind(this),this.ic_=new It(t,{props:e.itemProps,viewProps:O.create()}),this.ic_.emitter.on("click",this.onItemClick_),this.cc_=new xt(t,{blade:et(),viewProps:O.create()}),this.props=e.props,f(this.props,"selected",t=>{this.itemController.props.set("selected",t),this.contentController.viewProps.set("hidden",!t)})}get itemController(){return this.ic_}get contentController(){return this.cc_}onItemClick_(){this.props.set("selected",!0)}}class Tt{constructor(t,e){this.controller_=t,this.rackApi_=e}get title(){var t;return null!==(t=this.controller_.itemController.props.get("title"))&&void 0!==t?t:""}set title(t){this.controller_.itemController.props.set("title",t)}get selected(){return this.controller_.props.get("selected")}set selected(t){this.controller_.props.set("selected",t)}get children(){return this.rackApi_.children}addButton(t){return this.rackApi_.addButton(t)}addFolder(t){return this.rackApi_.addFolder(t)}addSeparator(t){return this.rackApi_.addSeparator(t)}addTab(t){return this.rackApi_.addTab(t)}add(t,e){this.rackApi_.add(t,e)}remove(t){this.rackApi_.remove(t)}addInput(t,e,n){return this.rackApi_.addInput(t,e,n)}addMonitor(t,e,n){return this.rackApi_.addMonitor(t,e,n)}addBlade(t){return this.rackApi_.addBlade(t)}}class Ot extends rt{constructor(t,e){super(t,new vt(t.rackController,e)),this.onPageAdd_=this.onPageAdd_.bind(this),this.onPageRemove_=this.onPageRemove_.bind(this),this.onSelect_=this.onSelect_.bind(this),this.emitter_=new v,this.pageApiMap_=new Map,this.rackApi_.on("change",t=>{this.emitter_.emit("change",{event:t})}),this.rackApi_.on("update",t=>{this.emitter_.emit("update",{event:t})}),this.controller_.tab.selectedIndex.emitter.on("change",this.onSelect_),this.controller_.pageSet.emitter.on("add",this.onPageAdd_),this.controller_.pageSet.emitter.on("remove",this.onPageRemove_),this.controller_.pageSet.items.forEach(t=>{this.setUpPageApi_(t)})}get pages(){return this.controller_.pageSet.items.map(t=>{const e=this.pageApiMap_.get(t);if(!e)throw c.shouldNeverHappen();return e})}addPage(t){const e=this.controller_.view.element.ownerDocument,n=new Rt(e,{itemProps:M.fromObject({selected:!1,title:t.title}),props:M.fromObject({selected:!1})});this.controller_.add(n,t.index);const i=this.pageApiMap_.get(n);if(!i)throw c.shouldNeverHappen();return i}removePage(t){this.controller_.remove(t)}on(t,e){const n=e.bind(this);return this.emitter_.on(t,t=>{n(t.event)}),this}setUpPageApi_(t){const e=this.rackApi_.apiSet_.find(e=>e.controller_===t.contentController);if(!e)throw c.shouldNeverHappen();const n=new Tt(t,e);this.pageApiMap_.set(t,n)}onPageAdd_(t){this.setUpPageApi_(t.item)}onPageRemove_(t){if(!this.pageApiMap_.get(t.item))throw c.shouldNeverHappen();this.pageApiMap_.delete(t.item)}onSelect_(t){this.emitter_.emit("select",{event:new s(this,t.rawValue)})}}class Nt{constructor(){this.onItemSelectedChange_=this.onItemSelectedChange_.bind(this),this.empty=V(!0),this.selectedIndex=V(-1),this.items_=[]}add(t,e){const n=null!=e?e:this.items_.length;this.items_.splice(n,0,t),t.emitter.on("change",this.onItemSelectedChange_),this.keepSelection_()}remove(t){const e=this.items_.indexOf(t);e<0||(this.items_.splice(e,1),t.emitter.off("change",this.onItemSelectedChange_),this.keepSelection_())}keepSelection_(){if(0===this.items_.length)return this.selectedIndex.rawValue=-1,void(this.empty.rawValue=!0);const t=this.items_.findIndex(t=>t.rawValue);t<0?(this.items_.forEach((t,e)=>{t.rawValue=0===e}),this.selectedIndex.rawValue=0):(this.items_.forEach((e,n)=>{e.rawValue=n===t}),this.selectedIndex.rawValue=t),this.empty.rawValue=!1}onItemSelectedChange_(t){if(t.rawValue){const e=this.items_.findIndex(e=>e===t.sender);this.items_.forEach((t,n)=>{t.rawValue=n===e}),this.selectedIndex.rawValue=e}else this.keepSelection_()}}const Ut=b("tab");class Kt{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(Ut(),yt()),e.viewProps.bindClassModifiers(this.element),_(e.empty,w(this.element,Ut(void 0,"nop")));const n=t.createElement("div");n.classList.add(Ut("t")),this.element.appendChild(n),this.itemsElement=n;const i=t.createElement("div");i.classList.add(Ut("i")),this.element.appendChild(i);const o=e.contentsElement;o.classList.add(Ut("c")),this.element.appendChild(o),this.contentsElement=o}}class Ft extends bt{constructor(t,e){const n=new xt(t,{blade:e.blade,viewProps:e.viewProps}),i=new Nt;super({blade:e.blade,rackController:n,view:new Kt(t,{contentsElement:n.view.element,empty:i.empty,viewProps:e.viewProps})}),this.onPageAdd_=this.onPageAdd_.bind(this),this.onPageRemove_=this.onPageRemove_.bind(this),this.pageSet_=new st(()=>null),this.pageSet_.emitter.on("add",this.onPageAdd_),this.pageSet_.emitter.on("remove",this.onPageRemove_),this.tab=i}get pageSet(){return this.pageSet_}add(t,e){this.pageSet_.add(t,e)}remove(t){this.pageSet_.remove(this.pageSet_.items[t])}onPageAdd_(t){const e=t.item;$(this.view.itemsElement,e.itemController.view.element,t.index),e.itemController.viewProps.set("parent",this.viewProps),this.rackController.rack.add(e.contentController,t.index),this.tab.add(e.props.value("selected"))}onPageRemove_(t){const e=t.item;G(e.itemController.view.element),e.itemController.viewProps.set("parent",null),this.rackController.rack.remove(e.contentController),this.tab.remove(e.props.value("selected"))}}const Bt={id:"tab",type:"blade",accept(t){const e=D,n=A(t,{pages:e.required.array(e.required.object({title:e.required.string})),view:e.required.constant("tab")});return n&&0!==n.pages.length?{params:n}:null},controller(t){const e=new Ft(t.document,{blade:t.blade,viewProps:t.viewProps});return t.params.pages.forEach(n=>{const i=new Rt(t.document,{itemProps:M.fromObject({selected:!1,title:n.title}),props:M.fromObject({selected:!1})});e.add(i)}),e},api:t=>t.controller instanceof Ft?new Ot(t.controller,t.pool):null};class Ht{constructor(){this.disabled=!1,this.emitter=new v}dispose(){}tick(){this.disabled||this.emitter.emit("tick",{sender:this})}}class qt{constructor(t,e){this.disabled_=!1,this.timerId_=null,this.onTick_=this.onTick_.bind(this),this.doc_=t,this.emitter=new v,this.interval_=e,this.setTimer_()}get disabled(){return this.disabled_}set disabled(t){this.disabled_=t,this.disabled_?this.clearTimer_():this.setTimer_()}dispose(){this.clearTimer_()}clearTimer_(){if(null===this.timerId_)return;const t=this.doc_.defaultView;t&&t.clearInterval(this.timerId_),this.timerId_=null}setTimer_(){if(this.clearTimer_(),this.interval_<=0)return;const t=this.doc_.defaultView;t&&(this.timerId_=t.setInterval(this.onTick_,this.interval_))}onTick_(){this.disabled_||this.emitter.emit("tick",{sender:this})}}class zt{constructor(t){this.onValueChange_=this.onValueChange_.bind(this),this.reader=t.reader,this.writer=t.writer,this.emitter=new v,this.value=t.value,this.value.emitter.on("change",this.onValueChange_),this.target=t.target,this.read()}read(){const t=this.target.read();void 0!==t&&(this.value.rawValue=this.reader(t))}write_(t){this.writer(this.target,t)}onValueChange_(t){this.write_(t.rawValue),this.emitter.emit("change",{options:t.options,rawValue:t.rawValue,sender:this})}}function $t(t,e){for(;t.length<e;)t.push(void 0)}function Gt(t){const e=[];return $t(e,t),V(e)}function Yt(t){const e=t.indexOf(void 0);return e<0?t:t.slice(0,e)}class Wt{constructor(t){this.onTick_=this.onTick_.bind(this),this.reader_=t.reader,this.target=t.target,this.emitter=new v,this.value=t.value,this.ticker=t.ticker,this.ticker.emitter.on("tick",this.onTick_),this.read()}dispose(){this.ticker.dispose()}read(){const t=this.target.read();if(void 0===t)return;const e=this.value.rawValue,n=this.reader_(t);this.value.rawValue=function(t,e){const n=[...Yt(t),e];return n.length>t.length?n.splice(0,n.length-t.length):$t(n,t.length),n}(e,n),this.emitter.emit("update",{rawValue:n,sender:this})}onTick_(t){this.read()}}class Xt{constructor(t){this.constraints=t}constrain(t){return this.constraints.reduce((t,e)=>e.constrain(t),t)}}function Qt(t,e){if(t instanceof e)return t;if(t instanceof Xt){const n=t.constraints.reduce((t,n)=>t||(n instanceof e?n:null),null);if(n)return n}return null}class Zt{constructor(t){this.values=M.fromObject({max:t.max,min:t.min})}constrain(t){const e=this.values.get("max"),n=this.values.get("min");return Math.min(Math.max(t,n),e)}}class Jt{constructor(t){this.values=M.fromObject({options:t})}get options(){return this.values.get("options")}constrain(t){const e=this.values.get("options");return 0===e.length||e.filter(e=>e.value===t).length>0?t:e[0].value}}class te{constructor(t){this.values=M.fromObject({max:t.max,min:t.min})}get maxValue(){return this.values.get("max")}get minValue(){return this.values.get("min")}constrain(t){const e=this.values.get("max"),n=this.values.get("min");let i=t;return a(n)||(i=Math.max(i,n)),a(e)||(i=Math.min(i,e)),i}}class ee{constructor(t,e=0){this.step=t,this.origin=e}constrain(t){const e=this.origin%this.step;return e+Math.round((t-e)/this.step)*this.step}}const ne=b("lst");class ie{constructor(t,e){this.onValueChange_=this.onValueChange_.bind(this),this.props_=e.props,this.element=t.createElement("div"),this.element.classList.add(ne()),e.viewProps.bindClassModifiers(this.element);const n=t.createElement("select");n.classList.add(ne("s")),f(this.props_,"options",e=>{Y(n),e.forEach((e,i)=>{const o=t.createElement("option");o.dataset.index=String(i),o.textContent=e.text,o.value=String(e.value),n.appendChild(o)})}),e.viewProps.bindDisabled(n),this.element.appendChild(n),this.selectElement=n;const i=t.createElement("div");i.classList.add(ne("m")),i.appendChild(z(t,"dropdown")),this.element.appendChild(i),e.value.emitter.on("change",this.onValueChange_),this.value_=e.value,this.update_()}update_(){this.selectElement.value=String(this.value_.rawValue)}onValueChange_(){this.update_()}}class oe{constructor(t,e){this.onSelectChange_=this.onSelectChange_.bind(this),this.props=e.props,this.value=e.value,this.viewProps=e.viewProps,this.view=new ie(t,{props:this.props,value:this.value,viewProps:this.viewProps}),this.view.selectElement.addEventListener("change",this.onSelectChange_)}onSelectChange_(t){const e=t.currentTarget.selectedOptions.item(0);if(!e)return;const n=Number(e.dataset.index);this.value.rawValue=this.props.get("options")[n].value}}const re=b("pop");class se{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(re()),e.viewProps.bindClassModifiers(this.element),_(e.shows,w(this.element,re(void 0,"v")))}}class ae{constructor(t,e){this.shows=V(!1),this.viewProps=e.viewProps,this.view=new se(t,{shows:this.shows,viewProps:this.viewProps})}}const le=b("txt");class pe{constructor(t,e){this.onChange_=this.onChange_.bind(this),this.element=t.createElement("div"),this.element.classList.add(le()),e.viewProps.bindClassModifiers(this.element),this.props_=e.props,this.props_.emitter.on("change",this.onChange_);const n=t.createElement("input");n.classList.add(le("i")),n.type="text",e.viewProps.bindDisabled(n),this.element.appendChild(n),this.inputElement=n,e.value.emitter.on("change",this.onChange_),this.value_=e.value,this.refresh()}refresh(){const t=this.props_.get("formatter");this.inputElement.value=t(this.value_.rawValue)}onChange_(){this.refresh()}}class de{constructor(t,e){this.onInputChange_=this.onInputChange_.bind(this),this.parser_=e.parser,this.props=e.props,this.value=e.value,this.viewProps=e.viewProps,this.view=new pe(t,{props:e.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_)}onInputChange_(t){const e=t.currentTarget.value,n=this.parser_(e);a(n)||(this.value.rawValue=n),this.view.refresh()}}function ce(t){return"false"!==t&&!!t}function he(t){return function(t){return String(t)}(t)}class ue{constructor(t){this.text=t}evaluate(){return Number(this.text)}toString(){return this.text}}const ve={"**":(t,e)=>Math.pow(t,e),"*":(t,e)=>t*e,"/":(t,e)=>t/e,"%":(t,e)=>t%e,"+":(t,e)=>t+e,"-":(t,e)=>t-e,"<<":(t,e)=>t<<e,">>":(t,e)=>t>>e,">>>":(t,e)=>t>>>e,"&":(t,e)=>t&e,"^":(t,e)=>t^e,"|":(t,e)=>t|e};class me{constructor(t,e,n){this.left=e,this.operator=t,this.right=n}evaluate(){const t=ve[this.operator];if(!t)throw new Error("unexpected binary operator: '"+this.operator);return t(this.left.evaluate(),this.right.evaluate())}toString(){return["b(",this.left.toString(),this.operator,this.right.toString(),")"].join(" ")}}const be={"+":t=>t,"-":t=>-t,"~":t=>~t};class ge{constructor(t,e){this.operator=t,this.expression=e}evaluate(){const t=be[this.operator];if(!t)throw new Error("unexpected unary operator: '"+this.operator);return t(this.expression.evaluate())}toString(){return["u(",this.operator,this.expression.toString(),")"].join(" ")}}function _e(t){return(e,n)=>{for(let i=0;i<t.length;i++){const o=t[i](e,n);if(""!==o)return o}return""}}function fe(t,e){var n;const i=t.substr(e).match(/^\s+/);return null!==(n=i&&i[0])&&void 0!==n?n:""}function we(t,e){var n;const i=t.substr(e).match(/^[0-9]+/);return null!==(n=i&&i[0])&&void 0!==n?n:""}function xe(t,e){const n=t.substr(e,1);if(e+=1,"e"!==n.toLowerCase())return"";const i=function(t,e){const n=we(t,e);if(""!==n)return n;const i=t.substr(e,1);if("-"!==i&&"+"!==i)return"";const o=we(t,e+=1);return""===o?"":i+o}(t,e);return""===i?"":n+i}function ye(t,e){const n=t.substr(e,1);if("0"===n)return n;const i=function(t,e){const n=t.substr(e,1);return n.match(/^[1-9]$/)?n:""}(t,e);return e+=i.length,""===i?"":i+we(t,e)}const Ce=_e([function(t,e){const n=ye(t,e);if(e+=n.length,""===n)return"";const i=t.substr(e,1);if(e+=i.length,"."!==i)return"";const o=we(t,e);return n+i+o+xe(t,e+=o.length)},function(t,e){const n=t.substr(e,1);if(e+=n.length,"."!==n)return"";const i=we(t,e);return e+=i.length,""===i?"":n+i+xe(t,e)},function(t,e){const n=ye(t,e);return e+=n.length,""===n?"":n+xe(t,e)}]),Pe=_e([function(t,e){const n=t.substr(e,2);if(e+=n.length,"0b"!==n.toLowerCase())return"";const i=function(t,e){var n;const i=t.substr(e).match(/^[01]+/);return null!==(n=i&&i[0])&&void 0!==n?n:""}(t,e);return""===i?"":n+i},function(t,e){const n=t.substr(e,2);if(e+=n.length,"0o"!==n.toLowerCase())return"";const i=function(t,e){var n;const i=t.substr(e).match(/^[0-7]+/);return null!==(n=i&&i[0])&&void 0!==n?n:""}(t,e);return""===i?"":n+i},function(t,e){const n=t.substr(e,2);if(e+=n.length,"0x"!==n.toLowerCase())return"";const i=function(t,e){var n;const i=t.substr(e).match(/^[0-9a-f]+/i);return null!==(n=i&&i[0])&&void 0!==n?n:""}(t,e);return""===i?"":n+i}]),ke=_e([Pe,Ce]);function Ee(t,e,n){n+=fe(e,n).length;const i=t.filter(t=>e.startsWith(t,n))[0];return i?(n+=i.length,{cursor:n+=fe(e,n).length,operator:i}):null}const Ve=[["**"],["*","/","%"],["+","-"],["<<",">>>",">>"],["&"],["^"],["|"]].reduce((t,e)=>function(t,e){return(n,i)=>{const o=t(n,i);if(!o)return null;i=o.cursor;let r=o.evaluable;for(;;){const o=Ee(e,n,i);if(!o)break;i=o.cursor;const s=t(n,i);if(!s)return null;i=s.cursor,r=new me(o.operator,r,s.evaluable)}return r?{cursor:i,evaluable:r}:null}}(t,e),(function t(e,n){const i=function(t,e){var n;return null!==(n=function(t,e){const n=ke(t,e);return e+=n.length,""===n?null:{evaluable:new ue(n),cursor:e}}(t,e))&&void 0!==n?n:function(t,e){const n=t.substr(e,1);if(e+=n.length,"("!==n)return null;const i=Me(t,e);if(!i)return null;e=i.cursor,e+=fe(t,e).length;const o=t.substr(e,1);return e+=o.length,")"!==o?null:{evaluable:i.evaluable,cursor:e}}(t,e)}(e,n);if(i)return i;const o=e.substr(n,1);if(n+=o.length,"+"!==o&&"-"!==o&&"~"!==o)return null;const r=t(e,n);return r?{cursor:n=r.cursor,evaluable:new ge(o,r.evaluable)}:null}));function Me(t,e){return e+=fe(t,e).length,Ve(t,e)}function Se(t){var e;const n=function(t){const e=Me(t,0);return e?e.cursor+fe(t,e.cursor).length!==t.length?null:e.evaluable:null}(t);return null!==(e=null==n?void 0:n.evaluate())&&void 0!==e?e:null}function Le(t){if("number"==typeof t)return t;if("string"==typeof t){const e=Se(t);if(!a(e))return e}return 0}function De(t){return String(t)}function Ae(t){return e=>e.toFixed(Math.max(Math.min(t,20),0))}const je=Ae(0);function Ie(t){return je(t)+"%"}function Re(t){return String(t)}function Te(t){return t}function Oe({primary:t,secondary:e,forward:n,backward:i}){let o=!1;function r(t){o||(o=!0,t(),o=!1)}t.emitter.on("change",i=>{r(()=>{e.setRawValue(n(t,e),i.options)})}),e.emitter.on("change",o=>{r(()=>{t.setRawValue(i(t,e),o.options)}),r(()=>{e.setRawValue(n(t,e),o.options)})}),r(()=>{e.setRawValue(n(t,e),{forceEmit:!1,last:!0})})}function Ne(t,e){const n=t*(e.altKey?.1:1)*(e.shiftKey?10:1);return e.upKey?+n:e.downKey?-n:0}function Ue(t){return{altKey:t.altKey,downKey:"ArrowDown"===t.key,shiftKey:t.shiftKey,upKey:"ArrowUp"===t.key}}function Ke(t){return{altKey:t.altKey,downKey:"ArrowLeft"===t.key,shiftKey:t.shiftKey,upKey:"ArrowRight"===t.key}}function Fe(t){return function(t){return"ArrowUp"===t||"ArrowDown"===t}(t)||"ArrowLeft"===t||"ArrowRight"===t}function Be(t,e){var n,i;const o=e.ownerDocument.defaultView,r=e.getBoundingClientRect();return{x:t.pageX-((null!==(n=o&&o.scrollX)&&void 0!==n?n:0)+r.left),y:t.pageY-((null!==(i=o&&o.scrollY)&&void 0!==i?i:0)+r.top)}}class He{constructor(t){this.lastTouch_=null,this.onDocumentMouseMove_=this.onDocumentMouseMove_.bind(this),this.onDocumentMouseUp_=this.onDocumentMouseUp_.bind(this),this.onMouseDown_=this.onMouseDown_.bind(this),this.onTouchEnd_=this.onTouchEnd_.bind(this),this.onTouchMove_=this.onTouchMove_.bind(this),this.onTouchStart_=this.onTouchStart_.bind(this),this.elem_=t,this.emitter=new v,t.addEventListener("touchstart",this.onTouchStart_,{passive:!1}),t.addEventListener("touchmove",this.onTouchMove_,{passive:!0}),t.addEventListener("touchend",this.onTouchEnd_),t.addEventListener("mousedown",this.onMouseDown_)}computePosition_(t){const e=this.elem_.getBoundingClientRect();return{bounds:{width:e.width,height:e.height},point:t?{x:t.x,y:t.y}:null}}onMouseDown_(t){var e;t.preventDefault(),null===(e=t.currentTarget)||void 0===e||e.focus();const n=this.elem_.ownerDocument;n.addEventListener("mousemove",this.onDocumentMouseMove_),n.addEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("down",{altKey:t.altKey,data:this.computePosition_(Be(t,this.elem_)),sender:this,shiftKey:t.shiftKey})}onDocumentMouseMove_(t){this.emitter.emit("move",{altKey:t.altKey,data:this.computePosition_(Be(t,this.elem_)),sender:this,shiftKey:t.shiftKey})}onDocumentMouseUp_(t){const e=this.elem_.ownerDocument;e.removeEventListener("mousemove",this.onDocumentMouseMove_),e.removeEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("up",{altKey:t.altKey,data:this.computePosition_(Be(t,this.elem_)),sender:this,shiftKey:t.shiftKey})}onTouchStart_(t){t.preventDefault();const e=t.targetTouches.item(0),n=this.elem_.getBoundingClientRect();this.emitter.emit("down",{altKey:t.altKey,data:this.computePosition_(e?{x:e.clientX-n.left,y:e.clientY-n.top}:void 0),sender:this,shiftKey:t.shiftKey}),this.lastTouch_=e}onTouchMove_(t){const e=t.targetTouches.item(0),n=this.elem_.getBoundingClientRect();this.emitter.emit("move",{altKey:t.altKey,data:this.computePosition_(e?{x:e.clientX-n.left,y:e.clientY-n.top}:void 0),sender:this,shiftKey:t.shiftKey}),this.lastTouch_=e}onTouchEnd_(t){var e;const n=null!==(e=t.targetTouches.item(0))&&void 0!==e?e:this.lastTouch_,i=this.elem_.getBoundingClientRect();this.emitter.emit("up",{altKey:t.altKey,data:this.computePosition_(n?{x:n.clientX-i.left,y:n.clientY-i.top}:void 0),sender:this,shiftKey:t.shiftKey})}}function qe(t,e,n,i,o){return i+(t-e)/(n-e)*(o-i)}function ze(t){return String(t.toFixed(10)).split(".")[1].replace(/0+$/,"").length}function $e(t,e,n){return Math.min(Math.max(t,e),n)}function Ge(t,e){return(t%e+e)%e}const Ye=b("txt");class We{constructor(t,e){this.onChange_=this.onChange_.bind(this),this.props_=e.props,this.props_.emitter.on("change",this.onChange_),this.element=t.createElement("div"),this.element.classList.add(Ye(),Ye(void 0,"num")),e.arrayPosition&&this.element.classList.add(Ye(void 0,e.arrayPosition)),e.viewProps.bindClassModifiers(this.element);const n=t.createElement("input");n.classList.add(Ye("i")),n.type="text",e.viewProps.bindDisabled(n),this.element.appendChild(n),this.inputElement=n,this.onDraggingChange_=this.onDraggingChange_.bind(this),this.dragging_=e.dragging,this.dragging_.emitter.on("change",this.onDraggingChange_),this.element.classList.add(Ye()),this.inputElement.classList.add(Ye("i"));const i=t.createElement("div");i.classList.add(Ye("k")),this.element.appendChild(i),this.knobElement=i;const o=t.createElementNS(F,"svg");o.classList.add(Ye("g")),this.knobElement.appendChild(o);const r=t.createElementNS(F,"path");r.classList.add(Ye("gb")),o.appendChild(r),this.guideBodyElem_=r;const s=t.createElementNS(F,"path");s.classList.add(Ye("gh")),o.appendChild(s),this.guideHeadElem_=s;const a=t.createElement("div");a.classList.add(b("tt")()),this.knobElement.appendChild(a),this.tooltipElem_=a,e.value.emitter.on("change",this.onChange_),this.value=e.value,this.refresh()}onDraggingChange_(t){if(null===t.rawValue)return void this.element.classList.remove(Ye(void 0,"drg"));this.element.classList.add(Ye(void 0,"drg"));const e=t.rawValue/this.props_.get("draggingScale"),n=e+(e>0?-1:e<0?1:0),i=$e(-n,-4,4);this.guideHeadElem_.setAttributeNS(null,"d",[`M ${n+i},0 L${n},4 L${n+i},8`,`M ${e},-1 L${e},9`].join(" ")),this.guideBodyElem_.setAttributeNS(null,"d",`M 0,4 L${e},4`);const o=this.props_.get("formatter");this.tooltipElem_.textContent=o(this.value.rawValue),this.tooltipElem_.style.left=e+"px"}refresh(){const t=this.props_.get("formatter");this.inputElement.value=t(this.value.rawValue)}onChange_(){this.refresh()}}class Xe{constructor(t,e){var n;this.originRawValue_=0,this.onInputChange_=this.onInputChange_.bind(this),this.onInputKeyDown_=this.onInputKeyDown_.bind(this),this.onInputKeyUp_=this.onInputKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.baseStep_=e.baseStep,this.parser_=e.parser,this.props=e.props,this.sliderProps_=null!==(n=e.sliderProps)&&void 0!==n?n:null,this.value=e.value,this.viewProps=e.viewProps,this.dragging_=V(null),this.view=new We(t,{arrayPosition:e.arrayPosition,dragging:this.dragging_,props:this.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_),this.view.inputElement.addEventListener("keydown",this.onInputKeyDown_),this.view.inputElement.addEventListener("keyup",this.onInputKeyUp_);const i=new He(this.view.knobElement);i.emitter.on("down",this.onPointerDown_),i.emitter.on("move",this.onPointerMove_),i.emitter.on("up",this.onPointerUp_)}constrainValue_(t){var e,n;const i=null===(e=this.sliderProps_)||void 0===e?void 0:e.get("minValue"),o=null===(n=this.sliderProps_)||void 0===n?void 0:n.get("maxValue");let r=t;return void 0!==i&&(r=Math.max(r,i)),void 0!==o&&(r=Math.min(r,o)),r}onInputChange_(t){const e=t.currentTarget.value,n=this.parser_(e);a(n)||(this.value.rawValue=this.constrainValue_(n)),this.view.refresh()}onInputKeyDown_(t){const e=Ne(this.baseStep_,Ue(t));0!==e&&this.value.setRawValue(this.constrainValue_(this.value.rawValue+e),{forceEmit:!1,last:!1})}onInputKeyUp_(t){0!==Ne(this.baseStep_,Ue(t))&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}onPointerDown_(){this.originRawValue_=this.value.rawValue,this.dragging_.rawValue=0}computeDraggingValue_(t){if(!t.point)return null;const e=t.point.x-t.bounds.width/2;return this.constrainValue_(this.originRawValue_+e*this.props.get("draggingScale"))}onPointerMove_(t){const e=this.computeDraggingValue_(t.data);null!==e&&(this.value.setRawValue(e,{forceEmit:!1,last:!1}),this.dragging_.rawValue=this.value.rawValue-this.originRawValue_)}onPointerUp_(t){const e=this.computeDraggingValue_(t.data);null!==e&&(this.value.setRawValue(e,{forceEmit:!0,last:!0}),this.dragging_.rawValue=null)}}const Qe=b("sld");class Ze{constructor(t,e){this.onChange_=this.onChange_.bind(this),this.props_=e.props,this.props_.emitter.on("change",this.onChange_),this.element=t.createElement("div"),this.element.classList.add(Qe()),e.viewProps.bindClassModifiers(this.element);const n=t.createElement("div");n.classList.add(Qe("t")),e.viewProps.bindTabIndex(n),this.element.appendChild(n),this.trackElement=n;const i=t.createElement("div");i.classList.add(Qe("k")),this.trackElement.appendChild(i),this.knobElement=i,e.value.emitter.on("change",this.onChange_),this.value=e.value,this.update_()}update_(){const t=$e(qe(this.value.rawValue,this.props_.get("minValue"),this.props_.get("maxValue"),0,100),0,100);this.knobElement.style.width=t+"%"}onChange_(){this.update_()}}class Je{constructor(t,e){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDownOrMove_=this.onPointerDownOrMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.baseStep_=e.baseStep,this.value=e.value,this.viewProps=e.viewProps,this.props=e.props,this.view=new Ze(t,{props:this.props,value:this.value,viewProps:this.viewProps}),this.ptHandler_=new He(this.view.trackElement),this.ptHandler_.emitter.on("down",this.onPointerDownOrMove_),this.ptHandler_.emitter.on("move",this.onPointerDownOrMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.trackElement.addEventListener("keydown",this.onKeyDown_),this.view.trackElement.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(t,e){t.point&&this.value.setRawValue(qe($e(t.point.x,0,t.bounds.width),0,t.bounds.width,this.props.get("minValue"),this.props.get("maxValue")),e)}onPointerDownOrMove_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerUp_(t){this.handlePointerEvent_(t.data,{forceEmit:!0,last:!0})}onKeyDown_(t){const e=Ne(this.baseStep_,Ke(t));0!==e&&this.value.setRawValue(this.value.rawValue+e,{forceEmit:!1,last:!1})}onKeyUp_(t){0!==Ne(this.baseStep_,Ke(t))&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}const tn=b("sldtxt");class en{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(tn());const n=t.createElement("div");n.classList.add(tn("s")),this.sliderView_=e.sliderView,n.appendChild(this.sliderView_.element),this.element.appendChild(n);const i=t.createElement("div");i.classList.add(tn("t")),this.textView_=e.textView,i.appendChild(this.textView_.element),this.element.appendChild(i)}}class nn{constructor(t,e){this.value=e.value,this.viewProps=e.viewProps,this.sliderC_=new Je(t,{baseStep:e.baseStep,props:e.sliderProps,value:e.value,viewProps:this.viewProps}),this.textC_=new Xe(t,{baseStep:e.baseStep,parser:e.parser,props:e.textProps,sliderProps:e.sliderProps,value:e.value,viewProps:e.viewProps}),this.view=new en(t,{sliderView:this.sliderC_.view,textView:this.textC_.view})}get sliderController(){return this.sliderC_}get textController(){return this.textC_}}function on(t,e){t.write(e)}function rn(t){const e=D;return Array.isArray(t)?e.required.array(e.required.object({text:e.required.string,value:e.required.raw}))(t).value:"object"==typeof t?e.required.raw(t).value:void 0}function sn(t){if("inline"===t||"popup"===t)return t}function an(t){const e=D;return e.required.object({max:e.optional.number,min:e.optional.number,step:e.optional.number})(t).value}function ln(t){if(Array.isArray(t))return t;const e=[];return Object.keys(t).forEach(n=>{e.push({text:n,value:t[n]})}),e}function pn(t){return a(t)?null:new Jt(ln(t))}function dn(t,e){const n=t&&Qt(t,ee);return n?ze(n.step):Math.max(ze(e),2)}function cn(t){const e=function(t){const e=t?Qt(t,ee):null;return e?e.step:null}(t);return null!=e?e:1}function hn(t,e){var n;const i=t&&Qt(t,ee),o=Math.abs(null!==(n=null==i?void 0:i.step)&&void 0!==n?n:e);return 0===o?.1:Math.pow(10,Math.floor(Math.log10(o))-1)}const un=b("ckb");class vn{constructor(t,e){this.onValueChange_=this.onValueChange_.bind(this),this.element=t.createElement("div"),this.element.classList.add(un()),e.viewProps.bindClassModifiers(this.element);const n=t.createElement("label");n.classList.add(un("l")),this.element.appendChild(n);const i=t.createElement("input");i.classList.add(un("i")),i.type="checkbox",n.appendChild(i),this.inputElement=i,e.viewProps.bindDisabled(this.inputElement);const o=t.createElement("div");o.classList.add(un("w")),n.appendChild(o);const r=z(t,"check");o.appendChild(r),e.value.emitter.on("change",this.onValueChange_),this.value=e.value,this.update_()}update_(){this.inputElement.checked=this.value.rawValue}onValueChange_(){this.update_()}}class mn{constructor(t,e){this.onInputChange_=this.onInputChange_.bind(this),this.value=e.value,this.viewProps=e.viewProps,this.view=new vn(t,{value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_)}onInputChange_(t){const e=t.currentTarget;this.value.rawValue=e.checked}}const bn={id:"input-bool",type:"input",accept:(t,e)=>{if("boolean"!=typeof t)return null;const n=A(e,{options:D.optional.custom(rn)});return n?{initialValue:t,params:n}:null},binding:{reader:t=>ce,constraint:t=>function(t){const e=[],n=pn(t.options);return n&&e.push(n),new Xt(e)}(t.params),writer:t=>on},controller:t=>{const e=t.document,n=t.value,i=t.constraint,o=i&&Qt(i,Jt);return o?new oe(e,{props:new M({options:o.values.value("options")}),value:n,viewProps:t.viewProps}):new mn(e,{value:n,viewProps:t.viewProps})}},gn=b("col");class _n{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(gn()),e.foldable.bindExpandedClass(this.element,gn(void 0,"expanded")),f(e.foldable,"completed",w(this.element,gn(void 0,"cpl")));const n=t.createElement("div");n.classList.add(gn("h")),this.element.appendChild(n);const i=t.createElement("div");i.classList.add(gn("s")),n.appendChild(i),this.swatchElement=i;const o=t.createElement("div");if(o.classList.add(gn("t")),n.appendChild(o),this.textElement=o,"inline"===e.pickerLayout){const e=t.createElement("div");e.classList.add(gn("p")),this.element.appendChild(e),this.pickerElement=e}else this.pickerElement=null}}function fn(t,e,n){const i=Ge(t,360),o=$e(e/100,0,1),r=$e(n/100,0,1),s=r*o,a=s*(1-Math.abs(i/60%2-1)),l=r-s;let p,d,c;return[p,d,c]=i>=0&&i<60?[s,a,0]:i>=60&&i<120?[a,s,0]:i>=120&&i<180?[0,s,a]:i>=180&&i<240?[0,a,s]:i>=240&&i<300?[a,0,s]:[s,0,a],[255*(p+l),255*(d+l),255*(c+l)]}function wn(t){return[t[0],t[1],t[2]]}function xn(t,e){return[t[0],t[1],t[2],e]}const yn={hsl:{hsl:(t,e,n)=>[t,e,n],hsv:function(t,e,n){const i=n+e*(100-Math.abs(2*n-100))/200;return[t,0!==i?e*(100-Math.abs(2*n-100))/i:0,n+e*(100-Math.abs(2*n-100))/200]},rgb:function(t,e,n){const i=(t%360+360)%360,o=$e(e/100,0,1),r=$e(n/100,0,1),s=(1-Math.abs(2*r-1))*o,a=s*(1-Math.abs(i/60%2-1)),l=r-s/2;let p,d,c;return[p,d,c]=i>=0&&i<60?[s,a,0]:i>=60&&i<120?[a,s,0]:i>=120&&i<180?[0,s,a]:i>=180&&i<240?[0,a,s]:i>=240&&i<300?[a,0,s]:[s,0,a],[255*(p+l),255*(d+l),255*(c+l)]}},hsv:{hsl:function(t,e,n){const i=100-Math.abs(n*(200-e)/100-100);return[t,0!==i?e*n/i:0,n*(200-e)/200]},hsv:(t,e,n)=>[t,e,n],rgb:fn},rgb:{hsl:function(t,e,n){const i=$e(t/255,0,1),o=$e(e/255,0,1),r=$e(n/255,0,1),s=Math.max(i,o,r),a=Math.min(i,o,r),l=s-a;let p=0,d=0;const c=(a+s)/2;return 0!==l&&(d=l/(1-Math.abs(s+a-1)),p=(p=i===s?(o-r)/l:o===s?2+(r-i)/l:4+(i-o)/l)/6+(p<0?1:0)),[360*p,100*d,100*c]},hsv:function(t,e,n){const i=$e(t/255,0,1),o=$e(e/255,0,1),r=$e(n/255,0,1),s=Math.max(i,o,r),a=s-Math.min(i,o,r);let l;return[l=0===a?0:s===i?((o-r)/a%6+6)%6*60:s===o?60*((r-i)/a+2):60*((i-o)/a+4),100*(0===s?0:a/s),100*s]},rgb:(t,e,n)=>[t,e,n]}};function Cn(t,e){return["float"===e?1:"rgb"===t?255:360,"float"===e?1:"rgb"===t?255:100,"float"===e?1:"rgb"===t?255:100]}function Pn(t,e,n,i){const o=Cn(e,n),r=Cn(e,i);return t.map((t,e)=>t/o[e]*r[e])}function kn(t,e){return"object"==typeof t&&!a(t)&&e in t&&"number"==typeof t[e]}class En{static black(t="int"){return new En([0,0,0],"rgb",t)}static fromObject(t,e="int"){const n="a"in t?[t.r,t.g,t.b,t.a]:[t.r,t.g,t.b];return new En(n,"rgb",e)}static toRgbaObject(t,e="int"){return t.toRgbaObject(e)}static isRgbColorObject(t){return kn(t,"r")&&kn(t,"g")&&kn(t,"b")}static isRgbaColorObject(t){return this.isRgbColorObject(t)&&kn(t,"a")}static isColorObject(t){return this.isRgbColorObject(t)}static equals(t,e){if(t.mode!==e.mode)return!1;const n=t.comps_,i=e.comps_;for(let o=0;o<n.length;o++)if(n[o]!==i[o])return!1;return!0}constructor(t,e,n="int"){this.mode=e,this.type=n,this.comps_=function(t,e,n){var i;const o=Cn(e,n);return["rgb"===e?$e(t[0],0,o[0]):(r=t[0],s=o[0],r===s?s:Ge(r,s)),$e(t[1],0,o[1]),$e(t[2],0,o[2]),$e(null!==(i=t[3])&&void 0!==i?i:1,0,1)];var r,s}(t,e,n)}getComponents(t,e="int"){return xn(function(t,e,n){const i=Pn(t,e.mode,e.type,"int");return Pn(yn[e.mode][n.mode](...i),n.mode,"int",n.type)}(wn(this.comps_),{mode:this.mode,type:this.type},{mode:null!=t?t:this.mode,type:e}),this.comps_[3])}toRgbaObject(t="int"){const e=this.getComponents("rgb",t);return{r:e[0],g:e[1],b:e[2],a:e[3]}}}const Vn=b("colp");class Mn{constructor(t,e){this.alphaViews_=null,this.element=t.createElement("div"),this.element.classList.add(Vn()),e.viewProps.bindClassModifiers(this.element);const n=t.createElement("div");n.classList.add(Vn("hsv"));const i=t.createElement("div");i.classList.add(Vn("sv")),this.svPaletteView_=e.svPaletteView,i.appendChild(this.svPaletteView_.element),n.appendChild(i);const o=t.createElement("div");o.classList.add(Vn("h")),this.hPaletteView_=e.hPaletteView,o.appendChild(this.hPaletteView_.element),n.appendChild(o),this.element.appendChild(n);const r=t.createElement("div");if(r.classList.add(Vn("rgb")),this.textView_=e.textView,r.appendChild(this.textView_.element),this.element.appendChild(r),e.alphaViews){this.alphaViews_={palette:e.alphaViews.palette,text:e.alphaViews.text};const n=t.createElement("div");n.classList.add(Vn("a"));const i=t.createElement("div");i.classList.add(Vn("ap")),i.appendChild(this.alphaViews_.palette.element),n.appendChild(i);const o=t.createElement("div");o.classList.add(Vn("at")),o.appendChild(this.alphaViews_.text.element),n.appendChild(o),this.element.appendChild(n)}}get allFocusableElements(){const t=[this.svPaletteView_.element,this.hPaletteView_.element,this.textView_.modeSelectElement,...this.textView_.textViews.map(t=>t.inputElement)];return this.alphaViews_&&t.push(this.alphaViews_.palette.element,this.alphaViews_.text.inputElement),t}}function Sn(t){return"int"===t?"int":"float"===t?"float":void 0}function Ln(t){const e=D;return A(t,{alpha:e.optional.boolean,color:e.optional.object({alpha:e.optional.boolean,type:e.optional.custom(Sn)}),expanded:e.optional.boolean,picker:e.optional.custom(sn)})}function Dn(t){return t?.1:1}function An(t){var e;return null===(e=t.color)||void 0===e?void 0:e.type}function jn(t,e){const n=t.match(/^(.+)%$/);return n?Math.min(.01*parseFloat(n[1])*e,e):Math.min(parseFloat(t),e)}const In={deg:t=>t,grad:t=>360*t/400,rad:t=>360*t/(2*Math.PI),turn:t=>360*t};function Rn(t){const e=t.match(/^([0-9.]+?)(deg|grad|rad|turn)$/);if(!e)return parseFloat(t);const n=parseFloat(e[1]),i=e[2];return In[i](n)}function Tn(t){const e=t.match(/^rgb\(\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;const n=[jn(e[1],255),jn(e[2],255),jn(e[3],255)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])?null:n}function On(t){return e=>{const n=Tn(e);return n?new En(n,"rgb",t):null}}function Nn(t){const e=t.match(/^rgba\(\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;const n=[jn(e[1],255),jn(e[2],255),jn(e[3],255),jn(e[4],1)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])||isNaN(n[3])?null:n}function Un(t){return e=>{const n=Nn(e);return n?new En(n,"rgb",t):null}}function Kn(t){const e=t.match(/^hsl\(\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;const n=[Rn(e[1]),jn(e[2],100),jn(e[3],100)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])?null:n}function Fn(t){return e=>{const n=Kn(e);return n?new En(n,"hsl",t):null}}function Bn(t){const e=t.match(/^hsla\(\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;const n=[Rn(e[1]),jn(e[2],100),jn(e[3],100),jn(e[4],1)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])||isNaN(n[3])?null:n}function Hn(t){return e=>{const n=Bn(e);return n?new En(n,"hsl",t):null}}function qn(t){const e=t.match(/^#([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);if(e)return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)];const n=t.match(/^(?:#|0x)([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);return n?[parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16)]:null}function zn(t){const e=t.match(/^#?([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);if(e)return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16),qe(parseInt(e[4]+e[4],16),0,255,0,1)];const n=t.match(/^(?:#|0x)?([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);return n?[parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16),qe(parseInt(n[4],16),0,255,0,1)]:null}function $n(t){const e=t.match(/^\{\s*r\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*g\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*b\s*:\s*([0-9A-Fa-f.]+%?)\s*\}$/);if(!e)return null;const n=[parseFloat(e[1]),parseFloat(e[2]),parseFloat(e[3])];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])?null:n}function Gn(t){return e=>{const n=$n(e);return n?new En(n,"rgb",t):null}}function Yn(t){const e=t.match(/^\{\s*r\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*g\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*b\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*a\s*:\s*([0-9A-Fa-f.]+%?)\s*\}$/);if(!e)return null;const n=[parseFloat(e[1]),parseFloat(e[2]),parseFloat(e[3]),parseFloat(e[4])];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])||isNaN(n[3])?null:n}function Wn(t){return e=>{const n=Yn(e);return n?new En(n,"rgb",t):null}}const Xn=[{parser:qn,result:{alpha:!1,mode:"rgb",notation:"hex"}},{parser:zn,result:{alpha:!0,mode:"rgb",notation:"hex"}},{parser:Tn,result:{alpha:!1,mode:"rgb",notation:"func"}},{parser:Nn,result:{alpha:!0,mode:"rgb",notation:"func"}},{parser:Kn,result:{alpha:!1,mode:"hsl",notation:"func"}},{parser:Bn,result:{alpha:!0,mode:"hsl",notation:"func"}},{parser:$n,result:{alpha:!1,mode:"rgb",notation:"object"}},{parser:Yn,result:{alpha:!0,mode:"rgb",notation:"object"}}];function Qn(t,e="int"){const n=function(t){return Xn.reduce((e,{parser:n,result:i})=>e||(n(t)?i:null),null)}(t);return n?"hex"===n.notation&&"float"!==e?Object.assign(Object.assign({},n),{type:"int"}):"func"===n.notation?Object.assign(Object.assign({},n),{type:e}):null:null}const Zn={int:[function(t){const e=qn(t);return e?new En(e,"rgb","int"):null},function(t){const e=zn(t);return e?new En(e,"rgb","int"):null},On("int"),Un("int"),Fn("int"),Hn("int"),Gn("int"),Wn("int")],float:[On("float"),Un("float"),Fn("float"),Hn("float"),Gn("float"),Wn("float")]};function Jn(t){const e=Zn[t];return t=>e.reduce((e,n)=>e||n(t),null)}function ti(t){const e=$e(Math.floor(t),0,255).toString(16);return 1===e.length?"0"+e:e}function ei(t,e="#"){return`${e}${wn(t.getComponents("rgb")).map(ti).join("")}`}function ni(t,e="#"){const n=t.getComponents("rgb");return`${e}${[n[0],n[1],n[2],255*n[3]].map(ti).join("")}`}function ii(t,e){const n=Ae("float"===e?2:0);return`rgb(${wn(t.getComponents("rgb",e)).map(t=>n(t)).join(", ")})`}function oi(t){return e=>ii(e,t)}function ri(t,e){const n=Ae(2),i=Ae("float"===e?2:0);return`rgba(${t.getComponents("rgb",e).map((t,e)=>(3===e?n:i)(t)).join(", ")})`}function si(t){return e=>ri(e,t)}function ai(t,e){const n=Ae("float"===e?2:0),i=["r","g","b"];return`{${wn(t.getComponents("rgb",e)).map((t,e)=>`${i[e]}: ${n(t)}`).join(", ")}}`}function li(t){return e=>ai(e,t)}function pi(t,e){const n=Ae(2),i=Ae("float"===e?2:0),o=["r","g","b","a"];return`{${t.getComponents("rgb",e).map((t,e)=>`${o[e]}: ${(3===e?n:i)(t)}`).join(", ")}}`}function di(t){return e=>pi(e,t)}const ci=[{format:{alpha:!1,mode:"rgb",notation:"hex",type:"int"},stringifier:ei},{format:{alpha:!0,mode:"rgb",notation:"hex",type:"int"},stringifier:ni},{format:{alpha:!1,mode:"hsl",notation:"func",type:"int"},stringifier:function(t){const e=[Ae(0),Ie,Ie];return`hsl(${wn(t.getComponents("hsl")).map((t,n)=>e[n](t)).join(", ")})`}},{format:{alpha:!0,mode:"hsl",notation:"func",type:"int"},stringifier:function(t){const e=[Ae(0),Ie,Ie,Ae(2)];return`hsla(${t.getComponents("hsl").map((t,n)=>e[n](t)).join(", ")})`}},...["int","float"].reduce((t,e)=>[...t,{format:{alpha:!1,mode:"rgb",notation:"func",type:e},stringifier:oi(e)},{format:{alpha:!0,mode:"rgb",notation:"func",type:e},stringifier:si(e)},{format:{alpha:!1,mode:"rgb",notation:"object",type:e},stringifier:li(e)},{format:{alpha:!0,mode:"rgb",notation:"object",type:e},stringifier:di(e)}],[])];function hi(t){return ci.reduce((e,n)=>{return e||(i=n.format,o=t,i.alpha===o.alpha&&i.mode===o.mode&&i.notation===o.notation&&i.type===o.type?n.stringifier:null);var i,o},null)}const ui=b("apl");class vi{constructor(t,e){this.onValueChange_=this.onValueChange_.bind(this),this.value=e.value,this.value.emitter.on("change",this.onValueChange_),this.element=t.createElement("div"),this.element.classList.add(ui()),e.viewProps.bindClassModifiers(this.element),e.viewProps.bindTabIndex(this.element);const n=t.createElement("div");n.classList.add(ui("b")),this.element.appendChild(n);const i=t.createElement("div");i.classList.add(ui("c")),n.appendChild(i),this.colorElem_=i;const o=t.createElement("div");o.classList.add(ui("m")),this.element.appendChild(o),this.markerElem_=o;const r=t.createElement("div");r.classList.add(ui("p")),this.markerElem_.appendChild(r),this.previewElem_=r,this.update_()}update_(){const t=this.value.rawValue,e=t.getComponents("rgb"),n=new En([e[0],e[1],e[2],0],"rgb"),i=new En([e[0],e[1],e[2],255],"rgb"),o=["to right",ri(n),ri(i)];this.colorElem_.style.background=`linear-gradient(${o.join(",")})`,this.previewElem_.style.backgroundColor=ri(t);const r=qe(e[3],0,1,0,100);this.markerElem_.style.left=r+"%"}onValueChange_(){this.update_()}}class mi{constructor(t,e){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=e.value,this.viewProps=e.viewProps,this.view=new vi(t,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new He(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(t,e){if(!t.point)return;const n=t.point.x/t.bounds.width,i=this.value.rawValue,[o,r,s]=i.getComponents("hsv");this.value.setRawValue(new En([o,r,s,n],"hsv"),e)}onPointerDown_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerMove_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerUp_(t){this.handlePointerEvent_(t.data,{forceEmit:!0,last:!0})}onKeyDown_(t){const e=Ne(Dn(!0),Ke(t));if(0===e)return;const n=this.value.rawValue,[i,o,r,s]=n.getComponents("hsv");this.value.setRawValue(new En([i,o,r,s+e],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(t){0!==Ne(Dn(!0),Ke(t))&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}const bi=b("coltxt");class gi{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(bi()),e.viewProps.bindClassModifiers(this.element);const n=t.createElement("div");n.classList.add(bi("m")),this.modeElem_=function(t){const e=t.createElement("select");return e.appendChild([{text:"RGB",value:"rgb"},{text:"HSL",value:"hsl"},{text:"HSV",value:"hsv"}].reduce((e,n)=>{const i=t.createElement("option");return i.textContent=n.text,i.value=n.value,e.appendChild(i),e},t.createDocumentFragment())),e}(t),this.modeElem_.classList.add(bi("ms")),n.appendChild(this.modeSelectElement),e.viewProps.bindDisabled(this.modeElem_);const i=t.createElement("div");i.classList.add(bi("mm")),i.appendChild(z(t,"dropdown")),n.appendChild(i),this.element.appendChild(n);const o=t.createElement("div");o.classList.add(bi("w")),this.element.appendChild(o),this.textsElem_=o,this.textViews_=e.textViews,this.applyTextViews_(),_(e.colorMode,t=>{this.modeElem_.value=t})}get modeSelectElement(){return this.modeElem_}get textViews(){return this.textViews_}set textViews(t){this.textViews_=t,this.applyTextViews_()}applyTextViews_(){Y(this.textsElem_);const t=this.element.ownerDocument;this.textViews_.forEach(e=>{const n=t.createElement("div");n.classList.add(bi("c")),n.appendChild(e.element),this.textsElem_.appendChild(n)})}}function _i(t,e,n){const i=Cn(t,e)[n];return new Zt({min:0,max:i})}function fi(t,e,n){return new Xe(t,{arrayPosition:0===n?"fst":2===n?"lst":"mid",baseStep:Dn(!1),parser:e.parser,props:M.fromObject({draggingScale:"float"===e.colorType?.01:1,formatter:(i=e.colorType,Ae("float"===i?2:0))}),value:V(0,{constraint:_i(e.colorMode,e.colorType,n)}),viewProps:e.viewProps});var i}class wi{constructor(t,e){this.onModeSelectChange_=this.onModeSelectChange_.bind(this),this.colorType_=e.colorType,this.parser_=e.parser,this.value=e.value,this.viewProps=e.viewProps,this.colorMode=V(this.value.rawValue.mode),this.ccs_=this.createComponentControllers_(t),this.view=new gi(t,{colorMode:this.colorMode,textViews:[this.ccs_[0].view,this.ccs_[1].view,this.ccs_[2].view],viewProps:this.viewProps}),this.view.modeSelectElement.addEventListener("change",this.onModeSelectChange_)}createComponentControllers_(t){const e={colorMode:this.colorMode.rawValue,colorType:this.colorType_,parser:this.parser_,viewProps:this.viewProps},n=[fi(t,e,0),fi(t,e,1),fi(t,e,2)];return n.forEach((t,e)=>{Oe({primary:this.value,secondary:t.value,forward:t=>t.rawValue.getComponents(this.colorMode.rawValue,this.colorType_)[e],backward:(t,n)=>{const i=this.colorMode.rawValue,o=t.rawValue.getComponents(i,this.colorType_);return o[e]=n.rawValue,new En(xn(wn(o),o[3]),i,this.colorType_)}})}),n}onModeSelectChange_(t){const e=t.currentTarget;this.colorMode.rawValue=e.value,this.ccs_=this.createComponentControllers_(this.view.element.ownerDocument),this.view.textViews=[this.ccs_[0].view,this.ccs_[1].view,this.ccs_[2].view]}}const xi=b("hpl");class yi{constructor(t,e){this.onValueChange_=this.onValueChange_.bind(this),this.value=e.value,this.value.emitter.on("change",this.onValueChange_),this.element=t.createElement("div"),this.element.classList.add(xi()),e.viewProps.bindClassModifiers(this.element),e.viewProps.bindTabIndex(this.element);const n=t.createElement("div");n.classList.add(xi("c")),this.element.appendChild(n);const i=t.createElement("div");i.classList.add(xi("m")),this.element.appendChild(i),this.markerElem_=i,this.update_()}update_(){const t=this.value.rawValue,[e]=t.getComponents("hsv");this.markerElem_.style.backgroundColor=ii(new En([e,100,100],"hsv"));const n=qe(e,0,360,0,100);this.markerElem_.style.left=n+"%"}onValueChange_(){this.update_()}}class Ci{constructor(t,e){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=e.value,this.viewProps=e.viewProps,this.view=new yi(t,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new He(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(t,e){if(!t.point)return;const n=qe($e(t.point.x,0,t.bounds.width),0,t.bounds.width,0,360),i=this.value.rawValue,[,o,r,s]=i.getComponents("hsv");this.value.setRawValue(new En([n,o,r,s],"hsv"),e)}onPointerDown_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerMove_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerUp_(t){this.handlePointerEvent_(t.data,{forceEmit:!0,last:!0})}onKeyDown_(t){const e=Ne(Dn(!1),Ke(t));if(0===e)return;const n=this.value.rawValue,[i,o,r,s]=n.getComponents("hsv");this.value.setRawValue(new En([i+e,o,r,s],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(t){0!==Ne(Dn(!1),Ke(t))&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}const Pi=b("svp");class ki{constructor(t,e){this.onValueChange_=this.onValueChange_.bind(this),this.value=e.value,this.value.emitter.on("change",this.onValueChange_),this.element=t.createElement("div"),this.element.classList.add(Pi()),e.viewProps.bindClassModifiers(this.element),e.viewProps.bindTabIndex(this.element);const n=t.createElement("canvas");n.height=64,n.width=64,n.classList.add(Pi("c")),this.element.appendChild(n),this.canvasElement=n;const i=t.createElement("div");i.classList.add(Pi("m")),this.element.appendChild(i),this.markerElem_=i,this.update_()}update_(){const t=function(t){const e=t.ownerDocument.defaultView;return e&&"document"in e?t.getContext("2d",{willReadFrequently:!0}):null}(this.canvasElement);if(!t)return;const e=this.value.rawValue.getComponents("hsv"),n=this.canvasElement.width,i=this.canvasElement.height,o=t.getImageData(0,0,n,i),r=o.data;for(let l=0;l<i;l++)for(let t=0;t<n;t++){const o=qe(t,0,n,0,100),s=qe(l,0,i,100,0),a=fn(e[0],o,s),p=4*(l*n+t);r[p]=a[0],r[p+1]=a[1],r[p+2]=a[2],r[p+3]=255}t.putImageData(o,0,0);const s=qe(e[1],0,100,0,100);this.markerElem_.style.left=s+"%";const a=qe(e[2],0,100,100,0);this.markerElem_.style.top=a+"%"}onValueChange_(){this.update_()}}class Ei{constructor(t,e){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=e.value,this.viewProps=e.viewProps,this.view=new ki(t,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new He(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(t,e){if(!t.point)return;const n=qe(t.point.x,0,t.bounds.width,0,100),i=qe(t.point.y,0,t.bounds.height,100,0),[o,,,r]=this.value.rawValue.getComponents("hsv");this.value.setRawValue(new En([o,n,i,r],"hsv"),e)}onPointerDown_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerMove_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerUp_(t){this.handlePointerEvent_(t.data,{forceEmit:!0,last:!0})}onKeyDown_(t){Fe(t.key)&&t.preventDefault();const[e,n,i,o]=this.value.rawValue.getComponents("hsv"),r=Dn(!1),s=Ne(r,Ke(t)),a=Ne(r,Ue(t));0===s&&0===a||this.value.setRawValue(new En([e,n+s,i+a,o],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(t){const e=Dn(!1),n=Ne(e,Ke(t)),i=Ne(e,Ue(t));0===n&&0===i||this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}class Vi{constructor(t,e){this.value=e.value,this.viewProps=e.viewProps,this.hPaletteC_=new Ci(t,{value:this.value,viewProps:this.viewProps}),this.svPaletteC_=new Ei(t,{value:this.value,viewProps:this.viewProps}),this.alphaIcs_=e.supportsAlpha?{palette:new mi(t,{value:this.value,viewProps:this.viewProps}),text:new Xe(t,{parser:Se,baseStep:.1,props:M.fromObject({draggingScale:.01,formatter:Ae(2)}),value:V(0,{constraint:new Zt({min:0,max:1})}),viewProps:this.viewProps})}:null,this.alphaIcs_&&Oe({primary:this.value,secondary:this.alphaIcs_.text.value,forward:t=>t.rawValue.getComponents()[3],backward:(t,e)=>{const n=t.rawValue.getComponents();return n[3]=e.rawValue,new En(n,t.rawValue.mode)}}),this.textC_=new wi(t,{colorType:e.colorType,parser:Se,value:this.value,viewProps:this.viewProps}),this.view=new Mn(t,{alphaViews:this.alphaIcs_?{palette:this.alphaIcs_.palette.view,text:this.alphaIcs_.text.view}:null,hPaletteView:this.hPaletteC_.view,supportsAlpha:e.supportsAlpha,svPaletteView:this.svPaletteC_.view,textView:this.textC_.view,viewProps:this.viewProps})}get textController(){return this.textC_}}const Mi=b("colsw");class Si{constructor(t,e){this.onValueChange_=this.onValueChange_.bind(this),e.value.emitter.on("change",this.onValueChange_),this.value=e.value,this.element=t.createElement("div"),this.element.classList.add(Mi()),e.viewProps.bindClassModifiers(this.element);const n=t.createElement("div");n.classList.add(Mi("sw")),this.element.appendChild(n),this.swatchElem_=n;const i=t.createElement("button");i.classList.add(Mi("b")),e.viewProps.bindDisabled(i),this.element.appendChild(i),this.buttonElement=i,this.update_()}update_(){const t=this.value.rawValue;this.swatchElem_.style.backgroundColor=ni(t)}onValueChange_(){this.update_()}}class Li{constructor(t,e){this.value=e.value,this.viewProps=e.viewProps,this.view=new Si(t,{value:this.value,viewProps:this.viewProps})}}class Di{constructor(t,e){this.onButtonBlur_=this.onButtonBlur_.bind(this),this.onButtonClick_=this.onButtonClick_.bind(this),this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.value=e.value,this.viewProps=e.viewProps,this.foldable_=nt.create(e.expanded),this.swatchC_=new Li(t,{value:this.value,viewProps:this.viewProps});const n=this.swatchC_.view.buttonElement;n.addEventListener("blur",this.onButtonBlur_),n.addEventListener("click",this.onButtonClick_),this.textC_=new de(t,{parser:e.parser,props:M.fromObject({formatter:e.formatter}),value:this.value,viewProps:this.viewProps}),this.view=new _n(t,{foldable:this.foldable_,pickerLayout:e.pickerLayout}),this.view.swatchElement.appendChild(this.swatchC_.view.element),this.view.textElement.appendChild(this.textC_.view.element),this.popC_="popup"===e.pickerLayout?new ae(t,{viewProps:this.viewProps}):null;const i=new Vi(t,{colorType:e.colorType,supportsAlpha:e.supportsAlpha,value:this.value,viewProps:this.viewProps});i.view.allFocusableElements.forEach(t=>{t.addEventListener("blur",this.onPopupChildBlur_),t.addEventListener("keydown",this.onPopupChildKeydown_)}),this.pickerC_=i,this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(i.view.element),Oe({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:t=>t.rawValue,backward:(t,e)=>e.rawValue})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),ot(this.foldable_,this.view.pickerElement))}get textController(){return this.textC_}onButtonBlur_(t){if(!this.popC_)return;const e=this.view.element,n=t.relatedTarget;n&&e.contains(n)||(this.popC_.shows.rawValue=!1)}onButtonClick_(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.view.allFocusableElements[0].focus()}onPopupChildBlur_(t){if(!this.popC_)return;const e=this.popC_.view.element,n=W(t);n&&e.contains(n)||n&&n===this.swatchC_.view.buttonElement&&!H(e.ownerDocument)||(this.popC_.shows.rawValue=!1)}onPopupChildKeydown_(t){this.popC_?"Escape"===t.key&&(this.popC_.shows.rawValue=!1):this.view.pickerElement&&"Escape"===t.key&&this.swatchC_.view.buttonElement.focus()}}function Ai(t){return wn(t.getComponents("rgb")).reduce((t,e)=>t<<8|255&Math.floor(e),0)}function ji(t){return t.getComponents("rgb").reduce((t,e,n)=>t<<8|255&Math.floor(3===n?255*e:e),0)>>>0}function Ii(t){return"number"!=typeof t?En.black():new En([(e=t)>>16&255,e>>8&255,255&e],"rgb");var e}function Ri(t){return"number"!=typeof t?En.black():new En([(e=t)>>24&255,e>>16&255,e>>8&255,qe(255&e,0,255,0,1)],"rgb");var e}function Ti(t){var e;return!(!(null==t?void 0:t.alpha)&&!(null===(e=null==t?void 0:t.color)||void 0===e?void 0:e.alpha))}function Oi(t){return t?t=>ni(t,"0x"):t=>ei(t,"0x")}const Ni={id:"input-color-number",type:"input",accept:(t,e)=>{if("number"!=typeof t)return null;if(!function(t){return"color"in t||"view"in t&&"color"===t.view}(e))return null;const n=Ln(e);return n?{initialValue:t,params:n}:null},binding:{reader:t=>Ti(t.params)?Ri:Ii,equals:En.equals,writer:t=>function(t){const e=t?ji:Ai;return(t,n)=>{on(t,e(n))}}(Ti(t.params))},controller:t=>{const e=Ti(t.params),n="expanded"in t.params?t.params.expanded:void 0,i="picker"in t.params?t.params.picker:void 0;return new Di(t.document,{colorType:"int",expanded:null!=n&&n,formatter:Oi(e),parser:Jn("int"),pickerLayout:null!=i?i:"popup",supportsAlpha:e,value:t.value,viewProps:t.viewProps})}};function Ui(t,e){return n=>t?pi(n,e):ai(n,e)}const Ki={id:"input-color-object",type:"input",accept:(t,e)=>{if(!En.isColorObject(t))return null;const n=Ln(e);return n?{initialValue:t,params:n}:null},binding:{reader:t=>{return e=An(t.params),t=>function(t,e){return En.isColorObject(t)?En.fromObject(t,e):En.black(e)}(t,e);var e},equals:En.equals,writer:t=>{return i=t.initialValue,e=En.isRgbaColorObject(i),n=An(t.params),(t,i)=>{e?function(t,e,n){const i=e.toRgbaObject(n);t.writeProperty("r",i.r),t.writeProperty("g",i.g),t.writeProperty("b",i.b),t.writeProperty("a",i.a)}(t,i,n):function(t,e,n){const i=e.toRgbaObject(n);t.writeProperty("r",i.r),t.writeProperty("g",i.g),t.writeProperty("b",i.b)}(t,i,n)};var e,n,i}},controller:t=>{var e;const n=En.isRgbaColorObject(t.initialValue),i="expanded"in t.params?t.params.expanded:void 0,o="picker"in t.params?t.params.picker:void 0,r=null!==(e=An(t.params))&&void 0!==e?e:"int";return new Di(t.document,{colorType:r,expanded:null!=i&&i,formatter:Ui(n,r),parser:Jn(r),pickerLayout:null!=o?o:"popup",supportsAlpha:n,value:t.value,viewProps:t.viewProps})}},Fi={id:"input-color-string",type:"input",accept:(t,e)=>{if("string"!=typeof t)return null;if("view"in e&&"text"===e.view)return null;const n=Qn(t,An(e));if(!n)return null;if(!hi(n))return null;const i=Ln(e);return i?{initialValue:t,params:i}:null},binding:{reader:t=>{var e;return function(t){const e=Zn[t];return n=>{if("string"!=typeof n)return En.black(t);const i=e.reduce((t,e)=>t||e(n),null);return null!=i?i:En.black(t)}}(null!==(e=An(t.params))&&void 0!==e?e:"int")},equals:En.equals,writer:t=>{const e=Qn(t.initialValue,An(t.params));if(!e)throw c.shouldNeverHappen();const n=function(t){const e=hi(t);return e?(t,n)=>{on(t,e(n))}:null}(e);if(!n)throw c.notBindable();return n}},controller:t=>{const e=Qn(t.initialValue,An(t.params));if(!e)throw c.shouldNeverHappen();const n=hi(e);if(!n)throw c.shouldNeverHappen();const i="expanded"in t.params?t.params.expanded:void 0,o="picker"in t.params?t.params.picker:void 0;return new Di(t.document,{colorType:e.type,expanded:null!=i&&i,formatter:n,parser:Jn(e.type),pickerLayout:null!=o?o:"popup",supportsAlpha:e.alpha,value:t.value,viewProps:t.viewProps})}};class Bi{constructor(t){this.components=t.components,this.asm_=t.assembly}constrain(t){const e=this.asm_.toComponents(t).map((t,e)=>{var n,i;return null!==(i=null===(n=this.components[e])||void 0===n?void 0:n.constrain(t))&&void 0!==i?i:t});return this.asm_.fromComponents(e)}}const Hi=b("pndtxt");class qi{constructor(t,e){this.textViews=e.textViews,this.element=t.createElement("div"),this.element.classList.add(Hi()),this.textViews.forEach(e=>{const n=t.createElement("div");n.classList.add(Hi("a")),n.appendChild(e.element),this.element.appendChild(n)})}}class zi{constructor(t,e){this.value=e.value,this.viewProps=e.viewProps,this.acs_=e.axes.map((n,i)=>function(t,e,n){return new Xe(t,{arrayPosition:0===n?"fst":n===e.axes.length-1?"lst":"mid",baseStep:e.axes[n].baseStep,parser:e.parser,props:e.axes[n].textProps,value:V(0,{constraint:e.axes[n].constraint}),viewProps:e.viewProps})}(t,e,i)),this.acs_.forEach((t,n)=>{Oe({primary:this.value,secondary:t.value,forward:t=>e.assembly.toComponents(t.rawValue)[n],backward:(t,i)=>{const o=e.assembly.toComponents(t.rawValue);return o[n]=i.rawValue,e.assembly.fromComponents(o)}})}),this.view=new qi(t,{textViews:this.acs_.map(t=>t.view)})}}function $i(t,e){return"step"in t&&!a(t.step)?new ee(t.step,e):null}function Gi(t){return a(t.max)||a(t.min)?a(t.max)&&a(t.min)?null:new te({max:t.max,min:t.min}):new Zt({max:t.max,min:t.min})}const Yi={id:"input-number",type:"input",accept:(t,e)=>{if("number"!=typeof t)return null;const n=D,i=A(e,{format:n.optional.function,max:n.optional.number,min:n.optional.number,options:n.optional.custom(rn),step:n.optional.number});return i?{initialValue:t,params:i}:null},binding:{reader:t=>Le,constraint:t=>function(t,e){const n=[],i=$i(t,e);i&&n.push(i);const o=Gi(t);o&&n.push(o);const r=pn(t.options);return r&&n.push(r),new Xt(n)}(t.params,t.initialValue),writer:t=>on},controller:t=>{var e;const n=t.value,i=t.constraint,o=i&&Qt(i,Jt);if(o)return new oe(t.document,{props:new M({options:o.values.value("options")}),value:n,viewProps:t.viewProps});const r=null!==(e="format"in t.params?t.params.format:void 0)&&void 0!==e?e:Ae(dn(i,n.rawValue)),s=i&&Qt(i,Zt);return s?new nn(t.document,{baseStep:cn(i),parser:Se,sliderProps:new M({maxValue:s.values.value("max"),minValue:s.values.value("min")}),textProps:M.fromObject({draggingScale:hn(i,n.rawValue),formatter:r}),value:n,viewProps:t.viewProps}):new Xe(t.document,{baseStep:cn(i),parser:Se,props:M.fromObject({draggingScale:hn(i,n.rawValue),formatter:r}),value:n,viewProps:t.viewProps})}};class Wi{constructor(t=0,e=0){this.x=t,this.y=e}getComponents(){return[this.x,this.y]}static isObject(t){if(a(t))return!1;const e=t.x,n=t.y;return"number"==typeof e&&"number"==typeof n}static equals(t,e){return t.x===e.x&&t.y===e.y}toObject(){return{x:this.x,y:this.y}}}const Xi={toComponents:t=>t.getComponents(),fromComponents:t=>new Wi(...t)},Qi=b("p2d");class Zi{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(Qi()),e.viewProps.bindClassModifiers(this.element),_(e.expanded,w(this.element,Qi(void 0,"expanded")));const n=t.createElement("div");n.classList.add(Qi("h")),this.element.appendChild(n);const i=t.createElement("button");i.classList.add(Qi("b")),i.appendChild(z(t,"p2dpad")),e.viewProps.bindDisabled(i),n.appendChild(i),this.buttonElement=i;const o=t.createElement("div");if(o.classList.add(Qi("t")),n.appendChild(o),this.textElement=o,"inline"===e.pickerLayout){const e=t.createElement("div");e.classList.add(Qi("p")),this.element.appendChild(e),this.pickerElement=e}else this.pickerElement=null}}const Ji=b("p2dp");class to{constructor(t,e){this.onFoldableChange_=this.onFoldableChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.invertsY_=e.invertsY,this.maxValue_=e.maxValue,this.element=t.createElement("div"),this.element.classList.add(Ji()),"popup"===e.layout&&this.element.classList.add(Ji(void 0,"p")),e.viewProps.bindClassModifiers(this.element);const n=t.createElement("div");n.classList.add(Ji("p")),e.viewProps.bindTabIndex(n),this.element.appendChild(n),this.padElement=n;const i=t.createElementNS(F,"svg");i.classList.add(Ji("g")),this.padElement.appendChild(i),this.svgElem_=i;const o=t.createElementNS(F,"line");o.classList.add(Ji("ax")),o.setAttributeNS(null,"x1","0"),o.setAttributeNS(null,"y1","50%"),o.setAttributeNS(null,"x2","100%"),o.setAttributeNS(null,"y2","50%"),this.svgElem_.appendChild(o);const r=t.createElementNS(F,"line");r.classList.add(Ji("ax")),r.setAttributeNS(null,"x1","50%"),r.setAttributeNS(null,"y1","0"),r.setAttributeNS(null,"x2","50%"),r.setAttributeNS(null,"y2","100%"),this.svgElem_.appendChild(r);const s=t.createElementNS(F,"line");s.classList.add(Ji("l")),s.setAttributeNS(null,"x1","50%"),s.setAttributeNS(null,"y1","50%"),this.svgElem_.appendChild(s),this.lineElem_=s;const a=t.createElement("div");a.classList.add(Ji("m")),this.padElement.appendChild(a),this.markerElem_=a,e.value.emitter.on("change",this.onValueChange_),this.value=e.value,this.update_()}get allFocusableElements(){return[this.padElement]}update_(){const[t,e]=this.value.rawValue.getComponents(),n=this.maxValue_,i=qe(t,-n,+n,0,100),o=qe(e,-n,+n,0,100),r=this.invertsY_?100-o:o;this.lineElem_.setAttributeNS(null,"x2",i+"%"),this.lineElem_.setAttributeNS(null,"y2",r+"%"),this.markerElem_.style.left=i+"%",this.markerElem_.style.top=r+"%"}onValueChange_(){this.update_()}onFoldableChange_(){this.update_()}}function eo(t,e,n){return[Ne(e[0],Ke(t)),Ne(e[1],Ue(t))*(n?1:-1)]}class no{constructor(t,e){this.onPadKeyDown_=this.onPadKeyDown_.bind(this),this.onPadKeyUp_=this.onPadKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=e.value,this.viewProps=e.viewProps,this.baseSteps_=e.baseSteps,this.maxValue_=e.maxValue,this.invertsY_=e.invertsY,this.view=new to(t,{invertsY:this.invertsY_,layout:e.layout,maxValue:this.maxValue_,value:this.value,viewProps:this.viewProps}),this.ptHandler_=new He(this.view.padElement),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.padElement.addEventListener("keydown",this.onPadKeyDown_),this.view.padElement.addEventListener("keyup",this.onPadKeyUp_)}handlePointerEvent_(t,e){if(!t.point)return;const n=this.maxValue_,i=qe(t.point.x,0,t.bounds.width,-n,+n),o=qe(this.invertsY_?t.bounds.height-t.point.y:t.point.y,0,t.bounds.height,-n,+n);this.value.setRawValue(new Wi(i,o),e)}onPointerDown_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerMove_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerUp_(t){this.handlePointerEvent_(t.data,{forceEmit:!0,last:!0})}onPadKeyDown_(t){Fe(t.key)&&t.preventDefault();const[e,n]=eo(t,this.baseSteps_,this.invertsY_);0===e&&0===n||this.value.setRawValue(new Wi(this.value.rawValue.x+e,this.value.rawValue.y+n),{forceEmit:!1,last:!1})}onPadKeyUp_(t){const[e,n]=eo(t,this.baseSteps_,this.invertsY_);0===e&&0===n||this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}class io{constructor(t,e){var n,i;this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.onPadButtonBlur_=this.onPadButtonBlur_.bind(this),this.onPadButtonClick_=this.onPadButtonClick_.bind(this),this.value=e.value,this.viewProps=e.viewProps,this.foldable_=nt.create(e.expanded),this.popC_="popup"===e.pickerLayout?new ae(t,{viewProps:this.viewProps}):null;const o=new no(t,{baseSteps:[e.axes[0].baseStep,e.axes[1].baseStep],invertsY:e.invertsY,layout:e.pickerLayout,maxValue:e.maxValue,value:this.value,viewProps:this.viewProps});o.view.allFocusableElements.forEach(t=>{t.addEventListener("blur",this.onPopupChildBlur_),t.addEventListener("keydown",this.onPopupChildKeydown_)}),this.pickerC_=o,this.textC_=new zi(t,{assembly:Xi,axes:e.axes,parser:e.parser,value:this.value,viewProps:this.viewProps}),this.view=new Zi(t,{expanded:this.foldable_.value("expanded"),pickerLayout:e.pickerLayout,viewProps:this.viewProps}),this.view.textElement.appendChild(this.textC_.view.element),null===(n=this.view.buttonElement)||void 0===n||n.addEventListener("blur",this.onPadButtonBlur_),null===(i=this.view.buttonElement)||void 0===i||i.addEventListener("click",this.onPadButtonClick_),this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(this.pickerC_.view.element),Oe({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:t=>t.rawValue,backward:(t,e)=>e.rawValue})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),ot(this.foldable_,this.view.pickerElement))}onPadButtonBlur_(t){if(!this.popC_)return;const e=this.view.element,n=t.relatedTarget;n&&e.contains(n)||(this.popC_.shows.rawValue=!1)}onPadButtonClick_(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.view.allFocusableElements[0].focus()}onPopupChildBlur_(t){if(!this.popC_)return;const e=this.popC_.view.element,n=W(t);n&&e.contains(n)||n&&n===this.view.buttonElement&&!H(e.ownerDocument)||(this.popC_.shows.rawValue=!1)}onPopupChildKeydown_(t){this.popC_?"Escape"===t.key&&(this.popC_.shows.rawValue=!1):this.view.pickerElement&&"Escape"===t.key&&this.view.buttonElement.focus()}}class oo{constructor(t=0,e=0,n=0){this.x=t,this.y=e,this.z=n}getComponents(){return[this.x,this.y,this.z]}static isObject(t){if(a(t))return!1;const e=t.x,n=t.y,i=t.z;return"number"==typeof e&&"number"==typeof n&&"number"==typeof i}static equals(t,e){return t.x===e.x&&t.y===e.y&&t.z===e.z}toObject(){return{x:this.x,y:this.y,z:this.z}}}const ro={toComponents:t=>t.getComponents(),fromComponents:t=>new oo(...t)};function so(t,e){return{baseStep:cn(e),constraint:e,textProps:M.fromObject({draggingScale:hn(e,t),formatter:Ae(dn(e,t))})}}const ao={id:"input-point3d",type:"input",accept:(t,e)=>{if(!oo.isObject(t))return null;const n=D,i=A(e,{x:n.optional.custom(an),y:n.optional.custom(an),z:n.optional.custom(an)});return i?{initialValue:t,params:i}:null},binding:{reader:t=>function(t){return oo.isObject(t)?new oo(t.x,t.y,t.z):new oo},constraint:t=>{return e=t.params,n=t.initialValue,new Bi({assembly:ro,components:[Lo("x"in e?e.x:void 0,n.x),Lo("y"in e?e.y:void 0,n.y),Lo("z"in e?e.z:void 0,n.z)]});var e,n},equals:oo.equals,writer:t=>function(t,e){t.writeProperty("x",e.x),t.writeProperty("y",e.y),t.writeProperty("z",e.z)}},controller:t=>{const e=t.value,n=t.constraint;if(!(n instanceof Bi))throw c.shouldNeverHappen();return new zi(t.document,{assembly:ro,axes:[so(e.rawValue.x,n.components[0]),so(e.rawValue.y,n.components[1]),so(e.rawValue.z,n.components[2])],parser:Se,value:e,viewProps:t.viewProps})}};class lo{constructor(t=0,e=0,n=0,i=0){this.x=t,this.y=e,this.z=n,this.w=i}getComponents(){return[this.x,this.y,this.z,this.w]}static isObject(t){if(a(t))return!1;const e=t.x,n=t.y,i=t.z,o=t.w;return"number"==typeof e&&"number"==typeof n&&"number"==typeof i&&"number"==typeof o}static equals(t,e){return t.x===e.x&&t.y===e.y&&t.z===e.z&&t.w===e.w}toObject(){return{x:this.x,y:this.y,z:this.z,w:this.w}}}const po={toComponents:t=>t.getComponents(),fromComponents:t=>new lo(...t)},co={id:"input-point4d",type:"input",accept:(t,e)=>{if(!lo.isObject(t))return null;const n=D,i=A(e,{x:n.optional.custom(an),y:n.optional.custom(an),z:n.optional.custom(an),w:n.optional.custom(an)});return i?{initialValue:t,params:i}:null},binding:{reader:t=>function(t){return lo.isObject(t)?new lo(t.x,t.y,t.z,t.w):new lo},constraint:t=>{return e=t.params,n=t.initialValue,new Bi({assembly:po,components:[Lo("x"in e?e.x:void 0,n.x),Lo("y"in e?e.y:void 0,n.y),Lo("z"in e?e.z:void 0,n.z),Lo("w"in e?e.w:void 0,n.w)]});var e,n},equals:lo.equals,writer:t=>function(t,e){t.writeProperty("x",e.x),t.writeProperty("y",e.y),t.writeProperty("z",e.z),t.writeProperty("w",e.w)}},controller:t=>{const e=t.value,n=t.constraint;if(!(n instanceof Bi))throw c.shouldNeverHappen();return new zi(t.document,{assembly:po,axes:e.rawValue.getComponents().map((t,e)=>{return i=t,{baseStep:cn(o=n.components[e]),constraint:o,textProps:M.fromObject({draggingScale:hn(o,i),formatter:Ae(dn(o,i))})};var i,o}),parser:Se,value:e,viewProps:t.viewProps})}},ho={id:"input-string",type:"input",accept:(t,e)=>{if("string"!=typeof t)return null;const n=A(e,{options:D.optional.custom(rn)});return n?{initialValue:t,params:n}:null},binding:{reader:t=>Re,constraint:t=>function(t){const e=[],n=pn(t.options);return n&&e.push(n),new Xt(e)}(t.params),writer:t=>on},controller:t=>{const e=t.document,n=t.value,i=t.constraint,o=i&&Qt(i,Jt);return o?new oe(e,{props:new M({options:o.values.value("options")}),value:n,viewProps:t.viewProps}):new de(e,{parser:t=>t,props:M.fromObject({formatter:Te}),value:n,viewProps:t.viewProps})}},uo={defaultInterval:200,defaultLineCount:3},vo=b("mll");class mo{constructor(t,e){this.onValueUpdate_=this.onValueUpdate_.bind(this),this.formatter_=e.formatter,this.element=t.createElement("div"),this.element.classList.add(vo()),e.viewProps.bindClassModifiers(this.element);const n=t.createElement("textarea");n.classList.add(vo("i")),n.style.height=`calc(var(--bld-us) * ${e.lineCount})`,n.readOnly=!0,e.viewProps.bindDisabled(n),this.element.appendChild(n),this.textareaElem_=n,e.value.emitter.on("change",this.onValueUpdate_),this.value=e.value,this.update_()}update_(){const t=this.textareaElem_,e=t.scrollTop===t.scrollHeight-t.clientHeight,n=[];this.value.rawValue.forEach(t=>{void 0!==t&&n.push(this.formatter_(t))}),t.textContent=n.join("\n"),e&&(t.scrollTop=t.scrollHeight)}onValueUpdate_(){this.update_()}}class bo{constructor(t,e){this.value=e.value,this.viewProps=e.viewProps,this.view=new mo(t,{formatter:e.formatter,lineCount:e.lineCount,value:this.value,viewProps:this.viewProps})}}const go=b("sgl");class _o{constructor(t,e){this.onValueUpdate_=this.onValueUpdate_.bind(this),this.formatter_=e.formatter,this.element=t.createElement("div"),this.element.classList.add(go()),e.viewProps.bindClassModifiers(this.element);const n=t.createElement("input");n.classList.add(go("i")),n.readOnly=!0,n.type="text",e.viewProps.bindDisabled(n),this.element.appendChild(n),this.inputElement=n,e.value.emitter.on("change",this.onValueUpdate_),this.value=e.value,this.update_()}update_(){const t=this.value.rawValue,e=t[t.length-1];this.inputElement.value=void 0!==e?this.formatter_(e):""}onValueUpdate_(){this.update_()}}class fo{constructor(t,e){this.value=e.value,this.viewProps=e.viewProps,this.view=new _o(t,{formatter:e.formatter,value:this.value,viewProps:this.viewProps})}}const wo={id:"monitor-bool",type:"monitor",accept:(t,e)=>{if("boolean"!=typeof t)return null;const n=A(e,{lineCount:D.optional.number});return n?{initialValue:t,params:n}:null},binding:{reader:t=>ce},controller:t=>{var e;return 1===t.value.rawValue.length?new fo(t.document,{formatter:he,value:t.value,viewProps:t.viewProps}):new bo(t.document,{formatter:he,lineCount:null!==(e=t.params.lineCount)&&void 0!==e?e:uo.defaultLineCount,value:t.value,viewProps:t.viewProps})}},xo=b("grl");class yo{constructor(t,e){this.onCursorChange_=this.onCursorChange_.bind(this),this.onValueUpdate_=this.onValueUpdate_.bind(this),this.element=t.createElement("div"),this.element.classList.add(xo()),e.viewProps.bindClassModifiers(this.element),this.formatter_=e.formatter,this.props_=e.props,this.cursor_=e.cursor,this.cursor_.emitter.on("change",this.onCursorChange_);const n=t.createElementNS(F,"svg");n.classList.add(xo("g")),n.style.height=`calc(var(--bld-us) * ${e.lineCount})`,this.element.appendChild(n),this.svgElem_=n;const i=t.createElementNS(F,"polyline");this.svgElem_.appendChild(i),this.lineElem_=i;const o=t.createElement("div");o.classList.add(xo("t"),b("tt")()),this.element.appendChild(o),this.tooltipElem_=o,e.value.emitter.on("change",this.onValueUpdate_),this.value=e.value,this.update_()}get graphElement(){return this.svgElem_}update_(){const t=this.svgElem_.getBoundingClientRect(),e=this.value.rawValue.length-1,n=this.props_.get("minValue"),i=this.props_.get("maxValue"),o=[];this.value.rawValue.forEach((r,s)=>{if(void 0===r)return;const a=qe(s,0,e,0,t.width),l=qe(r,n,i,t.height,0);o.push([a,l].join(","))}),this.lineElem_.setAttributeNS(null,"points",o.join(" "));const r=this.tooltipElem_,s=this.value.rawValue[this.cursor_.rawValue];if(void 0===s)return void r.classList.remove(xo("t","a"));const a=qe(this.cursor_.rawValue,0,e,0,t.width),l=qe(s,n,i,t.height,0);r.style.left=a+"px",r.style.top=l+"px",r.textContent=""+this.formatter_(s),r.classList.contains(xo("t","a"))||(r.classList.add(xo("t","a"),xo("t","in")),B(r),r.classList.remove(xo("t","in")))}onValueUpdate_(){this.update_()}onCursorChange_(){this.update_()}}class Co{constructor(t,e){if(this.onGraphMouseMove_=this.onGraphMouseMove_.bind(this),this.onGraphMouseLeave_=this.onGraphMouseLeave_.bind(this),this.onGraphPointerDown_=this.onGraphPointerDown_.bind(this),this.onGraphPointerMove_=this.onGraphPointerMove_.bind(this),this.onGraphPointerUp_=this.onGraphPointerUp_.bind(this),this.props_=e.props,this.value=e.value,this.viewProps=e.viewProps,this.cursor_=V(-1),this.view=new yo(t,{cursor:this.cursor_,formatter:e.formatter,lineCount:e.lineCount,props:this.props_,value:this.value,viewProps:this.viewProps}),H(t)){const t=new He(this.view.element);t.emitter.on("down",this.onGraphPointerDown_),t.emitter.on("move",this.onGraphPointerMove_),t.emitter.on("up",this.onGraphPointerUp_)}else this.view.element.addEventListener("mousemove",this.onGraphMouseMove_),this.view.element.addEventListener("mouseleave",this.onGraphMouseLeave_)}onGraphMouseLeave_(){this.cursor_.rawValue=-1}onGraphMouseMove_(t){const e=this.view.element.getBoundingClientRect();this.cursor_.rawValue=Math.floor(qe(t.offsetX,0,e.width,0,this.value.rawValue.length))}onGraphPointerDown_(t){this.onGraphPointerMove_(t)}onGraphPointerMove_(t){t.data.point?this.cursor_.rawValue=Math.floor(qe(t.data.point.x,0,t.data.bounds.width,0,this.value.rawValue.length)):this.cursor_.rawValue=-1}onGraphPointerUp_(){this.cursor_.rawValue=-1}}function Po(t){return"format"in t&&!a(t.format)?t.format:Ae(2)}function ko(t){return"view"in t&&"graph"===t.view}const Eo={id:"monitor-number",type:"monitor",accept:(t,e)=>{if("number"!=typeof t)return null;const n=D,i=A(e,{format:n.optional.function,lineCount:n.optional.number,max:n.optional.number,min:n.optional.number,view:n.optional.string});return i?{initialValue:t,params:i}:null},binding:{defaultBufferSize:t=>ko(t)?64:1,reader:t=>Le},controller:t=>ko(t.params)?function(t){var e,n,i;return new Co(t.document,{formatter:Po(t.params),lineCount:null!==(e=t.params.lineCount)&&void 0!==e?e:uo.defaultLineCount,props:M.fromObject({maxValue:null!==(n="max"in t.params?t.params.max:null)&&void 0!==n?n:100,minValue:null!==(i="min"in t.params?t.params.min:null)&&void 0!==i?i:0}),value:t.value,viewProps:t.viewProps})}(t):function(t){var e;return 1===t.value.rawValue.length?new fo(t.document,{formatter:Po(t.params),value:t.value,viewProps:t.viewProps}):new bo(t.document,{formatter:Po(t.params),lineCount:null!==(e=t.params.lineCount)&&void 0!==e?e:uo.defaultLineCount,value:t.value,viewProps:t.viewProps})}(t)},Vo={id:"monitor-string",type:"monitor",accept:(t,e)=>{if("string"!=typeof t)return null;const n=D,i=A(e,{lineCount:n.optional.number,multiline:n.optional.boolean});return i?{initialValue:t,params:i}:null},binding:{reader:t=>Re},controller:t=>{var e;const n=t.value;return n.rawValue.length>1||"multiline"in t.params&&t.params.multiline?new bo(t.document,{formatter:Te,lineCount:null!==(e=t.params.lineCount)&&void 0!==e?e:uo.defaultLineCount,value:n,viewProps:t.viewProps}):new fo(t.document,{formatter:Te,value:n,viewProps:t.viewProps})}};function Mo(t,e){return 0===e?new Ht:new qt(t,null!=e?e:uo.defaultInterval)}class So{constructor(){this.pluginsMap_={blades:[],inputs:[],monitors:[]}}getAll(){return[...this.pluginsMap_.blades,...this.pluginsMap_.inputs,...this.pluginsMap_.monitors]}register(t){"blade"===t.type?this.pluginsMap_.blades.unshift(t):"input"===t.type?this.pluginsMap_.inputs.unshift(t):"monitor"===t.type&&this.pluginsMap_.monitors.unshift(t)}createInput(t,e,n){if(a(e.read()))throw new c({context:{key:e.key},type:"nomatchingcontroller"});const i=this.pluginsMap_.inputs.reduce((i,o)=>null!=i?i:function(t,e){var n;const i=t.accept(e.target.read(),e.params);if(a(i))return null;const o=D,r={target:e.target,initialValue:i.initialValue,params:i.params},s=t.binding.reader(r),l=t.binding.constraint?t.binding.constraint(r):void 0,p=V(s(i.initialValue),{constraint:l,equals:t.binding.equals}),d=new zt({reader:s,target:e.target,value:p,writer:t.binding.writer(r)}),c=o.optional.boolean(e.params.disabled).value,h=o.optional.boolean(e.params.hidden).value,u=t.controller({constraint:l,document:e.document,initialValue:i.initialValue,params:i.params,value:d.value,viewProps:O.create({disabled:c,hidden:h})});return new lt(e.document,{binding:d,blade:et(),props:M.fromObject({label:"label"in e.params?null!==(n=o.optional.string(e.params.label).value)&&void 0!==n?n:null:e.target.key}),valueController:u})}(o,{document:t,target:e,params:n}),null);if(i)return i;throw new c({context:{key:e.key},type:"nomatchingcontroller"})}createMonitor(t,e,n){const i=this.pluginsMap_.monitors.reduce((i,o)=>null!=i?i:function(t,e){var n,i,o;const r=D,s=t.accept(e.target.read(),e.params);if(a(s))return null;const l={target:e.target,initialValue:s.initialValue,params:s.params},p=t.binding.reader(l),d=null!==(i=null!==(n=r.optional.number(e.params.bufferSize).value)&&void 0!==n?n:t.binding.defaultBufferSize&&t.binding.defaultBufferSize(s.params))&&void 0!==i?i:1,c=r.optional.number(e.params.interval).value,h=new Wt({reader:p,target:e.target,ticker:Mo(e.document,c),value:Gt(d)}),u=r.optional.boolean(e.params.disabled).value,v=r.optional.boolean(e.params.hidden).value,m=t.controller({document:e.document,params:s.params,value:h.value,viewProps:O.create({disabled:u,hidden:v})});return new dt(e.document,{binding:h,blade:et(),props:M.fromObject({label:"label"in e.params?null!==(o=r.optional.string(e.params.label).value)&&void 0!==o?o:null:e.target.key}),valueController:m})}(o,{document:t,params:n,target:e}),null);if(i)return i;throw new c({context:{key:e.key},type:"nomatchingcontroller"})}createBlade(t,e){const n=this.pluginsMap_.blades.reduce((n,i)=>null!=n?n:function(t,e){const n=t.accept(e.params);if(!n)return null;const i=D.optional.boolean(e.params.disabled).value,o=D.optional.boolean(e.params.hidden).value;return t.controller({blade:et(),document:e.document,params:Object.assign(Object.assign({},n.params),{disabled:i,hidden:o}),viewProps:O.create({disabled:i,hidden:o})})}(i,{document:t,params:e}),null);if(!n)throw new c({type:"nomatchingview",context:{params:e}});return n}createBladeApi(t){if(t instanceof lt)return new at(t);if(t instanceof dt)return new pt(t);if(t instanceof xt)return new vt(t,this);const e=this.pluginsMap_.blades.reduce((e,n)=>null!=e?e:n.api({controller:t,pool:this}),null);if(!e)throw c.shouldNeverHappen();return e}}function Lo(t,e){if(!t)return;const n=[],i=$i(t,e);i&&n.push(i);const o=Gi(t);return o&&n.push(o),new Xt(n)}function Do(t,e){const[n,i]=t?function(t){const e=Qt(t,Zt);if(e)return[e.values.get("min"),e.values.get("max")];const n=Qt(t,te);return n?[n.minValue,n.maxValue]:[void 0,void 0]}(t):[];if(!a(n)||!a(i))return Math.max(Math.abs(null!=n?n:0),Math.abs(null!=i?i:0));const o=cn(t);return Math.max(10*Math.abs(o),10*Math.abs(e))}function Ao(t,e){const n=e instanceof Bi?e.components[0]:void 0,i=e instanceof Bi?e.components[1]:void 0,o=Do(n,t.x),r=Do(i,t.y);return Math.max(o,r)}function jo(t,e){return{baseStep:cn(e),constraint:e,textProps:M.fromObject({draggingScale:hn(e,t),formatter:Ae(dn(e,t))})}}function Io(t){if(!("y"in t))return!1;const e=t.y;return!!e&&"inverted"in e&&!!e.inverted}const Ro={id:"input-point2d",type:"input",accept:(t,e)=>{if(!Wi.isObject(t))return null;const n=D,i=A(e,{expanded:n.optional.boolean,picker:n.optional.custom(sn),x:n.optional.custom(an),y:n.optional.object({inverted:n.optional.boolean,max:n.optional.number,min:n.optional.number,step:n.optional.number})});return i?{initialValue:t,params:i}:null},binding:{reader:t=>function(t){return Wi.isObject(t)?new Wi(t.x,t.y):new Wi},constraint:t=>{return e=t.params,n=t.initialValue,new Bi({assembly:Xi,components:[Lo("x"in e?e.x:void 0,n.x),Lo("y"in e?e.y:void 0,n.y)]});var e,n},equals:Wi.equals,writer:t=>function(t,e){t.writeProperty("x",e.x),t.writeProperty("y",e.y)}},controller:t=>{const e=t.document,n=t.value,i=t.constraint;if(!(i instanceof Bi))throw c.shouldNeverHappen();const o="expanded"in t.params?t.params.expanded:void 0,r="picker"in t.params?t.params.picker:void 0;return new io(e,{axes:[jo(n.rawValue.x,i.components[0]),jo(n.rawValue.y,i.components[1])],expanded:null!=o&&o,invertsY:Io(t.params),maxValue:Ao(n.rawValue,i),parser:Se,pickerLayout:null!=r?r:"popup",value:n,viewProps:t.viewProps})}};class To extends e{constructor(t){super(t),this.emitter_=new v,this.controller_.valueController.value.emitter.on("change",t=>{this.emitter_.emit("change",{event:new i(this,t.rawValue)})})}get label(){return this.controller_.props.get("label")}set label(t){this.controller_.props.set("label",t)}get options(){return this.controller_.valueController.props.get("options")}set options(t){this.controller_.valueController.props.set("options",t)}get value(){return this.controller_.valueController.value.rawValue}set value(t){this.controller_.valueController.value.rawValue=t}on(t,e){const n=e.bind(this);return this.emitter_.on(t,t=>{n(t.event)}),this}}class Oo extends e{constructor(t){super(t),this.emitter_=new v,this.controller_.valueController.value.emitter.on("change",t=>{this.emitter_.emit("change",{event:new i(this,t.rawValue)})})}get label(){return this.controller_.props.get("label")}set label(t){this.controller_.props.set("label",t)}get maxValue(){return this.controller_.valueController.sliderController.props.get("maxValue")}set maxValue(t){this.controller_.valueController.sliderController.props.set("maxValue",t)}get minValue(){return this.controller_.valueController.sliderController.props.get("minValue")}set minValue(t){this.controller_.valueController.sliderController.props.set("minValue",t)}get value(){return this.controller_.valueController.value.rawValue}set value(t){this.controller_.valueController.value.rawValue=t}on(t,e){const n=e.bind(this);return this.emitter_.on(t,t=>{n(t.event)}),this}}class No extends e{constructor(t){super(t),this.emitter_=new v,this.controller_.valueController.value.emitter.on("change",t=>{this.emitter_.emit("change",{event:new i(this,t.rawValue)})})}get label(){return this.controller_.props.get("label")}set label(t){this.controller_.props.set("label",t)}get formatter(){return this.controller_.valueController.props.get("formatter")}set formatter(t){this.controller_.valueController.props.set("formatter",t)}get value(){return this.controller_.valueController.value.rawValue}set value(t){this.controller_.valueController.value.rawValue=t}on(t,e){const n=e.bind(this);return this.emitter_.on(t,t=>{n(t.event)}),this}}const Uo={id:"list",type:"blade",accept(t){const e=D,n=A(t,{options:e.required.custom(rn),value:e.required.raw,view:e.required.constant("list"),label:e.optional.string});return n?{params:n}:null},controller(t){const e=new Jt(ln(t.params.options)),n=V(t.params.value,{constraint:e}),i=new oe(t.document,{props:new M({options:e.values.value("options")}),value:n,viewProps:t.viewProps});return new Et(t.document,{blade:t.blade,props:M.fromObject({label:t.params.label}),valueController:i})},api:t=>t.controller instanceof Et&&t.controller.valueController instanceof oe?new To(t.controller):null};class Ko extends mt{constructor(t,e){super(t,e)}get element(){return this.controller_.view.element}importPreset(t){!function(t,e){t.forEach(t=>{const n=e[t.target.presetKey];void 0!==n&&t.writer(t.target,t.reader(n))})}(this.controller_.rackController.rack.find(lt).map(t=>t.binding),t),this.refresh()}exportPreset(){return this.controller_.rackController.rack.find(lt).map(t=>t.binding.target).reduce((t,e)=>Object.assign(t,{[e.presetKey]:e.read()}),{})}refresh(){this.controller_.rackController.rack.find(lt).forEach(t=>{t.binding.read()}),this.controller_.rackController.rack.find(dt).forEach(t=>{t.binding.read()})}}class Fo extends Pt{constructor(t,e){super(t,{expanded:e.expanded,blade:e.blade,props:e.props,root:!0,viewProps:e.viewProps})}}const Bo={id:"slider",type:"blade",accept(t){const e=D,n=A(t,{max:e.required.number,min:e.required.number,view:e.required.constant("slider"),format:e.optional.function,label:e.optional.string,value:e.optional.number});return n?{params:n}:null},controller(t){var e,n;const i=null!==(e=t.params.value)&&void 0!==e?e:0,o=new Zt({max:t.params.max,min:t.params.min}),r=new nn(t.document,{baseStep:1,parser:Se,sliderProps:new M({maxValue:o.values.value("max"),minValue:o.values.value("min")}),textProps:M.fromObject({draggingScale:hn(void 0,i),formatter:null!==(n=t.params.format)&&void 0!==n?n:De}),value:V(i,{constraint:o}),viewProps:t.viewProps});return new Et(t.document,{blade:t.blade,props:M.fromObject({label:t.params.label}),valueController:r})},api:t=>t.controller instanceof Et&&t.controller.valueController instanceof nn?new Oo(t.controller):null},Ho={id:"text",type:"blade",accept(t){const e=D,n=A(t,{parse:e.required.function,value:e.required.raw,view:e.required.constant("text"),format:e.optional.function,label:e.optional.string});return n?{params:n}:null},controller(t){var e;const n=new de(t.document,{parser:t.params.parse,props:M.fromObject({formatter:null!==(e=t.params.format)&&void 0!==e?e:t=>String(t)}),value:V(t.params.value),viewProps:t.viewProps});return new Et(t.document,{blade:t.blade,props:M.fromObject({label:t.params.label}),valueController:n})},api:t=>t.controller instanceof Et&&t.controller.valueController instanceof de?new No(t.controller):null};function qo(t,e,n){if(t.querySelector(`style[data-tp-style=${e}]`))return;const i=t.createElement("style");i.dataset.tpStyle=e,i.textContent=n,t.head.appendChild(i)}new class{constructor(t){const[e,n]=t.split("-"),i=e.split(".");this.major=parseInt(i[0],10),this.minor=parseInt(i[1],10),this.patch=parseInt(i[2],10),this.prerelease=null!=n?n:null}toString(){const t=[this.major,this.minor,this.patch].join(".");return null!==this.prerelease?[t,this.prerelease].join("-"):t}}("3.1.7");t.Pane=class extends Ko{constructor(t){var e,n;const i=null!=t?t:{},o=null!==(e=i.document)&&void 0!==e?e:globalThis.document,r=function(){const t=new So;return[Ro,ao,co,ho,Yi,Fi,Ki,Ni,bn,wo,Vo,Eo,J,kt,Dt,Bt].forEach(e=>{t.register(e)}),t}();super(new Fo(o,{expanded:i.expanded,blade:et(),props:M.fromObject({title:i.title}),viewProps:O.create()}),r),this.pool_=r,this.containerElem_=null!==(n=i.container)&&void 0!==n?n:function(t){const e=t.createElement("div");return e.classList.add(b("dfw")()),t.body&&t.body.appendChild(e),e}(o),this.containerElem_.appendChild(this.element),this.doc_=o,this.usesDefaultWrapper_=!i.container,this.setUpDefaultPlugins_()}get document(){if(!this.doc_)throw c.alreadyDisposed();return this.doc_}dispose(){const t=this.containerElem_;if(!t)throw c.alreadyDisposed();if(this.usesDefaultWrapper_){const e=t.parentElement;e&&e.removeChild(t)}this.containerElem_=null,this.doc_=null,super.dispose()}registerPlugin(t){("plugin"in t?[t.plugin]:"plugins"in t?t.plugins:[]).forEach(t=>{this.pool_.register(t),this.embedPluginStyle_(t)})}embedPluginStyle_(t){t.css&&qo(this.document,"plugin-"+t.id,t.css)}setUpDefaultPlugins_(){qo(this.document,"default",'.tp-tbiv_b,.tp-coltxtv_ms,.tp-ckbv_i,.tp-rotv_b,.tp-fldv_b,.tp-mllv_i,.tp-sglv_i,.tp-grlv_g,.tp-txtv_i,.tp-p2dpv_p,.tp-colswv_sw,.tp-p2dv_b,.tp-btnv_b,.tp-lstv_s{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:rgba(0,0,0,0);border-width:0;font-family:inherit;font-size:inherit;font-weight:inherit;margin:0;outline:none;padding:0}.tp-p2dv_b,.tp-btnv_b,.tp-lstv_s{background-color:var(--btn-bg);border-radius:var(--elm-br);color:var(--btn-fg);cursor:pointer;display:block;font-weight:bold;height:var(--bld-us);line-height:var(--bld-us);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.tp-p2dv_b:hover,.tp-btnv_b:hover,.tp-lstv_s:hover{background-color:var(--btn-bg-h)}.tp-p2dv_b:focus,.tp-btnv_b:focus,.tp-lstv_s:focus{background-color:var(--btn-bg-f)}.tp-p2dv_b:active,.tp-btnv_b:active,.tp-lstv_s:active{background-color:var(--btn-bg-a)}.tp-p2dv_b:disabled,.tp-btnv_b:disabled,.tp-lstv_s:disabled{opacity:.5}.tp-txtv_i,.tp-p2dpv_p,.tp-colswv_sw{background-color:var(--in-bg);border-radius:var(--elm-br);box-sizing:border-box;color:var(--in-fg);font-family:inherit;height:var(--bld-us);line-height:var(--bld-us);min-width:0;width:100%}.tp-txtv_i:hover,.tp-p2dpv_p:hover,.tp-colswv_sw:hover{background-color:var(--in-bg-h)}.tp-txtv_i:focus,.tp-p2dpv_p:focus,.tp-colswv_sw:focus{background-color:var(--in-bg-f)}.tp-txtv_i:active,.tp-p2dpv_p:active,.tp-colswv_sw:active{background-color:var(--in-bg-a)}.tp-txtv_i:disabled,.tp-p2dpv_p:disabled,.tp-colswv_sw:disabled{opacity:.5}.tp-mllv_i,.tp-sglv_i,.tp-grlv_g{background-color:var(--mo-bg);border-radius:var(--elm-br);box-sizing:border-box;color:var(--mo-fg);height:var(--bld-us);scrollbar-color:currentColor rgba(0,0,0,0);scrollbar-width:thin;width:100%}.tp-mllv_i::-webkit-scrollbar,.tp-sglv_i::-webkit-scrollbar,.tp-grlv_g::-webkit-scrollbar{height:8px;width:8px}.tp-mllv_i::-webkit-scrollbar-corner,.tp-sglv_i::-webkit-scrollbar-corner,.tp-grlv_g::-webkit-scrollbar-corner{background-color:rgba(0,0,0,0)}.tp-mllv_i::-webkit-scrollbar-thumb,.tp-sglv_i::-webkit-scrollbar-thumb,.tp-grlv_g::-webkit-scrollbar-thumb{background-clip:padding-box;background-color:currentColor;border:rgba(0,0,0,0) solid 2px;border-radius:4px}.tp-rotv{--font-family: var(--tp-font-family, Roboto Mono, Source Code Pro, Menlo, Courier, monospace);--bs-br: var(--tp-base-border-radius, 6px);--cnt-h-p: var(--tp-container-horizontal-padding, 4px);--cnt-v-p: var(--tp-container-vertical-padding, 4px);--elm-br: var(--tp-element-border-radius, 2px);--bld-s: var(--tp-blade-spacing, 4px);--bld-us: var(--tp-blade-unit-size, 20px);--bs-bg: var(--tp-base-background-color, hsl(230, 7%, 17%));--bs-sh: var(--tp-base-shadow-color, rgba(0, 0, 0, 0.2));--btn-bg: var(--tp-button-background-color, hsl(230, 7%, 70%));--btn-bg-a: var(--tp-button-background-color-active, #d6d7db);--btn-bg-f: var(--tp-button-background-color-focus, #c8cad0);--btn-bg-h: var(--tp-button-background-color-hover, #bbbcc4);--btn-fg: var(--tp-button-foreground-color, hsl(230, 7%, 17%));--cnt-bg: var(--tp-container-background-color, rgba(187, 188, 196, 0.1));--cnt-bg-a: var(--tp-container-background-color-active, rgba(187, 188, 196, 0.25));--cnt-bg-f: var(--tp-container-background-color-focus, rgba(187, 188, 196, 0.2));--cnt-bg-h: var(--tp-container-background-color-hover, rgba(187, 188, 196, 0.15));--cnt-fg: var(--tp-container-foreground-color, hsl(230, 7%, 75%));--in-bg: var(--tp-input-background-color, rgba(187, 188, 196, 0.1));--in-bg-a: var(--tp-input-background-color-active, rgba(187, 188, 196, 0.25));--in-bg-f: var(--tp-input-background-color-focus, rgba(187, 188, 196, 0.2));--in-bg-h: var(--tp-input-background-color-hover, rgba(187, 188, 196, 0.15));--in-fg: var(--tp-input-foreground-color, hsl(230, 7%, 75%));--lbl-fg: var(--tp-label-foreground-color, rgba(187, 188, 196, 0.7));--mo-bg: var(--tp-monitor-background-color, rgba(0, 0, 0, 0.2));--mo-fg: var(--tp-monitor-foreground-color, rgba(187, 188, 196, 0.7));--grv-fg: var(--tp-groove-foreground-color, rgba(187, 188, 196, 0.1))}.tp-rotv_c>.tp-cntv.tp-v-lst,.tp-tabv_c .tp-brkv>.tp-cntv.tp-v-lst,.tp-fldv_c>.tp-cntv.tp-v-lst{margin-bottom:calc(-1*var(--cnt-v-p))}.tp-rotv_c>.tp-fldv.tp-v-lst .tp-fldv_c,.tp-tabv_c .tp-brkv>.tp-fldv.tp-v-lst .tp-fldv_c,.tp-fldv_c>.tp-fldv.tp-v-lst .tp-fldv_c{border-bottom-left-radius:0}.tp-rotv_c>.tp-fldv.tp-v-lst .tp-fldv_b,.tp-tabv_c .tp-brkv>.tp-fldv.tp-v-lst .tp-fldv_b,.tp-fldv_c>.tp-fldv.tp-v-lst .tp-fldv_b{border-bottom-left-radius:0}.tp-rotv_c>*:not(.tp-v-fst),.tp-tabv_c .tp-brkv>*:not(.tp-v-fst),.tp-fldv_c>*:not(.tp-v-fst){margin-top:var(--bld-s)}.tp-rotv_c>.tp-sprv:not(.tp-v-fst),.tp-tabv_c .tp-brkv>.tp-sprv:not(.tp-v-fst),.tp-fldv_c>.tp-sprv:not(.tp-v-fst),.tp-rotv_c>.tp-cntv:not(.tp-v-fst),.tp-tabv_c .tp-brkv>.tp-cntv:not(.tp-v-fst),.tp-fldv_c>.tp-cntv:not(.tp-v-fst){margin-top:var(--cnt-v-p)}.tp-rotv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-tabv_c .tp-brkv>.tp-sprv+*:not(.tp-v-hidden),.tp-fldv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-rotv_c>.tp-cntv+*:not(.tp-v-hidden),.tp-tabv_c .tp-brkv>.tp-cntv+*:not(.tp-v-hidden),.tp-fldv_c>.tp-cntv+*:not(.tp-v-hidden){margin-top:var(--cnt-v-p)}.tp-rotv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-tabv_c .tp-brkv>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-fldv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-rotv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv,.tp-tabv_c .tp-brkv>.tp-cntv:not(.tp-v-hidden)+.tp-cntv,.tp-fldv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv{margin-top:0}.tp-tabv_c .tp-brkv>.tp-cntv,.tp-fldv_c>.tp-cntv{margin-left:4px}.tp-tabv_c .tp-brkv>.tp-fldv>.tp-fldv_b,.tp-fldv_c>.tp-fldv>.tp-fldv_b{border-top-left-radius:var(--elm-br);border-bottom-left-radius:var(--elm-br)}.tp-tabv_c .tp-brkv>.tp-fldv.tp-fldv-expanded>.tp-fldv_b,.tp-fldv_c>.tp-fldv.tp-fldv-expanded>.tp-fldv_b{border-bottom-left-radius:0}.tp-tabv_c .tp-brkv .tp-fldv>.tp-fldv_c,.tp-fldv_c .tp-fldv>.tp-fldv_c{border-bottom-left-radius:var(--elm-br)}.tp-tabv_c .tp-brkv>.tp-cntv+.tp-fldv>.tp-fldv_b,.tp-fldv_c>.tp-cntv+.tp-fldv>.tp-fldv_b{border-top-left-radius:0}.tp-tabv_c .tp-brkv>.tp-cntv+.tp-tabv>.tp-tabv_t,.tp-fldv_c>.tp-cntv+.tp-tabv>.tp-tabv_t{border-top-left-radius:0}.tp-tabv_c .tp-brkv>.tp-tabv>.tp-tabv_t,.tp-fldv_c>.tp-tabv>.tp-tabv_t{border-top-left-radius:var(--elm-br)}.tp-tabv_c .tp-brkv .tp-tabv>.tp-tabv_c,.tp-fldv_c .tp-tabv>.tp-tabv_c{border-bottom-left-radius:var(--elm-br)}.tp-rotv_b,.tp-fldv_b{background-color:var(--cnt-bg);color:var(--cnt-fg);cursor:pointer;display:block;height:calc(var(--bld-us) + 4px);line-height:calc(var(--bld-us) + 4px);overflow:hidden;padding-left:var(--cnt-h-p);padding-right:calc(4px + var(--bld-us) + var(--cnt-h-p));position:relative;text-align:left;text-overflow:ellipsis;white-space:nowrap;width:100%;transition:border-radius .2s ease-in-out .2s}.tp-rotv_b:hover,.tp-fldv_b:hover{background-color:var(--cnt-bg-h)}.tp-rotv_b:focus,.tp-fldv_b:focus{background-color:var(--cnt-bg-f)}.tp-rotv_b:active,.tp-fldv_b:active{background-color:var(--cnt-bg-a)}.tp-rotv_b:disabled,.tp-fldv_b:disabled{opacity:.5}.tp-rotv_m,.tp-fldv_m{background:linear-gradient(to left, var(--cnt-fg), var(--cnt-fg) 2px, transparent 2px, transparent 4px, var(--cnt-fg) 4px);border-radius:2px;bottom:0;content:"";display:block;height:6px;right:calc(var(--cnt-h-p) + (var(--bld-us) + 4px - 6px)/2 - 2px);margin:auto;opacity:.5;position:absolute;top:0;transform:rotate(90deg);transition:transform .2s ease-in-out;width:6px}.tp-rotv.tp-rotv-expanded .tp-rotv_m,.tp-fldv.tp-fldv-expanded>.tp-fldv_b>.tp-fldv_m{transform:none}.tp-rotv_c,.tp-fldv_c{box-sizing:border-box;height:0;opacity:0;overflow:hidden;padding-bottom:0;padding-top:0;position:relative;transition:height .2s ease-in-out,opacity .2s linear,padding .2s ease-in-out}.tp-rotv.tp-rotv-cpl:not(.tp-rotv-expanded) .tp-rotv_c,.tp-fldv.tp-fldv-cpl:not(.tp-fldv-expanded)>.tp-fldv_c{display:none}.tp-rotv.tp-rotv-expanded .tp-rotv_c,.tp-fldv.tp-fldv-expanded>.tp-fldv_c{opacity:1;padding-bottom:var(--cnt-v-p);padding-top:var(--cnt-v-p);transform:none;overflow:visible;transition:height .2s ease-in-out,opacity .2s linear .2s,padding .2s ease-in-out}.tp-lstv,.tp-coltxtv_m{position:relative}.tp-lstv_s{padding:0 20px 0 4px;width:100%}.tp-lstv_m,.tp-coltxtv_mm{bottom:0;margin:auto;pointer-events:none;position:absolute;right:2px;top:0}.tp-lstv_m svg,.tp-coltxtv_mm svg{bottom:0;height:16px;margin:auto;position:absolute;right:0;top:0;width:16px}.tp-lstv_m svg path,.tp-coltxtv_mm svg path{fill:currentColor}.tp-pndtxtv,.tp-coltxtv_w{display:flex}.tp-pndtxtv_a,.tp-coltxtv_c{width:100%}.tp-pndtxtv_a+.tp-pndtxtv_a,.tp-coltxtv_c+.tp-pndtxtv_a,.tp-pndtxtv_a+.tp-coltxtv_c,.tp-coltxtv_c+.tp-coltxtv_c{margin-left:2px}.tp-btnv_b{width:100%}.tp-btnv_t{text-align:center}.tp-ckbv_l{display:block;position:relative}.tp-ckbv_i{left:0;opacity:0;position:absolute;top:0}.tp-ckbv_w{background-color:var(--in-bg);border-radius:var(--elm-br);cursor:pointer;display:block;height:var(--bld-us);position:relative;width:var(--bld-us)}.tp-ckbv_w svg{bottom:0;display:block;height:16px;left:0;margin:auto;opacity:0;position:absolute;right:0;top:0;width:16px}.tp-ckbv_w svg path{fill:none;stroke:var(--in-fg);stroke-width:2}.tp-ckbv_i:hover+.tp-ckbv_w{background-color:var(--in-bg-h)}.tp-ckbv_i:focus+.tp-ckbv_w{background-color:var(--in-bg-f)}.tp-ckbv_i:active+.tp-ckbv_w{background-color:var(--in-bg-a)}.tp-ckbv_i:checked+.tp-ckbv_w svg{opacity:1}.tp-ckbv.tp-v-disabled .tp-ckbv_w{opacity:.5}.tp-colv{position:relative}.tp-colv_h{display:flex}.tp-colv_s{flex-grow:0;flex-shrink:0;width:var(--bld-us)}.tp-colv_t{flex:1;margin-left:4px}.tp-colv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-colv.tp-colv-cpl .tp-colv_p{overflow:visible}.tp-colv.tp-colv-expanded .tp-colv_p{margin-top:var(--bld-s);opacity:1}.tp-colv .tp-popv{left:calc(-1*var(--cnt-h-p));right:calc(-1*var(--cnt-h-p));top:var(--bld-us)}.tp-colpv_h,.tp-colpv_ap{margin-left:6px;margin-right:6px}.tp-colpv_h{margin-top:var(--bld-s)}.tp-colpv_rgb{display:flex;margin-top:var(--bld-s);width:100%}.tp-colpv_a{display:flex;margin-top:var(--cnt-v-p);padding-top:calc(var(--cnt-v-p) + 2px);position:relative}.tp-colpv_a::before{background-color:var(--grv-fg);content:"";height:2px;left:calc(-1*var(--cnt-h-p));position:absolute;right:calc(-1*var(--cnt-h-p));top:0}.tp-colpv.tp-v-disabled .tp-colpv_a::before{opacity:.5}.tp-colpv_ap{align-items:center;display:flex;flex:3}.tp-colpv_at{flex:1;margin-left:4px}.tp-svpv{border-radius:var(--elm-br);outline:none;overflow:hidden;position:relative}.tp-svpv.tp-v-disabled{opacity:.5}.tp-svpv_c{cursor:crosshair;display:block;height:calc(var(--bld-us)*4);width:100%}.tp-svpv_m{border-radius:100%;border:rgba(255,255,255,.75) solid 2px;box-sizing:border-box;filter:drop-shadow(0 0 1px rgba(0, 0, 0, 0.3));height:12px;margin-left:-6px;margin-top:-6px;pointer-events:none;position:absolute;width:12px}.tp-svpv:focus .tp-svpv_m{border-color:#fff}.tp-hplv{cursor:pointer;height:var(--bld-us);outline:none;position:relative}.tp-hplv.tp-v-disabled{opacity:.5}.tp-hplv_c{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAABCAYAAABubagXAAAAQ0lEQVQoU2P8z8Dwn0GCgQEDi2OK/RBgYHjBgIpfovFh8j8YBIgzFGQxuqEgPhaDOT5gOhPkdCxOZeBg+IDFZZiGAgCaSSMYtcRHLgAAAABJRU5ErkJggg==);background-position:left top;background-repeat:no-repeat;background-size:100% 100%;border-radius:2px;display:block;height:4px;left:0;margin-top:-2px;position:absolute;top:50%;width:100%}.tp-hplv_m{border-radius:var(--elm-br);border:rgba(255,255,255,.75) solid 2px;box-shadow:0 0 2px rgba(0,0,0,.1);box-sizing:border-box;height:12px;left:50%;margin-left:-6px;margin-top:-6px;pointer-events:none;position:absolute;top:50%;width:12px}.tp-hplv:focus .tp-hplv_m{border-color:#fff}.tp-aplv{cursor:pointer;height:var(--bld-us);outline:none;position:relative;width:100%}.tp-aplv.tp-v-disabled{opacity:.5}.tp-aplv_b{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:4px 4px;background-position:0 0,2px 2px;border-radius:2px;display:block;height:4px;left:0;margin-top:-2px;overflow:hidden;position:absolute;top:50%;width:100%}.tp-aplv_c{bottom:0;left:0;position:absolute;right:0;top:0}.tp-aplv_m{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:12px 12px;background-position:0 0,6px 6px;border-radius:var(--elm-br);box-shadow:0 0 2px rgba(0,0,0,.1);height:12px;left:50%;margin-left:-6px;margin-top:-6px;overflow:hidden;pointer-events:none;position:absolute;top:50%;width:12px}.tp-aplv_p{border-radius:var(--elm-br);border:rgba(255,255,255,.75) solid 2px;box-sizing:border-box;bottom:0;left:0;position:absolute;right:0;top:0}.tp-aplv:focus .tp-aplv_p{border-color:#fff}.tp-colswv{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:10px 10px;background-position:0 0,5px 5px;border-radius:var(--elm-br);overflow:hidden}.tp-colswv.tp-v-disabled{opacity:.5}.tp-colswv_sw{border-radius:0}.tp-colswv_b{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:rgba(0,0,0,0);border-width:0;cursor:pointer;display:block;height:var(--bld-us);left:0;margin:0;outline:none;padding:0;position:absolute;top:0;width:var(--bld-us)}.tp-colswv_b:focus::after{border:rgba(255,255,255,.75) solid 2px;border-radius:var(--elm-br);bottom:0;content:"";display:block;left:0;position:absolute;right:0;top:0}.tp-coltxtv{display:flex;width:100%}.tp-coltxtv_m{margin-right:4px}.tp-coltxtv_ms{border-radius:var(--elm-br);color:var(--lbl-fg);cursor:pointer;height:var(--bld-us);line-height:var(--bld-us);padding:0 18px 0 4px}.tp-coltxtv_ms:hover{background-color:var(--in-bg-h)}.tp-coltxtv_ms:focus{background-color:var(--in-bg-f)}.tp-coltxtv_ms:active{background-color:var(--in-bg-a)}.tp-coltxtv_mm{color:var(--lbl-fg)}.tp-coltxtv.tp-v-disabled .tp-coltxtv_mm{opacity:.5}.tp-coltxtv_w{flex:1}.tp-dfwv{position:absolute;top:8px;right:8px;width:256px}.tp-fldv{position:relative}.tp-fldv.tp-fldv-not .tp-fldv_b{display:none}.tp-fldv_t{padding-left:4px}.tp-fldv_b:disabled .tp-fldv_m{display:none}.tp-fldv_c{padding-left:4px}.tp-fldv_i{bottom:0;color:var(--cnt-bg);left:0;overflow:hidden;position:absolute;top:calc(var(--bld-us) + 4px);width:var(--bs-br)}.tp-fldv_i::before{background-color:currentColor;bottom:0;content:"";left:0;position:absolute;top:0;width:4px}.tp-fldv_b:hover+.tp-fldv_i{color:var(--cnt-bg-h)}.tp-fldv_b:focus+.tp-fldv_i{color:var(--cnt-bg-f)}.tp-fldv_b:active+.tp-fldv_i{color:var(--cnt-bg-a)}.tp-fldv.tp-v-disabled>.tp-fldv_i{opacity:.5}.tp-grlv{position:relative}.tp-grlv_g{display:block;height:calc(var(--bld-us)*3)}.tp-grlv_g polyline{fill:none;stroke:var(--mo-fg);stroke-linejoin:round}.tp-grlv_t{margin-top:-4px;transition:left .05s,top .05s;visibility:hidden}.tp-grlv_t.tp-grlv_t-a{visibility:visible}.tp-grlv_t.tp-grlv_t-in{transition:none}.tp-grlv.tp-v-disabled .tp-grlv_g{opacity:.5}.tp-grlv .tp-ttv{background-color:var(--mo-fg)}.tp-grlv .tp-ttv::before{border-top-color:var(--mo-fg)}.tp-lblv{align-items:center;display:flex;line-height:1.3;padding-left:var(--cnt-h-p);padding-right:var(--cnt-h-p)}.tp-lblv.tp-lblv-nol{display:block}.tp-lblv_l{color:var(--lbl-fg);flex:1;-webkit-hyphens:auto;hyphens:auto;overflow:hidden;padding-left:4px;padding-right:16px}.tp-lblv.tp-v-disabled .tp-lblv_l{opacity:.5}.tp-lblv.tp-lblv-nol .tp-lblv_l{display:none}.tp-lblv_v{align-self:flex-start;flex-grow:0;flex-shrink:0;width:160px}.tp-lblv.tp-lblv-nol .tp-lblv_v{width:100%}.tp-lstv_s{padding:0 20px 0 4px;width:100%}.tp-lstv_m{color:var(--btn-fg)}.tp-sglv_i{padding:0 4px}.tp-sglv.tp-v-disabled .tp-sglv_i{opacity:.5}.tp-mllv_i{display:block;height:calc(var(--bld-us)*3);line-height:var(--bld-us);padding:0 4px;resize:none;white-space:pre}.tp-mllv.tp-v-disabled .tp-mllv_i{opacity:.5}.tp-p2dv{position:relative}.tp-p2dv_h{display:flex}.tp-p2dv_b{height:var(--bld-us);margin-right:4px;position:relative;width:var(--bld-us)}.tp-p2dv_b svg{display:block;height:16px;left:50%;margin-left:-8px;margin-top:-8px;position:absolute;top:50%;width:16px}.tp-p2dv_b svg path{stroke:currentColor;stroke-width:2}.tp-p2dv_b svg circle{fill:currentColor}.tp-p2dv_t{flex:1}.tp-p2dv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-p2dv.tp-p2dv-expanded .tp-p2dv_p{margin-top:var(--bld-s);opacity:1}.tp-p2dv .tp-popv{left:calc(-1*var(--cnt-h-p));right:calc(-1*var(--cnt-h-p));top:var(--bld-us)}.tp-p2dpv{padding-left:calc(var(--bld-us) + 4px)}.tp-p2dpv_p{cursor:crosshair;height:0;overflow:hidden;padding-bottom:100%;position:relative}.tp-p2dpv.tp-v-disabled .tp-p2dpv_p{opacity:.5}.tp-p2dpv_g{display:block;height:100%;left:0;pointer-events:none;position:absolute;top:0;width:100%}.tp-p2dpv_ax{opacity:.1;stroke:var(--in-fg);stroke-dasharray:1}.tp-p2dpv_l{opacity:.5;stroke:var(--in-fg);stroke-dasharray:1}.tp-p2dpv_m{border:var(--in-fg) solid 1px;border-radius:50%;box-sizing:border-box;height:4px;margin-left:-2px;margin-top:-2px;position:absolute;width:4px}.tp-p2dpv_p:focus .tp-p2dpv_m{background-color:var(--in-fg);border-width:0}.tp-popv{background-color:var(--bs-bg);border-radius:6px;box-shadow:0 2px 4px var(--bs-sh);display:none;max-width:168px;padding:var(--cnt-v-p) var(--cnt-h-p);position:absolute;visibility:hidden;z-index:1000}.tp-popv.tp-popv-v{display:block;visibility:visible}.tp-sprv_r{background-color:var(--grv-fg);border-width:0;display:block;height:2px;margin:0;width:100%}.tp-sprv.tp-v-disabled .tp-sprv_r{opacity:.5}.tp-sldv.tp-v-disabled{opacity:.5}.tp-sldv_t{box-sizing:border-box;cursor:pointer;height:var(--bld-us);margin:0 6px;outline:none;position:relative}.tp-sldv_t::before{background-color:var(--in-bg);border-radius:1px;bottom:0;content:"";display:block;height:2px;left:0;margin:auto;position:absolute;right:0;top:0}.tp-sldv_k{height:100%;left:0;position:absolute;top:0}.tp-sldv_k::before{background-color:var(--in-fg);border-radius:1px;bottom:0;content:"";display:block;height:2px;left:0;margin-bottom:auto;margin-top:auto;position:absolute;right:0;top:0}.tp-sldv_k::after{background-color:var(--btn-bg);border-radius:var(--elm-br);bottom:0;content:"";display:block;height:12px;margin-bottom:auto;margin-top:auto;position:absolute;right:-6px;top:0;width:12px}.tp-sldv_t:hover .tp-sldv_k::after{background-color:var(--btn-bg-h)}.tp-sldv_t:focus .tp-sldv_k::after{background-color:var(--btn-bg-f)}.tp-sldv_t:active .tp-sldv_k::after{background-color:var(--btn-bg-a)}.tp-sldtxtv{display:flex}.tp-sldtxtv_s{flex:2}.tp-sldtxtv_t{flex:1;margin-left:4px}.tp-tabv{position:relative}.tp-tabv_t{align-items:flex-end;color:var(--cnt-bg);display:flex;overflow:hidden;position:relative}.tp-tabv_t:hover{color:var(--cnt-bg-h)}.tp-tabv_t:has(*:focus){color:var(--cnt-bg-f)}.tp-tabv_t:has(*:active){color:var(--cnt-bg-a)}.tp-tabv_t::before{background-color:currentColor;bottom:0;content:"";height:2px;left:0;pointer-events:none;position:absolute;right:0}.tp-tabv.tp-v-disabled .tp-tabv_t::before{opacity:.5}.tp-tabv.tp-tabv-nop .tp-tabv_t{height:calc(var(--bld-us) + 4px);position:relative}.tp-tabv.tp-tabv-nop .tp-tabv_t::before{background-color:var(--cnt-bg);bottom:0;content:"";height:2px;left:0;position:absolute;right:0}.tp-tabv_c{padding-bottom:var(--cnt-v-p);padding-left:4px;padding-top:var(--cnt-v-p)}.tp-tabv_i{bottom:0;color:var(--cnt-bg);left:0;overflow:hidden;position:absolute;top:calc(var(--bld-us) + 4px);width:var(--bs-br)}.tp-tabv_i::before{background-color:currentColor;bottom:0;content:"";left:0;position:absolute;top:0;width:4px}.tp-tabv_t:hover+.tp-tabv_i{color:var(--cnt-bg-h)}.tp-tabv_t:has(*:focus)+.tp-tabv_i{color:var(--cnt-bg-f)}.tp-tabv_t:has(*:active)+.tp-tabv_i{color:var(--cnt-bg-a)}.tp-tabv.tp-v-disabled>.tp-tabv_i{opacity:.5}.tp-tbiv{flex:1;min-width:0;position:relative}.tp-tbiv+.tp-tbiv{margin-left:2px}.tp-tbiv+.tp-tbiv.tp-v-disabled::before{opacity:.5}.tp-tbiv_b{display:block;padding-left:calc(var(--cnt-h-p) + 4px);padding-right:calc(var(--cnt-h-p) + 4px);position:relative;width:100%}.tp-tbiv_b:disabled{opacity:.5}.tp-tbiv_b::before{background-color:var(--cnt-bg);bottom:2px;content:"";left:0;pointer-events:none;position:absolute;right:0;top:0}.tp-tbiv_b:hover::before{background-color:var(--cnt-bg-h)}.tp-tbiv_b:focus::before{background-color:var(--cnt-bg-f)}.tp-tbiv_b:active::before{background-color:var(--cnt-bg-a)}.tp-tbiv_t{color:var(--cnt-fg);height:calc(var(--bld-us) + 4px);line-height:calc(var(--bld-us) + 4px);opacity:.5;overflow:hidden;text-overflow:ellipsis}.tp-tbiv.tp-tbiv-sel .tp-tbiv_t{opacity:1}.tp-txtv{position:relative}.tp-txtv_i{padding:0 4px}.tp-txtv.tp-txtv-fst .tp-txtv_i{border-bottom-right-radius:0;border-top-right-radius:0}.tp-txtv.tp-txtv-mid .tp-txtv_i{border-radius:0}.tp-txtv.tp-txtv-lst .tp-txtv_i{border-bottom-left-radius:0;border-top-left-radius:0}.tp-txtv.tp-txtv-num .tp-txtv_i{text-align:right}.tp-txtv.tp-txtv-drg .tp-txtv_i{opacity:.3}.tp-txtv_k{cursor:pointer;height:100%;left:-3px;position:absolute;top:0;width:12px}.tp-txtv_k::before{background-color:var(--in-fg);border-radius:1px;bottom:0;content:"";height:calc(var(--bld-us) - 4px);left:50%;margin-bottom:auto;margin-left:-1px;margin-top:auto;opacity:.1;position:absolute;top:0;transition:border-radius .1s,height .1s,transform .1s,width .1s;width:2px}.tp-txtv_k:hover::before,.tp-txtv.tp-txtv-drg .tp-txtv_k::before{opacity:1}.tp-txtv.tp-txtv-drg .tp-txtv_k::before{border-radius:50%;height:4px;transform:translateX(-1px);width:4px}.tp-txtv_g{bottom:0;display:block;height:8px;left:50%;margin:auto;overflow:visible;pointer-events:none;position:absolute;top:0;visibility:hidden;width:100%}.tp-txtv.tp-txtv-drg .tp-txtv_g{visibility:visible}.tp-txtv_gb{fill:none;stroke:var(--in-fg);stroke-dasharray:1}.tp-txtv_gh{fill:none;stroke:var(--in-fg)}.tp-txtv .tp-ttv{margin-left:6px;visibility:hidden}.tp-txtv.tp-txtv-drg .tp-ttv{visibility:visible}.tp-ttv{background-color:var(--in-fg);border-radius:var(--elm-br);color:var(--bs-bg);padding:2px 4px;pointer-events:none;position:absolute;transform:translate(-50%, -100%)}.tp-ttv::before{border-color:var(--in-fg) rgba(0,0,0,0) rgba(0,0,0,0) rgba(0,0,0,0);border-style:solid;border-width:2px;box-sizing:border-box;content:"";font-size:.9em;height:4px;left:50%;margin-left:-2px;position:absolute;top:100%;width:4px}.tp-rotv{background-color:var(--bs-bg);border-radius:var(--bs-br);box-shadow:0 2px 4px var(--bs-sh);font-family:var(--font-family);font-size:11px;font-weight:500;line-height:1;text-align:left}.tp-rotv_b{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br);border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br);padding-left:calc(4px + var(--bld-us) + var(--cnt-h-p));text-align:center}.tp-rotv.tp-rotv-expanded .tp-rotv_b{border-bottom-left-radius:0;border-bottom-right-radius:0}.tp-rotv.tp-rotv-not .tp-rotv_b{display:none}.tp-rotv_b:disabled .tp-rotv_m{display:none}.tp-rotv_c>.tp-fldv.tp-v-lst>.tp-fldv_c{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c>.tp-fldv.tp-v-lst>.tp-fldv_i{border-bottom-left-radius:var(--bs-br)}.tp-rotv_c>.tp-fldv.tp-v-lst:not(.tp-fldv-expanded)>.tp-fldv_b{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c .tp-fldv.tp-v-vlst:not(.tp-fldv-expanded)>.tp-fldv_b{border-bottom-right-radius:var(--bs-br)}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-fldv.tp-v-fst{margin-top:calc(-1*var(--cnt-v-p))}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-fldv.tp-v-fst>.tp-fldv_b{border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br)}.tp-rotv_c>.tp-tabv.tp-v-lst>.tp-tabv_c{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c>.tp-tabv.tp-v-lst>.tp-tabv_i{border-bottom-left-radius:var(--bs-br)}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-tabv.tp-v-fst{margin-top:calc(-1*var(--cnt-v-p))}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-tabv.tp-v-fst>.tp-tabv_t{border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br)}.tp-rotv.tp-v-disabled,.tp-rotv .tp-v-disabled{pointer-events:none}.tp-rotv.tp-v-hidden,.tp-rotv .tp-v-hidden{display:none}'),this.pool_.getAll().forEach(t=>{this.embedPluginStyle_(t)}),this.registerPlugin({plugins:[Bo,Uo,Bt,Ho]})}},Object.defineProperty(t,"__esModule",{value:!0})},"object"==typeof h.exports?d(h.exports):"function"==typeof define&&define.amd?define(["exports"],d):d((p="undefined"!=typeof globalThis?globalThis:p||self).Tweakpane={}),h=h.exports;const{shuffle:u,shuffleScroll:v,directions:m,animations:b}=c,g={text:"We chase misprinted lies",duration:2,fps:60,animation:b.SHOW,direction:m.RANDOM,nglyphs:""};let _;b.SHOW;const f=t=>{_.innerText=t},w=()=>{const{text:t,duration:e,fps:n,nglyphs:i,direction:o,animation:r}=g,s=i.length?i:void 0;u({text:t,duration:e,fps:n,glyphs:s,direction:o,animation:r,onUpdate:f})};_=document.querySelector("pre"),(()=>{let t;(t=(new h.Pane).addFolder({title:"SHUFFLE"})).addInput(g,"text"),t.addInput(g,"duration",{min:0,max:3,step:.1}),t.addInput(g,"fps",{min:1,max:60,step:1}),t.addInput(g,"animation",{options:b}),t.addInput(g,"direction",{options:m}),t.addInput(g,"nglyphs",{label:"glyphs"}),t.addButton({title:"SHUFFLE",label:"play"}).on("click",w)})(),w()}();