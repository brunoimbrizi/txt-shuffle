!function(){var createModuleFactory=function(e){var t;return function(r){return t||e(t={exports:{},parent:r},t.exports),t.exports}},_$buffer_11=createModuleFactory((function(e,t){(function(e){(function(){"use strict";t.Buffer=r,t.INSPECT_MAX_BYTES=50;function e(e){if(e>2147483647)throw new RangeError('The value "'+e+'" is invalid for option "size"');var t=new Uint8Array(e);return t.__proto__=r.prototype,t}function r(e,t,r){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return a(e)}return n(e,t,r)}function n(t,n,i){if("string"==typeof t)return function(t,n){if("string"==typeof n&&""!==n||(n="utf8"),!r.isEncoding(n))throw new TypeError("Unknown encoding: "+n);var i=0|u(t,n),a=e(i),o=a.write(t,n);return o!==i&&(a=a.slice(0,o)),a}(t,n);if(ArrayBuffer.isView(t))return o(t);if(null==t)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(L(t,ArrayBuffer)||t&&L(t.buffer,ArrayBuffer))return function(e,t,n){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(n||0))throw new RangeError('"length" is outside of buffer bounds');var i;return(i=void 0===t&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,t):new Uint8Array(e,t,n)).__proto__=r.prototype,i}(t,n,i);if("number"==typeof t)throw new TypeError('The "value" argument must not be of type number. Received type number');var a=t.valueOf&&t.valueOf();if(null!=a&&a!==t)return r.from(a,n,i);var l=function(t){if(r.isBuffer(t)){var n=0|s(t.length),i=e(n);return 0===i.length||t.copy(i,0,0,n),i}return void 0!==t.length?"number"!=typeof t.length||O(t.length)?e(0):o(t):"Buffer"===t.type&&Array.isArray(t.data)?o(t.data):void 0}(t);if(l)return l;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof t[Symbol.toPrimitive])return r.from(t[Symbol.toPrimitive]("string"),n,i);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}function i(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function a(t){return i(t),e(t<0?0:0|s(t))}function o(t){for(var r=t.length<0?0:0|s(t.length),n=e(r),i=0;i<r;i+=1)n[i]=255&t[i];return n}function s(e){if(e>=2147483647)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+2147483647..toString(16)+" bytes");return 0|e}function u(e,t){if(r.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||L(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var n=e.length,i=arguments.length>2&&!0===arguments[2];if(!i&&0===n)return 0;for(var a=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return $(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return V(e).length;default:if(a)return i?-1:$(e).length;t=(""+t).toLowerCase(),a=!0}}function l(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function c(e,t,n,i,a){if(0===e.length)return-1;if("string"==typeof n?(i=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),O(n=+n)&&(n=a?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(a)return-1;n=e.length-1}else if(n<0){if(!a)return-1;n=0}if("string"==typeof t&&(t=r.from(t,i)),r.isBuffer(t))return 0===t.length?-1:f(e,t,n,i,a);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?a?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):f(e,[t],n,i,a);throw new TypeError("val must be string, number or Buffer")}function f(e,t,r,n,i){var a,o=1,s=e.length,u=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;o=2,s/=2,u/=2,r/=2}function l(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}if(i){var c=-1;for(a=r;a<s;a++)if(l(e,a)===l(t,-1===c?0:a-c)){if(-1===c&&(c=a),a-c+1===u)return c*o}else-1!==c&&(a-=a-c),c=-1}else for(r+u>s&&(r=s-u),a=r;a>=0;a--){for(var f=!0,h=0;h<u;h++)if(l(e,a+h)!==l(t,h)){f=!1;break}if(f)return a}return-1}function h(e,t,r,n){r=Number(r)||0;var i=e.length-r;n?(n=Number(n))>i&&(n=i):n=i;var a=t.length;n>a/2&&(n=a/2);for(var o=0;o<n;++o){var s=parseInt(t.substr(2*o,2),16);if(O(s))return o;e[r+o]=s}return o}function p(e,t,r,n){return D($(t,e.length-r),e,r,n)}function d(e,t,r,n){return D(function(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,n)}function m(e,t,r,n){return d(e,t,r,n)}function v(e,t,r,n){return D(V(t),e,r,n)}function g(e,t,r,n){return D(function(e,t){for(var r,n,i,a=[],o=0;o<e.length&&!((t-=2)<0);++o)n=(r=e.charCodeAt(o))>>8,i=r%256,a.push(i),a.push(n);return a}(t,e.length-r),e,r,n)}function b(e,t,r){return 0===t&&r===e.length?_$base64Js_10.fromByteArray(e):_$base64Js_10.fromByteArray(e.slice(t,r))}function y(e,t,r){r=Math.min(e.length,r);for(var n=[],i=t;i<r;){var a,o,s,u,l=e[i],c=null,f=l>239?4:l>223?3:l>191?2:1;if(i+f<=r)switch(f){case 1:l<128&&(c=l);break;case 2:128==(192&(a=e[i+1]))&&(u=(31&l)<<6|63&a)>127&&(c=u);break;case 3:a=e[i+1],o=e[i+2],128==(192&a)&&128==(192&o)&&(u=(15&l)<<12|(63&a)<<6|63&o)>2047&&(u<55296||u>57343)&&(c=u);break;case 4:a=e[i+1],o=e[i+2],s=e[i+3],128==(192&a)&&128==(192&o)&&128==(192&s)&&(u=(15&l)<<18|(63&a)<<12|(63&o)<<6|63&s)>65535&&u<1114112&&(c=u)}null===c?(c=65533,f=1):c>65535&&(c-=65536,n.push(c>>>10&1023|55296),c=56320|1023&c),n.push(c),i+=f}return function(e){var t=e.length;if(t<=_)return String.fromCharCode.apply(String,e);for(var r="",n=0;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=_));return r}(n)}r.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()}catch(t){return!1}}(),r.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(r.prototype,"parent",{enumerable:!0,get:function(){if(r.isBuffer(this))return this.buffer}}),Object.defineProperty(r.prototype,"offset",{enumerable:!0,get:function(){if(r.isBuffer(this))return this.byteOffset}}),"undefined"!=typeof Symbol&&null!=Symbol.species&&r[Symbol.species]===r&&Object.defineProperty(r,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),r.poolSize=8192,r.from=function(e,t,r){return n(e,t,r)},r.prototype.__proto__=Uint8Array.prototype,r.__proto__=Uint8Array,r.alloc=function(t,r,n){return function(t,r,n){return i(t),t<=0?e(t):void 0!==r?"string"==typeof n?e(t).fill(r,n):e(t).fill(r):e(t)}(t,r,n)},r.allocUnsafe=function(e){return a(e)},r.allocUnsafeSlow=function(e){return a(e)},r.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==r.prototype},r.compare=function(e,t){if(L(e,Uint8Array)&&(e=r.from(e,e.offset,e.byteLength)),L(t,Uint8Array)&&(t=r.from(t,t.offset,t.byteLength)),!r.isBuffer(e)||!r.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var n=e.length,i=t.length,a=0,o=Math.min(n,i);a<o;++a)if(e[a]!==t[a]){n=e[a],i=t[a];break}return n<i?-1:i<n?1:0},r.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},r.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return r.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var i=r.allocUnsafe(t),a=0;for(n=0;n<e.length;++n){var o=e[n];if(L(o,Uint8Array)&&(o=r.from(o)),!r.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(i,a),a+=o.length}return i},r.byteLength=u,r.prototype._isBuffer=!0,r.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)l(this,t,t+1);return this},r.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)l(this,t,t+3),l(this,t+1,t+2);return this},r.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)l(this,t,t+7),l(this,t+1,t+6),l(this,t+2,t+5),l(this,t+3,t+4);return this},r.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?y(this,0,e):function(e,t,r){var n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return E(this,t,r);case"utf8":case"utf-8":return y(this,t,r);case"ascii":return w(this,t,r);case"latin1":case"binary":return x(this,t,r);case"base64":return b(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}.apply(this,arguments)},r.prototype.toLocaleString=r.prototype.toString,r.prototype.equals=function(e){if(!r.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===r.compare(this,e)},r.prototype.inspect=function(){var e="",r=t.INSPECT_MAX_BYTES;return e=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(e+=" ... "),"<Buffer "+e+">"},r.prototype.compare=function(e,t,n,i,a){if(L(e,Uint8Array)&&(e=r.from(e,e.offset,e.byteLength)),!r.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===i&&(i=0),void 0===a&&(a=this.length),t<0||n>e.length||i<0||a>this.length)throw new RangeError("out of range index");if(i>=a&&t>=n)return 0;if(i>=a)return-1;if(t>=n)return 1;if(this===e)return 0;for(var o=(a>>>=0)-(i>>>=0),s=(n>>>=0)-(t>>>=0),u=Math.min(o,s),l=this.slice(i,a),c=e.slice(t,n),f=0;f<u;++f)if(l[f]!==c[f]){o=l[f],s=c[f];break}return o<s?-1:s<o?1:0},r.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},r.prototype.indexOf=function(e,t,r){return c(this,e,t,r,!0)},r.prototype.lastIndexOf=function(e,t,r){return c(this,e,t,r,!1)},r.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var i=this.length-t;if((void 0===r||r>i)&&(r=i),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var a=!1;;)switch(n){case"hex":return h(this,e,t,r);case"utf8":case"utf-8":return p(this,e,t,r);case"ascii":return d(this,e,t,r);case"latin1":case"binary":return m(this,e,t,r);case"base64":return v(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return g(this,e,t,r);default:if(a)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),a=!0}},r.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var _=4096;function w(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(127&e[i]);return n}function x(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(e[i]);return n}function E(e,t,r){var n,i=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>i)&&(r=i);for(var a="",o=t;o<r;++o)a+=(n=e[o])<16?"0"+n.toString(16):n.toString(16);return a}function A(e,t,r){for(var n=e.slice(t,r),i="",a=0;a<n.length;a+=2)i+=String.fromCharCode(n[a]+256*n[a+1]);return i}function C(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function k(e,t,n,i,a,o){if(!r.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>a||t<o)throw new RangeError('"value" argument is out of bounds');if(n+i>e.length)throw new RangeError("Index out of range")}function M(e,t,r,n,i,a){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function P(e,t,r,n,i){return t=+t,r>>>=0,i||M(e,0,r,4),_$ieee754_70.write(e,t,r,n,23,4),r+4}function T(e,t,r,n,i){return t=+t,r>>>=0,i||M(e,0,r,8),_$ieee754_70.write(e,t,r,n,52,8),r+8}r.prototype.slice=function(e,t){var n=this.length;(e=~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e);var i=this.subarray(e,t);return i.__proto__=r.prototype,i},r.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||C(e,t,this.length);for(var n=this[e],i=1,a=0;++a<t&&(i*=256);)n+=this[e+a]*i;return n},r.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||C(e,t,this.length);for(var n=this[e+--t],i=1;t>0&&(i*=256);)n+=this[e+--t]*i;return n},r.prototype.readUInt8=function(e,t){return e>>>=0,t||C(e,1,this.length),this[e]},r.prototype.readUInt16LE=function(e,t){return e>>>=0,t||C(e,2,this.length),this[e]|this[e+1]<<8},r.prototype.readUInt16BE=function(e,t){return e>>>=0,t||C(e,2,this.length),this[e]<<8|this[e+1]},r.prototype.readUInt32LE=function(e,t){return e>>>=0,t||C(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},r.prototype.readUInt32BE=function(e,t){return e>>>=0,t||C(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},r.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||C(e,t,this.length);for(var n=this[e],i=1,a=0;++a<t&&(i*=256);)n+=this[e+a]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*t)),n},r.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||C(e,t,this.length);for(var n=t,i=1,a=this[e+--n];n>0&&(i*=256);)a+=this[e+--n]*i;return a>=(i*=128)&&(a-=Math.pow(2,8*t)),a},r.prototype.readInt8=function(e,t){return e>>>=0,t||C(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},r.prototype.readInt16LE=function(e,t){e>>>=0,t||C(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},r.prototype.readInt16BE=function(e,t){e>>>=0,t||C(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},r.prototype.readInt32LE=function(e,t){return e>>>=0,t||C(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},r.prototype.readInt32BE=function(e,t){return e>>>=0,t||C(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},r.prototype.readFloatLE=function(e,t){return e>>>=0,t||C(e,4,this.length),_$ieee754_70.read(this,e,!0,23,4)},r.prototype.readFloatBE=function(e,t){return e>>>=0,t||C(e,4,this.length),_$ieee754_70.read(this,e,!1,23,4)},r.prototype.readDoubleLE=function(e,t){return e>>>=0,t||C(e,8,this.length),_$ieee754_70.read(this,e,!0,52,8)},r.prototype.readDoubleBE=function(e,t){return e>>>=0,t||C(e,8,this.length),_$ieee754_70.read(this,e,!1,52,8)},r.prototype.writeUIntLE=function(e,t,r,n){e=+e,t>>>=0,r>>>=0,n||k(this,e,t,r,Math.pow(2,8*r)-1,0);var i=1,a=0;for(this[t]=255&e;++a<r&&(i*=256);)this[t+a]=e/i&255;return t+r},r.prototype.writeUIntBE=function(e,t,r,n){e=+e,t>>>=0,r>>>=0,n||k(this,e,t,r,Math.pow(2,8*r)-1,0);var i=r-1,a=1;for(this[t+i]=255&e;--i>=0&&(a*=256);)this[t+i]=e/a&255;return t+r},r.prototype.writeUInt8=function(e,t,r){return e=+e,t>>>=0,r||k(this,e,t,1,255,0),this[t]=255&e,t+1},r.prototype.writeUInt16LE=function(e,t,r){return e=+e,t>>>=0,r||k(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},r.prototype.writeUInt16BE=function(e,t,r){return e=+e,t>>>=0,r||k(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},r.prototype.writeUInt32LE=function(e,t,r){return e=+e,t>>>=0,r||k(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},r.prototype.writeUInt32BE=function(e,t,r){return e=+e,t>>>=0,r||k(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},r.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t>>>=0,!n){var i=Math.pow(2,8*r-1);k(this,e,t,r,i-1,-i)}var a=0,o=1,s=0;for(this[t]=255&e;++a<r&&(o*=256);)e<0&&0===s&&0!==this[t+a-1]&&(s=1),this[t+a]=(e/o>>0)-s&255;return t+r},r.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t>>>=0,!n){var i=Math.pow(2,8*r-1);k(this,e,t,r,i-1,-i)}var a=r-1,o=1,s=0;for(this[t+a]=255&e;--a>=0&&(o*=256);)e<0&&0===s&&0!==this[t+a+1]&&(s=1),this[t+a]=(e/o>>0)-s&255;return t+r},r.prototype.writeInt8=function(e,t,r){return e=+e,t>>>=0,r||k(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},r.prototype.writeInt16LE=function(e,t,r){return e=+e,t>>>=0,r||k(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},r.prototype.writeInt16BE=function(e,t,r){return e=+e,t>>>=0,r||k(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},r.prototype.writeInt32LE=function(e,t,r){return e=+e,t>>>=0,r||k(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},r.prototype.writeInt32BE=function(e,t,r){return e=+e,t>>>=0,r||k(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},r.prototype.writeFloatLE=function(e,t,r){return P(this,e,t,!0,r)},r.prototype.writeFloatBE=function(e,t,r){return P(this,e,t,!1,r)},r.prototype.writeDoubleLE=function(e,t,r){return T(this,e,t,!0,r)},r.prototype.writeDoubleBE=function(e,t,r){return T(this,e,t,!1,r)},r.prototype.copy=function(e,t,n,i){if(!r.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),i||0===i||(i=this.length),t>=e.length&&(t=e.length),t||(t=0),i>0&&i<n&&(i=n),i===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-t<i-n&&(i=e.length-t+n);var a=i-n;if(this===e&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(t,n,i);else if(this===e&&n<t&&t<i)for(var o=a-1;o>=0;--o)e[o+t]=this[o+n];else Uint8Array.prototype.set.call(e,this.subarray(n,i),t);return a},r.prototype.fill=function(e,t,n,i){if("string"==typeof e){if("string"==typeof t?(i=t,t=0,n=this.length):"string"==typeof n&&(i=n,n=this.length),void 0!==i&&"string"!=typeof i)throw new TypeError("encoding must be a string");if("string"==typeof i&&!r.isEncoding(i))throw new TypeError("Unknown encoding: "+i);if(1===e.length){var a=e.charCodeAt(0);("utf8"===i&&a<128||"latin1"===i)&&(e=a)}}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var o;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(o=t;o<n;++o)this[o]=e;else{var s=r.isBuffer(e)?e:r.from(e,i),u=s.length;if(0===u)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(o=0;o<n-t;++o)this[o+t]=s[o%u]}return this};var S=/[^+/0-9A-Za-z-_]/g;function $(e,t){var r;t=t||1/0;for(var n=e.length,i=null,a=[],o=0;o<n;++o){if((r=e.charCodeAt(o))>55295&&r<57344){if(!i){if(r>56319){(t-=3)>-1&&a.push(239,191,189);continue}if(o+1===n){(t-=3)>-1&&a.push(239,191,189);continue}i=r;continue}if(r<56320){(t-=3)>-1&&a.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(t-=3)>-1&&a.push(239,191,189);if(i=null,r<128){if((t-=1)<0)break;a.push(r)}else if(r<2048){if((t-=2)<0)break;a.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;a.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;a.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return a}function V(e){return _$base64Js_10.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(S,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function D(e,t,r,n){for(var i=0;i<n&&!(i+r>=t.length||i>=e.length);++i)t[i+r]=e[i];return i}function L(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function O(e){return e!=e}}).call(this)}).call(this,_$buffer_11({}).Buffer)})),_$seedRandom_79={};(function(e){(function(){"use strict";var t=[],r=void 0===e?window:e,n=Math.pow(256,6),i=Math.pow(2,52),a=2*i,o=Math.random;function s(e){var t,r=e.length,n=this,i=0,a=n.i=n.j=0,o=n.S=[];for(r||(e=[r++]);i<256;)o[i]=i++;for(i=0;i<256;i++)o[i]=o[a=255&a+e[i%r]+(t=o[i])],o[a]=t;(n.g=function(e){for(var t,r=0,i=n.i,a=n.j,o=n.S;e--;)t=o[i=255&i+1],r=256*r+o[255&(o[i]=o[a=255&a+t])+(o[a]=t)];return n.i=i,n.j=a,r})(256)}function u(e,t){for(var r,n=e+"",i=0;i<n.length;)t[255&i]=255&(r^=19*t[255&i])+n.charCodeAt(i++);return l(t)}function l(e){return String.fromCharCode.apply(0,e)}(_$seedRandom_79=function(e,o){if(o&&!0===o.global)return o.global=!1,Math.random=_$seedRandom_79(e,o),o.global=!0,Math.random;var c=[],f=(u(function e(t,r){var n,i=[],a=(typeof t)[0];if(r&&"o"==a)for(n in t)try{i.push(e(t[n],r-1))}catch(o){}return i.length?i:"s"==a?t:t+"\0"}(o&&o.entropy?[e,l(t)]:0 in arguments?e:function(e){try{return r.crypto.getRandomValues(e=new Uint8Array(256)),l(e)}catch(n){return[+new Date,r,r.navigator&&r.navigator.plugins,r.screen,l(t)]}}(),3),c),new s(c));return u(l(f.S),t),function(){for(var e=f.g(6),t=n,r=0;e<i;)e=256*(e+r),t*=256,r=f.g(1);for(;e>=a;)e/=2,t/=2,r>>>=1;return(e+r)/t}}).resetGlobal=function(){Math.random=o},u(Math.random(),t)}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var _$simplexNoise_80={exports:{}};!function(){"use strict";var e=.5*(Math.sqrt(3)-1),t=(3-Math.sqrt(3))/6,r=(Math.sqrt(5)-1)/4,n=(5-Math.sqrt(5))/20;function i(e){var t;t="function"==typeof e?e:e?function(){var e,t=0,r=0,n=0,i=1,a=(e=4022871197,function(t){t=t.toString();for(var r=0;r<t.length;r++){var n=.02519603282416938*(e+=t.charCodeAt(r));n-=e=n>>>0,e=(n*=e)>>>0,e+=4294967296*(n-=e)}return 2.3283064365386963e-10*(e>>>0)});t=a(" "),r=a(" "),n=a(" ");for(var o=0;o<arguments.length;o++)(t-=a(arguments[o]))<0&&(t+=1),(r-=a(arguments[o]))<0&&(r+=1),(n-=a(arguments[o]))<0&&(n+=1);return a=null,function(){var e=2091639*t+2.3283064365386963e-10*i;return t=r,r=n,n=e-(i=0|e)}}(e):Math.random,this.p=a(t),this.perm=new Uint8Array(512),this.permMod12=new Uint8Array(512);for(var r=0;r<512;r++)this.perm[r]=this.p[255&r],this.permMod12[r]=this.perm[r]%12}function a(e){var t,r=new Uint8Array(256);for(t=0;t<256;t++)r[t]=t;for(t=0;t<255;t++){var n=t+~~(e()*(256-t)),i=r[t];r[t]=r[n],r[n]=i}return r}i.prototype={grad3:new Float32Array([1,1,0,-1,1,0,1,-1,0,-1,-1,0,1,0,1,-1,0,1,1,0,-1,-1,0,-1,0,1,1,0,-1,1,0,1,-1,0,-1,-1]),grad4:new Float32Array([0,1,1,1,0,1,1,-1,0,1,-1,1,0,1,-1,-1,0,-1,1,1,0,-1,1,-1,0,-1,-1,1,0,-1,-1,-1,1,0,1,1,1,0,1,-1,1,0,-1,1,1,0,-1,-1,-1,0,1,1,-1,0,1,-1,-1,0,-1,1,-1,0,-1,-1,1,1,0,1,1,1,0,-1,1,-1,0,1,1,-1,0,-1,-1,1,0,1,-1,1,0,-1,-1,-1,0,1,-1,-1,0,-1,1,1,1,0,1,1,-1,0,1,-1,1,0,1,-1,-1,0,-1,1,1,0,-1,1,-1,0,-1,-1,1,0,-1,-1,-1,0]),noise2D:function(r,n){var i,a,o=this.permMod12,s=this.perm,u=this.grad3,l=0,c=0,f=0,h=(r+n)*e,p=Math.floor(r+h),d=Math.floor(n+h),m=(p+d)*t,v=r-(p-m),g=n-(d-m);v>g?(i=1,a=0):(i=0,a=1);var b=v-i+t,y=g-a+t,_=v-1+2*t,w=g-1+2*t,x=255&p,E=255&d,A=.5-v*v-g*g;if(A>=0){var C=3*o[x+s[E]];l=(A*=A)*A*(u[C]*v+u[C+1]*g)}var k=.5-b*b-y*y;if(k>=0){var M=3*o[x+i+s[E+a]];c=(k*=k)*k*(u[M]*b+u[M+1]*y)}var P=.5-_*_-w*w;if(P>=0){var T=3*o[x+1+s[E+1]];f=(P*=P)*P*(u[T]*_+u[T+1]*w)}return 70*(l+c+f)},noise3D:function(e,t,r){var n,i,a,o,s,u,l,c,f,h,p=this.permMod12,d=this.perm,m=this.grad3,v=(e+t+r)*(1/3),g=Math.floor(e+v),b=Math.floor(t+v),y=Math.floor(r+v),_=(g+b+y)*(1/6),w=e-(g-_),x=t-(b-_),E=r-(y-_);w>=x?x>=E?(s=1,u=0,l=0,c=1,f=1,h=0):w>=E?(s=1,u=0,l=0,c=1,f=0,h=1):(s=0,u=0,l=1,c=1,f=0,h=1):x<E?(s=0,u=0,l=1,c=0,f=1,h=1):w<E?(s=0,u=1,l=0,c=0,f=1,h=1):(s=0,u=1,l=0,c=1,f=1,h=0);var A=w-s+1/6,C=x-u+1/6,k=E-l+1/6,M=w-c+1/6*2,P=x-f+1/6*2,T=E-h+1/6*2,S=w-1+.5,$=x-1+.5,V=E-1+.5,D=255&g,L=255&b,O=255&y,j=.6-w*w-x*x-E*E;if(j<0)n=0;else{var I=3*p[D+d[L+d[O]]];n=(j*=j)*j*(m[I]*w+m[I+1]*x+m[I+2]*E)}var F=.6-A*A-C*C-k*k;if(F<0)i=0;else{var B=3*p[D+s+d[L+u+d[O+l]]];i=(F*=F)*F*(m[B]*A+m[B+1]*C+m[B+2]*k)}var R=.6-M*M-P*P-T*T;if(R<0)a=0;else{var z=3*p[D+c+d[L+f+d[O+h]]];a=(R*=R)*R*(m[z]*M+m[z+1]*P+m[z+2]*T)}var U=.6-S*S-$*$-V*V;if(U<0)o=0;else{var N=3*p[D+1+d[L+1+d[O+1]]];o=(U*=U)*U*(m[N]*S+m[N+1]*$+m[N+2]*V)}return 32*(n+i+a+o)},noise4D:function(e,t,i,a){var o,s,u,l,c,f,h,p,d,m,v,g,b,y,_,w,x,E=this.perm,A=this.grad4,C=(e+t+i+a)*r,k=Math.floor(e+C),M=Math.floor(t+C),P=Math.floor(i+C),T=Math.floor(a+C),S=(k+M+P+T)*n,$=e-(k-S),V=t-(M-S),D=i-(P-S),L=a-(T-S),O=0,j=0,I=0,F=0;$>V?O++:j++,$>D?O++:I++,$>L?O++:F++,V>D?j++:I++,V>L?j++:F++,D>L?I++:F++;var B=$-(f=O>=3?1:0)+n,R=V-(h=j>=3?1:0)+n,z=D-(p=I>=3?1:0)+n,U=L-(d=F>=3?1:0)+n,N=$-(m=O>=2?1:0)+2*n,q=V-(v=j>=2?1:0)+2*n,H=D-(g=I>=2?1:0)+2*n,K=L-(b=F>=2?1:0)+2*n,G=$-(y=O>=1?1:0)+3*n,W=V-(_=j>=1?1:0)+3*n,Y=D-(w=I>=1?1:0)+3*n,Q=L-(x=F>=1?1:0)+3*n,X=$-1+4*n,J=V-1+4*n,Z=D-1+4*n,ee=L-1+4*n,te=255&k,re=255&M,ne=255&P,ie=255&T,ae=.6-$*$-V*V-D*D-L*L;if(ae<0)o=0;else{var oe=E[te+E[re+E[ne+E[ie]]]]%32*4;o=(ae*=ae)*ae*(A[oe]*$+A[oe+1]*V+A[oe+2]*D+A[oe+3]*L)}var se=.6-B*B-R*R-z*z-U*U;if(se<0)s=0;else{var ue=E[te+f+E[re+h+E[ne+p+E[ie+d]]]]%32*4;s=(se*=se)*se*(A[ue]*B+A[ue+1]*R+A[ue+2]*z+A[ue+3]*U)}var le=.6-N*N-q*q-H*H-K*K;if(le<0)u=0;else{var ce=E[te+m+E[re+v+E[ne+g+E[ie+b]]]]%32*4;u=(le*=le)*le*(A[ce]*N+A[ce+1]*q+A[ce+2]*H+A[ce+3]*K)}var fe=.6-G*G-W*W-Y*Y-Q*Q;if(fe<0)l=0;else{var he=E[te+y+E[re+_+E[ne+w+E[ie+x]]]]%32*4;l=(fe*=fe)*fe*(A[he]*G+A[he+1]*W+A[he+2]*Y+A[he+3]*Q)}var pe=.6-X*X-J*J-Z*Z-ee*ee;if(pe<0)c=0;else{var de=E[te+1+E[re+1+E[ne+1+E[ie+1]]]]%32*4;c=(pe*=pe)*pe*(A[de]*X+A[de+1]*J+A[de+2]*Z+A[de+3]*ee)}return 27*(o+s+u+l+c)}},i._buildPermutationTable=a,"undefined"!=typeof define&&define.amd&&define((function(){return i})),void 0!==_$simplexNoise_80.exports?_$simplexNoise_80.exports.SimplexNoise=i:"undefined"!=typeof window&&(window.SimplexNoise=i),_$simplexNoise_80.exports=i}(),_$simplexNoise_80=_$simplexNoise_80.exports;var _$defined_35=function(){for(var e=0;e<arguments.length;e++)if(void 0!==arguments[e])return arguments[e]},_$random_29=function e(t){t=_$defined_35(t,null);var r,n,i,a=Math.random,o=null,s=!1;return u(t),{value:l,createRandom:function(t){return e(t)},setSeed:u,getSeed:function(){return r},getRandomSeed:function(){return String(Math.floor(1e6*Math.random()))},valueNonZero:function(){for(var e=0;0===e;)e=l();return e},permuteNoise:function(){i=c()},noise1D:function(e,t,r){if(!isFinite(e))throw new TypeError("x component for noise() must be finite");return t=_$defined_35(t,1),(r=_$defined_35(r,1))*i.noise2D(e*t,0)},noise2D:function(e,t,r,n){if(!isFinite(e))throw new TypeError("x component for noise() must be finite");if(!isFinite(t))throw new TypeError("y component for noise() must be finite");return r=_$defined_35(r,1),(n=_$defined_35(n,1))*i.noise2D(e*r,t*r)},noise3D:function(e,t,r,n,a){if(!isFinite(e))throw new TypeError("x component for noise() must be finite");if(!isFinite(t))throw new TypeError("y component for noise() must be finite");if(!isFinite(r))throw new TypeError("z component for noise() must be finite");return n=_$defined_35(n,1),(a=_$defined_35(a,1))*i.noise3D(e*n,t*n,r*n)},noise4D:function(e,t,r,n,a,o){if(!isFinite(e))throw new TypeError("x component for noise() must be finite");if(!isFinite(t))throw new TypeError("y component for noise() must be finite");if(!isFinite(r))throw new TypeError("z component for noise() must be finite");if(!isFinite(n))throw new TypeError("w component for noise() must be finite");return a=_$defined_35(a,1),(o=_$defined_35(o,1))*i.noise4D(e*a,t*a,r*a,n*a)},sign:function(){return f()?1:-1},boolean:f,chance:function(e){if("number"!=typeof(e=_$defined_35(e,.5)))throw new TypeError("expected n to be a number");return l()<e},range:h,rangeFloor:p,pick:function(e){return 0===e.length?void 0:e[p(0,e.length)]},shuffle:function(e){if(!Array.isArray(e))throw new TypeError("Expected Array, got "+typeof e);for(var t,r,n=e.length,i=e.slice();n;)t=Math.floor(l()*n--),r=i[n],i[n]=i[t],i[t]=r;return i},onCircle:d,insideCircle:function(e,t){e=_$defined_35(e,1),d(1,t=t||[]);var r=e*Math.sqrt(l());return t[0]*=r,t[1]*=r,t},onSphere:function(e,t){e=_$defined_35(e,1),t=t||[];var r=l()*Math.PI*2,n=2*l()-1,i=r,a=Math.acos(n);return t[0]=e*Math.sin(a)*Math.cos(i),t[1]=e*Math.sin(a)*Math.sin(i),t[2]=e*Math.cos(a),t},insideSphere:function(e,t){e=_$defined_35(e,1),t=t||[];var r=l()*Math.PI*2,n=2*l()-1,i=l(),a=r,o=Math.acos(n),s=e*Math.cbrt(i);return t[0]=s*Math.sin(o)*Math.cos(a),t[1]=s*Math.sin(o)*Math.sin(a),t[2]=s*Math.cos(o),t},quaternion:function(e){e=e||[];var t=l(),r=l(),n=l(),i=Math.sqrt(1-t),a=Math.sqrt(t),o=2*Math.PI*r,s=2*Math.PI*n,u=Math.sin(o)*i,c=Math.cos(o)*i,f=Math.sin(s)*a,h=Math.cos(s)*a;return e[0]=u,e[1]=c,e[2]=f,e[3]=h,e},weighted:v,weightedSet:function(e){return 0===(e=e||[]).length?null:e[m(e)].value},weightedSetIndex:m,gaussian:function(e,t){if(e=_$defined_35(e,0),t=_$defined_35(t,1),s){s=!1;var r=o;return o=null,e+t*r}var n=0,i=0,a=0;do{a=(n=2*l()-1)*n+(i=2*l()-1)*i}while(a>=1||0===a);var u=Math.sqrt(-2*Math.log(a)/a);return o=i*u,s=!0,e+t*(n*u)}};function u(e,t){"number"==typeof e||"string"==typeof e?n=_$seedRandom_79(r=e,t):(r=void 0,n=a),i=c(),o=null,s=!1}function l(){return n()}function c(){return new _$simplexNoise_80(n)}function f(){return l()>.5}function h(e,t){if(void 0===t&&(t=e,e=0),"number"!=typeof e||"number"!=typeof t)throw new TypeError("Expected all arguments to be numbers");return l()*(t-e)+e}function p(e,t){if(void 0===t&&(t=e,e=0),"number"!=typeof e||"number"!=typeof t)throw new TypeError("Expected all arguments to be numbers");return Math.floor(h(e,t))}function d(e,t){e=_$defined_35(e,1),t=t||[];var r=2*l()*Math.PI;return t[0]=e*Math.cos(r),t[1]=e*Math.sin(r),t}function m(e){return 0===(e=e||[]).length?-1:v(e.map((function(e){return e.weight})))}function v(e){if(0===(e=e||[]).length)return-1;var t,r=0;for(t=0;t<e.length;t++)r+=e[t];if(r<=0)throw new Error("Weights must sum to > 0");var n=l()*r;for(t=0;t<e.length;t++){if(n<e[t])return t;n-=e[t]}return 0}}(),_$wrap_26=function(e,t,r){if("number"!=typeof t||"number"!=typeof r)throw new TypeError('Must specify "to" and "from" arguments as numbers');if(t>r){var n=t;t=r,r=n}var i=r-t;return 0===i?r:e-i*Math.floor((e-t)/i)},EPSILON=Number.EPSILON;function clamp(e,t,r){return t<r?e<t?t:e>r?r:e:e<r?r:e>t?t:e}function lerp(e,t,r){return e*(1-r)+t*r}function inverseLerp(e,t,r){return Math.abs(e-t)<EPSILON?0:(r-e)/(t-e)}function toFinite(e,t){return t=_$defined_35(t,0),"number"==typeof e&&isFinite(e)?e:t}function expandVector(e){if("number"!=typeof e)throw new TypeError("Expected dims argument");return function(t,r){var n;r=_$defined_35(r,0),null==t?n=r:"number"==typeof t&&isFinite(t)&&(n=t);var i,a=[];if(null==n)for(i=0;i<e;i++)a[i]=toFinite(t[i],r);else for(i=0;i<e;i++)a[i]=n;return a}}function lerpArray(e,t,r,n){if(n=n||[],e.length!==t.length)throw new TypeError("min and max array are expected to have the same length");for(var i=0;i<e.length;i++)n[i]=lerp(e[i],t[i],r);return n}function newArray(e,t){if("number"!=typeof(e=_$defined_35(e,0)))throw new TypeError("Expected n argument to be a number");for(var r=[],n=0;n<e;n++)r.push(t);return r}function mod(e,t){return(e%t+t)%t}function damp(e,t,r,n){return lerp(e,t,1-Math.exp(-r*n))}var _$math_27={mod:mod,fract:function(e){return e-Math.floor(e)},sign:function(e){return e>0?1:e<0?-1:0},degToRad:function(e){return e*Math.PI/180},radToDeg:function(e){return 180*e/Math.PI},wrap:_$wrap_26,pingPong:function(e,t){return e=mod(e,2*t),t-Math.abs(e-t)},linspace:function(e,t){if("number"!=typeof(e=_$defined_35(e,0)))throw new TypeError("Expected n argument to be a number");"boolean"==typeof(t=t||{})&&(t={endpoint:!0});var r=_$defined_35(t.offset,0);return t.endpoint?newArray(e).map((function(t,n){return e<=1?0:(n+r)/(e-1)})):newArray(e).map((function(t,n){return(n+r)/e}))},lerp:lerp,lerpArray:lerpArray,inverseLerp:inverseLerp,lerpFrames:function(e,t,r){t=clamp(t,0,1);var n=e.length-1,i=t*n,a=Math.floor(i),o=i-a,s=Math.min(a+1,n),u=e[a%e.length],l=e[s%e.length];if("number"==typeof u&&"number"==typeof l)return lerp(u,l,o);if(Array.isArray(u)&&Array.isArray(l))return lerpArray(u,l,o,r);throw new TypeError("Mismatch in value type of two array elements: "+a+" and "+s)},clamp:clamp,clamp01:function(e){return clamp(e,0,1)},smoothstep:function(e,t,r){var n=clamp(inverseLerp(e,t,r),0,1);return n*n*(3-2*n)},damp:damp,dampArray:function(e,t,r,n,i){i=i||[];for(var a=0;a<e.length;a++)i[a]=damp(e[a],t[a],r,n);return i},mapRange:function(e,t,r,n,i,a){if(Math.abs(t-r)<EPSILON)return n;var o=(e-t)/(r-t)*(i-n)+n;return a&&(i<n?o<i?o=i:o>n&&(o=n):o>i?o=i:o<n&&(o=n)),o},expand2D:expandVector(2),expand3D:expandVector(3),expand4D:expandVector(4)},_$cssColorNames_18={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},_$floatHsl2rgb_68=function(e){var t,r,n,i,a,o=e[0],s=e[1],u=e[2];if(0===s)return[a=u,a,a];t=2*u-(r=u<.5?u*(1+s):u+s-u*s),i=[0,0,0];for(var l=0;l<3;l++)(n=o+1/3*-(l-1))<0&&n++,n>1&&n--,a=6*n<1?t+6*(r-t)*n:2*n<1?r:3*n<2?t+(r-t)*(2/3-n)*6:t,i[l]=a;return i},_$floatRgb2hsl_69=function(e){var t,r,n=e[0],i=e[1],a=e[2],o=Math.min(n,i,a),s=Math.max(n,i,a),u=s-o;return s===o?t=0:n===s?t=(i-a)/u:i===s?t=2+(a-n)/u:a===s&&(t=4+(n-i)/u),(t=Math.min(60*t,360))<0&&(t+=360),r=(o+s)/2,[t/360,s===o?0:r<=.5?u/(s+o):u/(2-s-o),r]},_$hsl_21={RGBAToHSLA:function(e){var t=_$floatRgb2hsl_69([e[0]/255,e[1]/255,e[2]/255]);return[Math.max(0,Math.min(360,Math.round(360*t[0]))),Math.max(0,Math.min(100,Math.round(100*t[1]))),Math.max(0,Math.min(100,Math.round(100*t[2]))),e[3]]},HSLAToRGBA:function(e){var t=_$wrap_26(e[0],0,360),r=_$floatHsl2rgb_68([t/360,e[1]/100,e[2]/100]);return[Math.max(0,Math.min(255,Math.round(255*r[0]))),Math.max(0,Math.min(255,Math.round(255*r[1]))),Math.max(0,Math.min(255,Math.round(255*r[2]))),e[3]]}},_$hexToRgba_20=function(e){if("string"!=typeof e)throw new TypeError("Hex code parsing must be performed on a string parameter");if(e=e.toLowerCase(),!/^#[a-f0-9]+$/.test(e))return null;var t=e.replace(/^#/,""),r=1;8===t.length&&(r=parseInt(t.slice(6,8),16)/255,t=t.slice(0,6)),4===t.length&&(r=parseInt(t.slice(3,4).repeat(2),16)/255,t=t.slice(0,3)),3===t.length&&(t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]);var n=parseInt(t,16);return[n>>16,n>>8&255,255&n,r]},_$rgbaToHex_24=function(e){if(!e||!Array.isArray(e))throw new TypeError("Must specify an array to convert into a hex code");var t=Math.max(0,Math.min(255,Math.round(e[0]||0))),r=Math.max(0,Math.min(255,Math.round(e[1]||0))),n=Math.max(0,Math.min(255,Math.round(e[2]||0))),i=e[3];void 0!==i&&isFinite(i)||(i=1);var a=Math.max(0,Math.min(255,Math.round(255*i))),o=255===a?"":(256|a).toString(16).slice(1);return"#"+((n|r<<8|t<<16|1<<24).toString(16).slice(1)+o)},_$cssColor_19={};function parseStyle(e){if("string"!=typeof e)throw new TypeError("Color parsing must be performed on a string parameter");var t,r,n;if((e=e.toLowerCase())in _$cssColorNames_18?e=_$cssColorNames_18[e]:"transparent"===e&&(e="#00000000"),/^#[a-f0-9]+$/.test(e))t=_$hexToRgba_20(e),n=_$rgbaToHex_24(t),r=_$hsl_21.RGBAToHSLA(t);else{var i=/^((?:rgb|hsl)a?)\s*\(([^)]*)\)/.exec(e);if(!i)return null;var a=i[1].replace(/a$/,""),o=i[2].replace(/^\s+|\s+$/g,"").split(/\s*,\s*/).map((function(e,t){return t<=2?Math.round(parseFloat(e)||0):("number"==typeof(e=parseFloat(e))&&isFinite(e)||(e=1),e)}));void 0!==o[3]&&isFinite(o[3])||(o[3]=1),"rgb"===a?(r=_$hsl_21.RGBAToHSLA(o),t=o):"hsl"===a&&(t=_$hsl_21.HSLAToRGBA(o),o[0]=_$wrap_26(o[0],0,360),r=o),n=_$rgbaToHex_24(t)}return t||n||r?{hex:n,alpha:t[3],rgb:t.slice(0,3),rgba:t,hsl:r.slice(0,3),hsla:r}:null}function rgbStyle(e,t,r,n){return e=Math.max(0,Math.min(255,Math.round(e))),t=Math.max(0,Math.min(255,Math.round(t))),r=Math.max(0,Math.min(255,Math.round(r))),1!==n&&isFinite(n)&&void 0!==n?"rgba("+[e,t,r,n=Math.max(0,Math.min(1,n))].join(", ")+")":"rgb("+[e,t,r].join(", ")+")"}function hslStyle(e,t,r,n){return e=_$wrap_26(e,0,360),e=Math.max(0,Math.min(360,Math.round(e))),t=Math.max(0,Math.min(100,Math.round(t))),r=Math.max(0,Math.min(100,Math.round(r))),1!==n&&isFinite(n)&&void 0!==n?"hsla("+[e,t,r,n=Math.max(0,Math.min(1,n))].join(", ")+")":"hsl("+[e,t,r].join(", ")+")"}_$cssColor_19.parse=function(e){return"string"==typeof e?parseStyle(e):Array.isArray(e)&&e.length>=3?parseStyle(rgbStyle(e[0],e[1],e[2],e[3])):e&&"object"==typeof e&&(e.hex?t=e.hex:e.rgba?t=rgbStyle(e.rgba[0],e.rgba[1],e.rgba[2],e.rgba[3]):e.hsla?t=hslStyle(e.hsla[0],e.hsla[1],e.hsla[2],e.hsla[3]):e.rgb?t=rgbStyle(e.rgb[0],e.rgb[1],e.rgb[2]):e.hsl&&(t=hslStyle(e.hsl[0],e.hsl[1],e.hsl[2])),t)?parseStyle(t):null;var t},_$cssColor_19.style=function(e){var t=_$cssColor_19.parse(e);if(t){var r=t.rgba;return rgbStyle(r[0],r[1],r[2],r[3])}return null};var rc=.2126,gc=.7152,bc=.0722,lowc=1/12.92;function adjustGamma(e){return Math.pow((e+.055)/1.055,2.4)}var _$relativeLuminance_23=function(e){var t=e[0]/255,r=e[1]/255,n=e[2]/255,i=t<=.03928?t*lowc:adjustGamma(t),a=r<=.03928?r*lowc:adjustGamma(r),o=n<=.03928?n*lowc:adjustGamma(n);return i*rc+a*gc+o*bc},_$color_13={};_$color_13.parse=_$cssColor_19.parse,_$color_13.style=_$cssColor_19.style,_$color_13.names=_$cssColorNames_18,_$color_13.relativeLuminance=function(e){var t=_$color_13.parse(e);return t?_$relativeLuminance_23(t.rgb):null},_$color_13.contrastRatio=function(e,t){var r=_$color_13.relativeLuminance(e),n=_$color_13.relativeLuminance(t);return null==r||null==n?null:(Math.max(r,n)+.05)/(Math.min(r,n)+.05)},_$color_13.offsetHSL=function(e,t,r,n){var i=_$color_13.parse(e);return i?(i.hsla[0]+=t||0,i.hsla[1]=Math.max(0,Math.min(100,i.hsla[1]+(r||0))),i.hsla[2]=Math.max(0,Math.min(100,i.hsla[2]+(n||0))),_$color_13.parse({hsla:i.hsla})):null},_$color_13.blend=function(e,t,r){var n=_$color_13.parse(e),i=_$color_13.parse(t);if(null==n||null==i)return null;var a=n.rgba,o=i.rgba,s=(r="number"==typeof r&&isFinite(r)?r:1)*o[3];if(s>=1)return i;for(var u=0;u<3;u++)o[u]=o[u]*s+a[u]*(a[3]*(1-s));return o[3]=Math.max(0,Math.min(1,s+a[3]*(1-s))),_$color_13.parse(o)},_$color_13.hexToRGBA=_$hexToRgba_20,_$color_13.RGBAToHex=_$rgbaToHex_24,_$color_13.RGBAToHSLA=_$hsl_21.RGBAToHSLA,_$color_13.HSLAToRGBA=_$hsl_21.HSLAToRGBA;var _$lineclip_71={};function lineclip(e,t,r){var n,i,a,o,s,u=e.length,l=bitCode(e[0],t),c=[];for(r||(r=[]),n=1;n<u;n++){for(i=e[n-1],o=s=bitCode(a=e[n],t);;){if(!(l|o)){c.push(i),o!==s?(c.push(a),n<u-1&&(r.push(c),c=[])):n===u-1&&c.push(a);break}if(l&o)break;l?l=bitCode(i=intersect(i,a,l,t),t):o=bitCode(a=intersect(i,a,o,t),t)}l=s}return c.length&&r.push(c),r}function intersect(e,t,r,n){return 8&r?[e[0]+(t[0]-e[0])*(n[3]-e[1])/(t[1]-e[1]),n[3]]:4&r?[e[0]+(t[0]-e[0])*(n[1]-e[1])/(t[1]-e[1]),n[1]]:2&r?[n[2],e[1]+(t[1]-e[1])*(n[2]-e[0])/(t[0]-e[0])]:1&r?[n[0],e[1]+(t[1]-e[1])*(n[0]-e[0])/(t[0]-e[0])]:null}function bitCode(e,t){var r=0;return e[0]<t[0]?r|=1:e[0]>t[2]&&(r|=2),e[1]<t[1]?r|=4:e[1]>t[3]&&(r|=8),r}_$lineclip_71=lineclip,lineclip.polyline=lineclip,lineclip.polygon=function(e,t){var r,n,i,a,o,s,u;for(n=1;n<=8;n*=2){for(r=[],a=!(bitCode(i=e[e.length-1],t)&n),o=0;o<e.length;o++)(u=!(bitCode(s=e[o],t)&n))!==a&&r.push(intersect(i,s,n,t)),u&&r.push(s),i=s,a=u;if(!(e=r).length)break}return r};var _$almost_equal_6={},abs=Math.abs,min=Math.min;function almostEqual(e,t,r,n){var i=abs(e-t);return null==r&&(r=almostEqual.DBL_EPSILON),null==n&&(n=r),i<=r||i<=n*min(abs(e),abs(t))||e===t}almostEqual.FLT_EPSILON=1.1920929e-7,almostEqual.DBL_EPSILON=2220446049250313e-31,_$almost_equal_6=almostEqual;var str=Object.prototype.toString,_$anArray_7=function(e){return e.BYTES_PER_ELEMENT&&"[object ArrayBuffer]"===str.call(e.buffer)||Array.isArray(e)},_$almost_equal_9={},__abs_9=Math.abs,__min_9=Math.min;function __almostEqual_9(e,t,r,n){var i=__abs_9(e-t);return i<=r||i<=n*__min_9(__abs_9(e),__abs_9(t))||e===t}__almostEqual_9.FLT_EPSILON=1.1920929e-7,__almostEqual_9.DBL_EPSILON=2220446049250313e-31,_$almost_equal_9=__almostEqual_9;for(var _$arrayAlmostEqual_8=function(e,t,r,n){return!!(e&&t&&_$anArray_7(e)&&_$anArray_7(t))&&e.length===t.length&&("number"!=typeof r&&(r=_$almost_equal_9.FLT_EPSILON),"number"!=typeof n&&(n=r),Array.prototype.slice.call(e).every((function(e,i){var a=t[i];return e===a||_$almost_equal_9(e,a,r,n)})))},_$base64Js_10={toByteArray:function(e){var t,r,n=getLens(e),i=n[0],a=n[1],o=new Arr(function(e,t,r){return 3*(t+r)/4-r}(0,i,a)),s=0,u=a>0?i-4:i;for(r=0;r<u;r+=4)t=revLookup[e.charCodeAt(r)]<<18|revLookup[e.charCodeAt(r+1)]<<12|revLookup[e.charCodeAt(r+2)]<<6|revLookup[e.charCodeAt(r+3)],o[s++]=t>>16&255,o[s++]=t>>8&255,o[s++]=255&t;return 2===a&&(t=revLookup[e.charCodeAt(r)]<<2|revLookup[e.charCodeAt(r+1)]>>4,o[s++]=255&t),1===a&&(t=revLookup[e.charCodeAt(r)]<<10|revLookup[e.charCodeAt(r+1)]<<4|revLookup[e.charCodeAt(r+2)]>>2,o[s++]=t>>8&255,o[s++]=255&t),o},fromByteArray:function(e){for(var t,r=e.length,n=r%3,i=[],a=0,o=r-n;a<o;a+=16383)i.push(encodeChunk(e,a,a+16383>o?o:a+16383));return 1===n?(t=e[r-1],i.push(lookup[t>>2]+lookup[t<<4&63]+"==")):2===n&&(t=(e[r-2]<<8)+e[r-1],i.push(lookup[t>>10]+lookup[t>>4&63]+lookup[t<<2&63]+"=")),i.join("")}},lookup=[],revLookup=[],Arr="undefined"!=typeof Uint8Array?Uint8Array:Array,code="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0,len=code.length;i<len;++i)lookup[i]=code[i],revLookup[code.charCodeAt(i)]=i;function getLens(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");return-1===r&&(r=t),[r,r===t?0:4-r%4]}function encodeChunk(e,t,r){for(var n,i,a=[],o=t;o<r;o+=3)n=(e[o]<<16&16711680)+(e[o+1]<<8&65280)+(255&e[o+2]),a.push(lookup[(i=n)>>18&63]+lookup[i>>12&63]+lookup[i>>6&63]+lookup[63&i]);return a.join("")}revLookup["-".charCodeAt(0)]=62,revLookup["_".charCodeAt(0)]=63;var _$ieee754_70={read:function(e,t,r,n,i){var a,o,s=8*i-n-1,u=(1<<s)-1,l=u>>1,c=-7,f=r?i-1:0,h=r?-1:1,p=e[t+f];for(f+=h,a=p&(1<<-c)-1,p>>=-c,c+=s;c>0;a=256*a+e[t+f],f+=h,c-=8);for(o=a&(1<<-c)-1,a>>=-c,c+=n;c>0;o=256*o+e[t+f],f+=h,c-=8);if(0===a)a=1-l;else{if(a===u)return o?NaN:1/0*(p?-1:1);o+=Math.pow(2,n),a-=l}return(p?-1:1)*o*Math.pow(2,a-n)},write:function(e,t,r,n,i,a){var o,s,u,l=8*a-i-1,c=(1<<l)-1,f=c>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:a-1,d=n?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,o=c):(o=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-o))<1&&(o--,u*=2),(t+=o+f>=1?h/u:h*Math.pow(2,1-f))*u>=2&&(o++,u/=2),o+f>=c?(s=0,o=c):o+f>=1?(s=(t*u-1)*Math.pow(2,i),o+=f):(s=t*Math.pow(2,f-1)*Math.pow(2,i),o=0));i>=8;e[r+p]=255&s,p+=d,s/=256,i-=8);for(o=o<<i|s,l+=i;l>0;e[r+p]=255&o,p+=d,o/=256,l-=8);e[r+p-d]|=128*m}},_$clone_31={exports:{}};(function(e){(function(){var t=function(){"use strict";function t(e,t){return null!=t&&e instanceof t}var r,n,i;try{r=Map}catch(u){r=function(){}}try{n=Set}catch(u){n=function(){}}try{i=Promise}catch(u){i=function(){}}function a(o,u,l,c,f){"object"==typeof u&&(l=u.depth,c=u.prototype,f=u.includeNonEnumerable,u=u.circular);var h=[],p=[],d=void 0!==e;return void 0===u&&(u=!0),void 0===l&&(l=1/0),function o(l,m){if(null===l)return null;if(0===m)return l;var v,g;if("object"!=typeof l)return l;if(t(l,r))v=new r;else if(t(l,n))v=new n;else if(t(l,i))v=new i((function(e,t){l.then((function(t){e(o(t,m-1))}),(function(e){t(o(e,m-1))}))}));else if(a.__isArray(l))v=[];else if(a.__isRegExp(l))v=new RegExp(l.source,s(l)),l.lastIndex&&(v.lastIndex=l.lastIndex);else if(a.__isDate(l))v=new Date(l.getTime());else{if(d&&e.isBuffer(l))return v=e.allocUnsafe?e.allocUnsafe(l.length):new e(l.length),l.copy(v),v;t(l,Error)?v=Object.create(l):void 0===c?(g=Object.getPrototypeOf(l),v=Object.create(g)):(v=Object.create(c),g=c)}if(u){var b=h.indexOf(l);if(-1!=b)return p[b];h.push(l),p.push(v)}for(var y in t(l,r)&&l.forEach((function(e,t){var r=o(t,m-1),n=o(e,m-1);v.set(r,n)})),t(l,n)&&l.forEach((function(e){var t=o(e,m-1);v.add(t)})),l){var _;g&&(_=Object.getOwnPropertyDescriptor(g,y)),_&&null==_.set||(v[y]=o(l[y],m-1))}if(Object.getOwnPropertySymbols){var w=Object.getOwnPropertySymbols(l);for(y=0;y<w.length;y++){var x=w[y];(!(A=Object.getOwnPropertyDescriptor(l,x))||A.enumerable||f)&&(v[x]=o(l[x],m-1),A.enumerable||Object.defineProperty(v,x,{enumerable:!1}))}}if(f){var E=Object.getOwnPropertyNames(l);for(y=0;y<E.length;y++){var A,C=E[y];(A=Object.getOwnPropertyDescriptor(l,C))&&A.enumerable||(v[C]=o(l[C],m-1),Object.defineProperty(v,C,{enumerable:!1}))}}return v}(o,l)}function o(e){return Object.prototype.toString.call(e)}function s(e){var t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),t}return a.clonePrototype=function(e){if(null===e)return null;var t=function(){};return t.prototype=e,new t},a.__objToStr=o,a.__isDate=function(e){return"object"==typeof e&&"[object Date]"===o(e)},a.__isArray=function(e){return"object"==typeof e&&"[object Array]"===o(e)},a.__isRegExp=function(e){return"object"==typeof e&&"[object RegExp]"===o(e)},a.__getRegExpFlags=s,a}();_$clone_31.exports&&(_$clone_31.exports=t)}).call(this)}).call(this,_$buffer_11({}).Buffer),_$clone_31=_$clone_31.exports;var _$vec2_25={};function pointInCircle(e,t,r,n,i){return(a=r-e)*a+(o=n-t)*o<=i*i;var a,o}function distance(e,t,r,n){var i=e-r,a=t-n;return Math.sqrt(i*i+a*a)}function projectPoint(e,t,r,n,i){var a=i/distance(e,t,r,n);return[e+a*(r-e),t+a*(n-t)]}_$vec2_25.squaredDistance=function(e,t){var r=t[0]-e[0],n=t[1]-e[1];return r*r+n*n};var _$clipSegmentToCircle_17=function(e,t,r,n,i){return function(e,t,r,n,i,a,o,s){null==s&&(s=[]);var u,l,c,f,h,p=pointInCircle(e,t,i,a,o),d=pointInCircle(r,n,i,a,o);if(p&&d)return s.push([e,t]),s.push([r,n]),!0;if(p||d){u=distance(f=(c=function(e,t,r,n,i,a){var o=r-e,s=n-t,u=(o*(i-e)+s*(a-t))/(o*o+s*s);return[e+u*o,t+u*s]}(e,t,r,n,i,a))[0],h=c[1],i,a),l=Math.sqrt(o*o-u*u);var m=p?[e,t]:[r,n],v=p?projectPoint(f,h,r,n,l):projectPoint(f,h,e,t,l);return _$almost_equal_6(m[0],v[0])&&_$almost_equal_6(m[1],v[1])?(s.push(m),!0):(s.push(m),s.push(v),!0)}return f=(c=function(e,t,r,n,i,a){var o=r-e,s=n-t,u=o*(i-e)+s*(a-t);if(u<=0)return[e,t];var l=o*o+s*s;if(l<=u)return[r,n];var c=u/l;return[e+c*o,t+c*s]}(e,t,r,n,i,a))[0],h=c[1],!(_$almost_equal_6(e,f)&&_$almost_equal_6(t,h)||_$almost_equal_6(r,f)&&_$almost_equal_6(n,h)||(u=distance(f,h,i,a))>o||(_$almost_equal_6(u,o)?(s.push([f,h]),0):_$almost_equal_6(u,0)?(s.push(projectPoint(i,a,e,t,o)),s.push(projectPoint(i,a,r,n,o)),0):(l=Math.sqrt(o*o-u*u),s.push(projectPoint(f,h,e,t,l)),s.push(projectPoint(f,h,r,n,l)),0)))}(e[0],e[1],t[0],t[1],r[0],r[1],n,i)};function sqr(e){return e*e}var _$clipLineToCircle_16=function(e,t,r,n,i){null==i&&(i=[]);var a,o=sqr(t[0]-e[0])+sqr(t[1]-e[1]),s=2*((t[0]-e[0])*(e[0]-r[0])+(t[1]-e[1])*(e[1]-r[1])),u=s*s-4*o*(sqr(r[0])+sqr(r[1])+sqr(e[0])+sqr(e[1])-2*(r[0]*e[0]+r[1]*e[1])-sqr(n));if(u<0)return!1;if(_$almost_equal_6(u,0))return a=-s/(2*o),i.push([e[0]+a*(t[0]-e[0]),e[1]+a*(t[1]-e[1])]),!0;if(u>0){var l=Math.sqrt(u);return a=(-s+l)/(2*o),i.push([e[0]+a*(t[0]-e[0]),e[1]+a*(t[1]-e[1])]),a=(-s-l)/(2*o),i.push([e[0]+a*(t[0]-e[0]),e[1]+a*(t[1]-e[1])]),!0}return null},_$geometry_14={},squaredDistance=_$vec2_25.squaredDistance;_$geometry_14.arePointsCollinear=function(e,t,r){var n=e[0],i=e[1],a=t[0],o=t[1],s=r[0],u=r[1];return _$almost_equal_6((i-o)*(n-s),(i-u)*(n-a))},_$geometry_14.removeDuplicatePoints=function(e){for(var t,r=[],n=0;n<e.length;n++){var i=e[n];t&&_$arrayAlmostEqual_8(t,i)||(r.push(i),t=i)}return _$clone_31(r)},_$geometry_14.removeCollinearPoints=function(e){for(var t=[],r=_$clone_31(e);r.length>=3;){var n=r[0],i=r[1],a=r[2],o=_$geometry_14.arePointsCollinear(n,i,a);if(o&&squaredDistance(n,i)>squaredDistance(n,a)&&(o=!1),o)r.splice(1,1);else for(var s=0;s<1;s++)t.push(r.shift())}for(;r.length;)t.push(r.shift());return t},_$geometry_14.clipSegmentToCircle=_$clipSegmentToCircle_17,_$geometry_14.clipLineToCircle=_$clipLineToCircle_16,_$geometry_14.clipPolylinesToBox=function(e,t,r,n){if(!Array.isArray(t)||2!==t.length&&4!==t.length)throw new Error("Expected box to either be format [ minPoint, maxPoint ] or [ minX, minY, maxX, maxY ]");if(2===t.length){var i=t[0],a=t[1];t=[i[0],i[1],a[0],a[1]]}return n=!1!==n,(r=Boolean(r))?e.map((function(e){var r=_$lineclip_71.polygon(e,t);return n&&r.length>2&&r.push(r[0]),r})).filter((function(e){return e.length>0})):e.map((function(e){return _$lineclip_71.polyline(e,t)})).reduce((function(e,t){return e.concat(t)}),[])},_$geometry_14.createHatchLines=function(e,t,r,n){if(!Array.isArray(e)||2!==e.length&&4!==e.length)throw new Error("Expected box to either be format [ minPoint, maxPoint ] or [ minX, minY, maxX, maxY ]");if(2===e.length){var i=e[0],a=e[1];e=[i[0],i[1],a[0],a[1]]}if(null==t&&(t=-Math.PI/4),null==r&&(r=.5),null==n&&(n=[]),0===(r=Math.abs(r)))throw new Error("cannot use a spacing of zero as it will run an infinite loop!");var o=e[0],s=e[1],u=e[2],l=e[3],c=u-o,f=l-s;if(0===c||0===f)return n;for(var h=Math.sqrt(c*c+f*f)/2,p=Math.PI/2-t,d=Math.cos(p),m=Math.sin(p),v=o+c/2,g=s+f/2,b=-h;b<=h;){var y=v+b*d+h*m,_=g+b*m-h*d,w=v+b*d-h*m,x=g+b*m+h*d;b+=r,y<o&&w<o||y>u&&w>u||_<s&&x<s||_>l&&x>l||n.push([[y,_],[w,x]])}return n},_$geometry_14.getBounds=function(e){var t=e.length;if(0===t)throw new Error("Expected points to be a non-empty array");for(var r=e[0].length,n=e[0].slice(),i=e[0].slice(),a=1;a<t;++a)for(var o=e[a],s=0;s<r;++s){var u=o[s];n[s]=Math.min(n[s],u),i[s]=Math.max(i[s],u)}return[n,i]};var _$convertLength_32={},units=["mm","cm","m","pc","pt","in","ft","px"],conversions={m:{system:"metric",factor:1},cm:{system:"metric",factor:.01},mm:{system:"metric",factor:.001},pt:{system:"imperial",factor:1/72},pc:{system:"imperial",factor:1/6},in:{system:"imperial",factor:1},ft:{system:"imperial",factor:12}};const anchors={metric:{unit:"m",ratio:1/.0254},imperial:{unit:"in",ratio:.0254}};_$convertLength_32=function(e,t,r,n){if("number"!=typeof e||!isFinite(e))throw new Error("Value must be a finite number");if(!t||!r)throw new Error("Must specify from and to units");var i=_$defined_35((n=n||{}).pixelsPerInch,96),a=n.precision,o=!1!==n.roundPixel;if(t=t.toLowerCase(),r=r.toLowerCase(),-1===units.indexOf(t))throw new Error('Invalid from unit "'+t+'", must be one of: '+units.join(", "));if(-1===units.indexOf(r))throw new Error('Invalid from unit "'+r+'", must be one of: '+units.join(", "));if(t===r)return e;var s=1,u=1,l=!1;"px"===t&&(u=1/i,t="in"),"px"===r&&(l=!0,s=i,r="in");var c=conversions[t],f=conversions[r],h=e*c.factor*u;c.system!==f.system&&(h*=anchors[c.system].ratio);var p=h/f.factor*s;return l&&o?p=Math.round(p):"number"==typeof a&&isFinite(a)&&(p=function(e,t){return Number(Math.round(e+"e"+t)+"e-"+t)}(p,a)),p},_$convertLength_32.units=units;var _$src_33={};Object.defineProperty(_$src_33,"__esModule",{value:!0}),Object.defineProperty(_$src_33,"path",{enumerable:!0,get:function(){return _path.default}});var obj,_path=(obj=require("./path.js"))&&obj.__esModule?obj:{default:obj};function __clone_4(e){return[e[0],e[1]]}function vec2(e,t){return[e,t]}var _$function_4=function(e){var t="number"==typeof(e=e||{}).recursion?e.recursion:8,r="number"==typeof e.epsilon?e.epsilon:1.1920929e-7,n="number"==typeof e.pathEpsilon?e.pathEpsilon:1,i="number"==typeof e.angleEpsilon?e.angleEpsilon:.01,a=e.angleTolerance||0,o=e.cuspLimit||0;return function(e,s,u,l,c,f){f||(f=[]);var h=n/(c="number"==typeof c?c:1);return function(e,n,s,u,l,c){l.push(__clone_4(e)),function e(n,s,u,l,c,f,h,p,d,m,v){if(!(v>t)){var g=Math.PI,b=(n+u)/2,y=(s+l)/2,_=(u+c)/2,w=(l+f)/2,x=(c+h)/2,E=(f+p)/2,A=(b+_)/2,C=(y+w)/2,k=(_+x)/2,M=(w+E)/2,P=(A+k)/2,T=(C+M)/2;if(v>0){var S,$,V=h-n,D=p-s,L=Math.abs((u-h)*D-(l-p)*V),O=Math.abs((c-h)*D-(f-p)*V);if(L>r&&O>r){if((L+O)*(L+O)<=m*(V*V+D*D)){if(a<i)return void d.push(vec2(P,T));var j=Math.atan2(f-l,c-u);if((S=Math.abs(j-Math.atan2(l-s,u-n)))>=g&&(S=2*g-S),($=Math.abs(Math.atan2(p-f,h-c)-j))>=g&&($=2*g-$),S+$<a)return void d.push(vec2(P,T));if(0!==o){if(S>o)return void d.push(vec2(u,l));if($>o)return void d.push(vec2(c,f))}}}else if(L>r){if(L*L<=m*(V*V+D*D)){if(a<i)return void d.push(vec2(P,T));if((S=Math.abs(Math.atan2(f-l,c-u)-Math.atan2(l-s,u-n)))>=g&&(S=2*g-S),S<a)return d.push(vec2(u,l)),void d.push(vec2(c,f));if(0!==o&&S>o)return void d.push(vec2(u,l))}}else if(O>r){if(O*O<=m*(V*V+D*D)){if(a<i)return void d.push(vec2(P,T));if((S=Math.abs(Math.atan2(p-f,h-c)-Math.atan2(f-l,c-u)))>=g&&(S=2*g-S),S<a)return d.push(vec2(u,l)),void d.push(vec2(c,f));if(0!==o&&S>o)return void d.push(vec2(c,f))}}else if((V=P-(n+h)/2)*V+(D=T-(s+p)/2)*D<=m)return void d.push(vec2(P,T))}e(n,s,b,y,A,C,P,T,d,m,v+1),e(P,T,k,M,x,E,h,p,d,m,v+1)}}(e[0],e[1],n[0],n[1],s[0],s[1],u[0],u[1],l,c,0),l.push(__clone_4(u))}(e,s,u,l,f,h*=h),f}},_$adaptiveBezierCurve_5=_$function_4(),_$absSvgPath_3=function(e){var t=0,r=0,n=0,i=0;return e.map((function(e){var a=(e=e.slice())[0],o=a.toUpperCase();if(a!=o)switch(e[0]=o,a){case"a":e[6]+=n,e[7]+=i;break;case"v":e[1]+=i;break;case"h":e[1]+=n;break;default:for(var s=1;s<e.length;)e[s++]+=n,e[s++]+=i}switch(o){case"Z":n=t,i=r;break;case"H":n=e[1];break;case"V":i=e[1];break;case"M":n=t=e[1],i=r=e[2];break;default:n=e[e.length-2],i=e[e.length-1]}return e}))},\u03c0=Math.PI,_120=radians(120);function line(e,t,r,n){return["C",e,t,r,n,r,n]}function quadratic(e,t,r,n,i,a){return["C",e/3+2/3*r,t/3+2/3*n,i/3+2/3*r,a/3+2/3*n,i,a]}function arc(e,t,r,n,i,a,o,s,u,l){if(l)y=l[0],_=l[1],g=l[2],b=l[3];else{var c=rotate(e,t,-i);e=c.x,t=c.y;var f=(e-(s=(c=rotate(s,u,-i)).x))/2,h=(t-(u=c.y))/2,p=f*f/(r*r)+h*h/(n*n);p>1&&(r*=p=Math.sqrt(p),n*=p);var d=r*r,m=n*n,v=(a==o?-1:1)*Math.sqrt(Math.abs((d*m-d*h*h-m*f*f)/(d*h*h+m*f*f)));v==1/0&&(v=1);var g=v*r*h/n+(e+s)/2,b=v*-n*f/r+(t+u)/2,y=Math.asin(((t-b)/n).toFixed(9)),_=Math.asin(((u-b)/n).toFixed(9));(y=e<g?\u03c0-y:y)<0&&(y=2*\u03c0+y),(_=s<g?\u03c0-_:_)<0&&(_=2*\u03c0+_),o&&y>_&&(y-=2*\u03c0),!o&&_>y&&(_-=2*\u03c0)}if(Math.abs(_-y)>_120){var w=_,x=s,E=u;_=y+_120*(o&&_>y?1:-1);var A=arc(s=g+r*Math.cos(_),u=b+n*Math.sin(_),r,n,i,0,o,x,E,[_,w,g,b])}var C=Math.tan((_-y)/4),k=4/3*r*C,M=4/3*n*C,P=[2*e-(e+k*Math.sin(y)),2*t-(t-M*Math.cos(y)),s+k*Math.sin(_),u-M*Math.cos(_),s,u];if(l)return P;A&&(P=P.concat(A));for(var T=0;T<P.length;){var S=rotate(P[T],P[T+1],i);P[T++]=S.x,P[T++]=S.y}return P}function rotate(e,t,r){return{x:e*Math.cos(r)-t*Math.sin(r),y:e*Math.sin(r)+t*Math.cos(r)}}function radians(e){return e*(\u03c0/180)}var _$normalizeSvgPath_83=function(e){for(var t,r=[],n=0,i=0,a=0,o=0,s=null,u=null,l=0,c=0,f=0,h=e.length;f<h;f++){var p=e[f],d=p[0];switch(d){case"M":a=p[1],o=p[2];break;case"A":(p=arc(l,c,p[1],p[2],radians(p[3]),p[4],p[5],p[6],p[7])).unshift("C"),p.length>7&&(r.push(p.splice(0,7)),p.unshift("C"));break;case"S":var m=l,v=c;"C"!=t&&"S"!=t||(m+=m-n,v+=v-i),p=["C",m,v,p[1],p[2],p[3],p[4]];break;case"T":"Q"==t||"T"==t?(s=2*l-s,u=2*c-u):(s=l,u=c),p=quadratic(l,c,s,u,p[1],p[2]);break;case"Q":s=p[1],u=p[2],p=quadratic(l,c,p[1],p[2],p[3],p[4]);break;case"L":p=line(l,c,p[1],p[2]);break;case"H":p=line(l,c,p[1],c);break;case"V":p=line(l,c,l,p[1]);break;case"Z":p=line(l,c,a,o)}t=d,l=p[p.length-2],c=p[p.length-1],p.length>4?(n=p[p.length-4],i=p[p.length-3]):(n=l,i=c),r.push(p)}return r},_$vec2Copy_85=function(e,t){return e[0]=t[0],e[1]=t[1],e};function set(e,t,r){return e[0]=t,e[1]=r,e}var tmp1=[0,0],tmp2=[0,0],tmp3=[0,0],_$svgPathContours_82=function(e,t){var r=[],n=[],i=[0,0];return _$normalizeSvgPath_83(_$absSvgPath_3(e)).forEach((function(e,a,o){if("M"===e[0])_$vec2Copy_85(i,e.slice(1)),n.length>0&&(r.push(n),n=[]);else{if("C"!==e[0])throw new Error("illegal type in SVG: "+e[0]);!function(e,t,r,n){_$adaptiveBezierCurve_5(r,set(tmp1,n[1],n[2]),set(tmp2,n[3],n[4]),set(tmp3,n[5],n[6]),t,e)}(n,t,i,e),set(i,e[5],e[6])}})),n.length>0&&r.push(n),r},_$parseSvgPath_76=function(e){var t=[];return e.replace(segment,(function(e,r,n){var i=r.toLowerCase();for(n=function(e){var t=e.match(number);return t?t.map(Number):[]}(n),"m"==i&&n.length>2&&(t.push([r].concat(n.splice(0,2))),i="l",r="m"==r?"l":"L");;){if(n.length==length[i])return n.unshift(r),t.push(n);if(n.length<length[i])throw new Error("malformed path data");t.push([r].concat(n.splice(0,length[i])))}})),t},length={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},segment=/([astvzqmhlc])([^astvzqmhlc]*)/gi,number=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/gi,_$modules_81={};Object.defineProperty(_$modules_81,"__esModule",{value:!0}),_$modules_81.default=void 0;var _slicedToArray=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(u){i=!0,a=u}finally{try{!n&&s.return&&s.return()}finally{if(i)throw a}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},TAU=2*Math.PI,mapToEllipse=function(e,t,r,n,i,a,o){var s=e.x,u=e.y;return{x:n*(s*=t)-i*(u*=r)+a,y:i*s+n*u+o}},approxUnitArc=function(e,t){var r=1.5707963267948966===t?.551915024494:-1.5707963267948966===t?-.551915024494:4/3*Math.tan(t/4),n=Math.cos(e),i=Math.sin(e),a=Math.cos(e+t),o=Math.sin(e+t);return[{x:n-i*r,y:i+n*r},{x:a+o*r,y:o-a*r},{x:a,y:o}]},vectorAngle=function(e,t,r,n){var i=e*r+t*n;return i>1&&(i=1),i<-1&&(i=-1),(e*n-t*r<0?-1:1)*Math.acos(i)},_default=function(e){var t=e.px,r=e.py,n=e.cx,i=e.cy,a=e.rx,o=e.ry,s=e.xAxisRotation,u=void 0===s?0:s,l=e.largeArcFlag,c=void 0===l?0:l,f=e.sweepFlag,h=void 0===f?0:f,p=[];if(0===a||0===o)return[];var d=Math.sin(u*TAU/360),m=Math.cos(u*TAU/360),v=m*(t-n)/2+d*(r-i)/2,g=-d*(t-n)/2+m*(r-i)/2;if(0===v&&0===g)return[];a=Math.abs(a),o=Math.abs(o);var b=Math.pow(v,2)/Math.pow(a,2)+Math.pow(g,2)/Math.pow(o,2);b>1&&(a*=Math.sqrt(b),o*=Math.sqrt(b));var y=function(e,t,r,n,i,a,o,s,u,l,c,f){var h=Math.pow(i,2),p=Math.pow(a,2),d=Math.pow(c,2),m=Math.pow(f,2),v=h*p-h*m-p*d;v<0&&(v=0),v/=h*m+p*d;var g=(v=Math.sqrt(v)*(o===s?-1:1))*i/a*f,b=v*-a/i*c,y=l*g-u*b+(e+r)/2,_=u*g+l*b+(t+n)/2,w=(c-g)/i,x=(f-b)/a,E=(-c-g)/i,A=(-f-b)/a,C=vectorAngle(1,0,w,x),k=vectorAngle(w,x,E,A);return 0===s&&k>0&&(k-=TAU),1===s&&k<0&&(k+=TAU),[y,_,C,k]}(t,r,n,i,a,o,c,h,d,m,v,g),_=_slicedToArray(y,4),w=_[0],x=_[1],E=_[2],A=_[3],C=Math.abs(A)/(TAU/4);Math.abs(1-C)<1e-7&&(C=1);var k=Math.max(Math.ceil(C),1);A/=k;for(var M=0;M<k;M++)p.push(approxUnitArc(E,A)),E+=A;return p.map((function(e){var t=mapToEllipse(e[0],a,o,m,d,w,x),r=t.x,n=t.y,i=mapToEllipse(e[1],a,o,m,d,w,x),s=i.x,u=i.y,l=mapToEllipse(e[2],a,o,m,d,w,x);return{x1:r,y1:n,x2:s,y2:u,x:l.x,y:l.y}}))};_$modules_81.default=_default;var _$index_72={};Object.defineProperty(_$index_72,"__esModule",{value:!0}),_$index_72.default=function(e){for(var t,r=[],n=0,i=0,a=0,o=0,s=null,u=null,l=0,c=0,f=0,h=e.length;f<h;f++){var p=e[f],d=p[0];switch(d){case"M":a=p[1],o=p[2];break;case"A":var m=(0,_svgArcToCubicBezier.default)({px:l,py:c,cx:p[6],cy:p[7],rx:p[1],ry:p[2],xAxisRotation:p[3],largeArcFlag:p[4],sweepFlag:p[5]});if(!m.length)continue;for(var v,g=0;g<m.length;g++)p=["C",(v=m[g]).x1,v.y1,v.x2,v.y2,v.x,v.y],g<m.length-1&&r.push(p);break;case"S":var b=l,y=c;"C"!=t&&"S"!=t||(b+=b-n,y+=y-i),p=["C",b,y,p[1],p[2],p[3],p[4]];break;case"T":"Q"==t||"T"==t?(s=2*l-s,u=2*c-u):(s=l,u=c),p=__quadratic_72(l,c,s,u,p[1],p[2]);break;case"Q":s=p[1],u=p[2],p=__quadratic_72(l,c,p[1],p[2],p[3],p[4]);break;case"L":p=__line_72(l,c,p[1],p[2]);break;case"H":p=__line_72(l,c,p[1],c);break;case"V":p=__line_72(l,c,l,p[1]);break;case"Z":p=__line_72(l,c,a,o)}t=d,l=p[p.length-2],c=p[p.length-1],p.length>4?(n=p[p.length-4],i=p[p.length-3]):(n=l,i=c),r.push(p)}return r};var __obj_72,_svgArcToCubicBezier=(__obj_72=_$modules_81)&&__obj_72.__esModule?__obj_72:{default:__obj_72};function __line_72(e,t,r,n){return["C",e,t,r,n,r,n]}function __quadratic_72(e,t,r,n,i,a){return["C",e/3+2/3*r,t/3+2/3*n,i/3+2/3*r,a/3+2/3*n,i,a]}var _$optimizePenplotPaths_22={},__squaredDistance_22=_$vec2_25.squaredDistance;function mergePaths(e,t,r){var n=Math.min(t,r),i=Math.max(t,r),a=(e=e.slice())[n],o=e[i],s=a.concat(o.slice(1));return e.splice(i,1),e.splice(n,1,s),e}_$optimizePenplotPaths_22.sort=function(e){if(!(e=_$clone_31(e)).length)return e;var t=[];for(t.push(e[0]),e=e.slice(1);e.length;){var r=t[t.length-1],n=r[r.length-1],i=e.reduce((function(e,t,r){var i=t[0],a=t[t.length-1],o=__squaredDistance_22(n,i),s=__squaredDistance_22(n,a);return e?o<e.distance?{idx:r,distance:o,reverse:!1}:s<e.distance?{idx:r,distance:s,reverse:!0}:e:{idx:r,distance:Math.min(o,s),reverse:s<o}}),null),a=i.idx,o=i.reverse,s=e.splice(a,1)[0].slice();o&&s.reverse(),t.push(s)}return t},_$optimizePenplotPaths_22.merge=function(e,t){var r=(t=null!=t?t:.05)*t;e=_$clone_31(e);for(var n=1;n<e.length;n++){var i=e[n-1],a=e[n];__squaredDistance_22(a[0],i[i.length-1])<r&&(e=mergePaths(e,n-1,n),n-=1)}return e};var _$penplot_28={},DEFAULT_PEN_THICKNESS=.03,DEFAULT_PEN_THICKNESS_UNIT="cm",DEFAULT_PIXELS_PER_INCH=90;function pathsToSVGPaths(e,t){var r=convertToSVGPath(e,t=t||{});return(Array.isArray(r)?r:[r]).filter(Boolean)}function pathsToPolylines(e,t){var r;if(null!=(t=t||{}).curveResolution&&isFinite(t.curveResolution)&&"number"==typeof t.curveResolution)r=t.curveResolution;else{var n=t.units||"px";r=Math.max(1,_$convertLength_32(4,n,"px"))}var i=[];return eachPath(e,(function(e){if("string"==typeof e){var t=_$parseSvgPath_76(e);_$svgPathContours_82(t,r).forEach((function(e){i.push(e)}))}else{var n=e.map((function(e){return[e[0]||0,e[1]||0]}));i.push(n)}})),i}function pathsToSVG(e,t){var r=(t=t||{}).width,n=t.height;if(void 0===r||void 0===n)throw new Error('Must specify "width" and "height" options');var i=t.units||"px",a={units:i,viewUnits:"px",roundPixel:!1,precision:_$defined_35(t.precision,5),pixelsPerInch:DEFAULT_PIXELS_PER_INCH};if(e=pathsToPolylines(e,Object.assign({},a,{curveResolution:t.curveResolution||void 0})),t.optimize){var o="object"==typeof t.optimize?t.optimize:{sort:!0,merge:!0,removeDuplicates:!0,removeCollinear:!0},s=!1!==o.sort,u=!1!==o.merge,l=!1!==o.removeDuplicates,c=!1!==o.removeCollinear;if(l&&(e=e.map((function(e){return _$geometry_14.removeDuplicatePoints(e)}))),c&&(e=e.map((function(e){return _$geometry_14.removeCollinearPoints(e)}))),s&&(e=_$optimizePenplotPaths_22.sort(e)),u){var f=null!=o.mergeThreshold?o.mergeThreshold:_$convertLength_32(.25,"mm",i,{pixelsPerInch:DEFAULT_PIXELS_PER_INCH});e=_$optimizePenplotPaths_22.merge(e,f)}}var h=pathsToSVGPaths(e,a),p=_$convertLength_32(r,i,"px",a).toString(),d=_$convertLength_32(n,i,"px",a).toString(),m=t.fillStyle||"none",v=t.strokeStyle||"black",g=t.lineWidth,b=t.lineJoin,y=t.lineCap;void 0===g&&(g=_$convertLength_32(DEFAULT_PEN_THICKNESS,DEFAULT_PEN_THICKNESS_UNIT,i,a).toString());var _=h.map((function(e){return"    <path "+toAttrList([["d",e]])+" />"})).join("\n");return['<?xml version="1.0" standalone="no"?>','<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ','    "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">','<svg width="'+r+i+'" height="'+n+i+'"','    xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 '+p+" "+d+'">',"  <g "+toAttrList([["fill",m],["stroke",v],["stroke-width",g+""+i],!!b&&["stroke-linejoin",b],!!y&&["stroke-linecap",y]])+">",_,"  </g>","</svg>"].join("\n")}function toAttrList(e){return e.filter(Boolean).map((function(e){return e[0]+'="'+e[1]+'"'})).join(" ")}function renderPaths(e,t){var r=(t=t||{}).context;if(!r)throw new Error('Must specify "context" options');var n=t.units||"px",i=t.width,a=t.height;if(void 0===i||void 0===a)throw new Error('Must specify "width" and "height" options');var o=t.lineWidth;return void 0===o&&(o=_$convertLength_32(DEFAULT_PEN_THICKNESS,DEFAULT_PEN_THICKNESS_UNIT,n,{roundPixel:!1,pixelsPerInch:DEFAULT_PIXELS_PER_INCH})),r.clearRect(0,0,i,a),r.fillStyle=t.background||"white",r.fillRect(0,0,i,a),r.strokeStyle=t.foreground||t.strokeStyle||"black",r.lineWidth=o,r.lineJoin=t.lineJoin||"miter",r.lineCap=t.lineCap||"butt",eachPath(e,(function(e){r.beginPath(),"string"==typeof e?drawSVGPath(r,e):e.forEach((function(e){r.lineTo(e[0],e[1])})),r.stroke()})),[r.canvas,{data:pathsToSVG(e,t),extension:".svg"}]}function convertToSVGPath(e,t){return isEmpty(e)?"":"string"==typeof e?e:isPath(e)?e.toString():isPolyline(e)?polylineToSVGPath(e,t):Array.isArray(e)?e.map((function(e){return convertToSVGPath(e,t)})).reduce((function(e,t){return e.concat(t)}),[]):""}function eachPath(e,t){isEmpty(e)||("string"==typeof e||isPath(e)?t(e.toString()):isPolyline(e)?t(e):Array.isArray(e)&&e.forEach((function(e){return eachPath(e,t)})))}function drawSVGPath(e,t){for(var r=_$index_72(_$absSvgPath_3(_$parseSvgPath_76(t))),n=0;n<r.length;n++){var i=r[n],a=i[0];if("M"===a)e.moveTo(i[1],i[2]);else{if("C"!==a)throw new Error('Illegal type "'+a+'" in SVG commands');e.bezierCurveTo(i[1],i[2],i[3],i[4],i[5],i[6])}}}function polylineToSVGPath(e,t){var r=(t=t||{}).units||"px",n=t.viewUnits||r,i=[],a={roundPixel:!1,precision:_$defined_35(t.precision,5),pixelsPerInch:DEFAULT_PIXELS_PER_INCH};return e.forEach((function(e,t){var o=0===t?"M":"L",s=_$convertLength_32(e[0],r,n,a).toString(),u=_$convertLength_32(e[1],r,n,a).toString();i.push(o+s+" "+u)})),i.join(" ")}function isEmpty(e){return!e||Array.isArray(e)&&0===e.length}function isPath(e){return"object"==typeof e&&e&&!Array.isArray(e)}function isPolyline(e){return!(!e||!Array.isArray(e)||0===e.length)&&(t=e[0],Array.isArray(t)&&t.length>=2&&t.every((function(e){return"number"==typeof e})));var t}_$penplot_28.createPath=function(e){var t=_$src_33.path();return"function"==typeof e&&e(t),t.lineTo=r(t.lineTo),t.quadraticCurveTo=r(t.quadraticCurveTo),t.bezierCurveTo=r(t.bezierCurveTo),t;function r(e){return function(){var r=Array.prototype.slice.call(arguments);return null==t._x1&&null==t._y1&&t.moveTo(r[0],r[1]),e.apply(t,r)}}},_$penplot_28.pathsToSVGPaths=pathsToSVGPaths,_$penplot_28.pathsToPolylines=pathsToPolylines,_$penplot_28.pathsToSVG=pathsToSVG,_$penplot_28.renderPaths=renderPaths,_$penplot_28.convertToSVGPath=convertToSVGPath,_$penplot_28.eachPath=eachPath,_$penplot_28.drawSVGPath=drawSVGPath,_$penplot_28.polylineToSVGPath=polylineToSVGPath,_$penplot_28.polylinesToSVG=function(e,t){if(!Array.isArray(e))throw new Error("Expected array of arrays for polylines");return console.warn("polylinesToSVG is deprecated, use pathsToSVG instead which has the same functionality"),pathsToSVG(e,t)},_$penplot_28.renderPolylines=function(e,t){if(!Array.isArray(e))throw new Error("Expected array of arrays for polylines");return console.warn("renderPolylines is deprecated, use renderPaths instead which has the same functionality"),renderPaths(e,t)};var _$regl_78={exports:{}},U,X;U=this,X=function(){function e(e,t){this.id=R++,this.type=e,this.data=t}function t(e){return"["+function e(t){if(0===t.length)return[];var r=t.charAt(0),n=t.charAt(t.length-1);if(1<t.length&&r===n&&('"'===r||"'"===r))return['"'+t.substr(1,t.length-2).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];if(r=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(t))return e(t.substr(0,r.index)).concat(e(r[1])).concat(e(t.substr(r.index+r[0].length)));if(1===(r=t.split(".")).length)return['"'+t.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];for(t=[],n=0;n<r.length;++n)t=t.concat(e(r[n]));return t}(e).join("][")+"]"}function r(e){return"string"==typeof e?e.split():e}function n(e){return"string"==typeof e?document.querySelector(e):e}function i(e,t){for(var r=Array(e),n=0;n<e;++n)r[n]=t(n);return r}function a(e){var t,r;return t=(65535<e)<<4,t|=r=(255<(e>>>=t))<<3,(t|=r=(15<(e>>>=r))<<2)|(r=(3<(e>>>=r))<<1)|e>>>r>>1}function o(){function e(e){e:{for(var t=16;268435456>=t;t*=16)if(e<=t){e=t;break e}e=0}return 0<(t=r[a(e)>>2]).length?t.pop():new ArrayBuffer(e)}function t(e){r[a(e.byteLength)>>2].push(e)}var r=i(8,(function(){return[]}));return{alloc:e,free:t,allocType:function(t,r){var n=null;switch(t){case 5120:n=new Int8Array(e(r),0,r);break;case 5121:n=new Uint8Array(e(r),0,r);break;case 5122:n=new Int16Array(e(2*r),0,r);break;case 5123:n=new Uint16Array(e(2*r),0,r);break;case 5124:n=new Int32Array(e(4*r),0,r);break;case 5125:n=new Uint32Array(e(4*r),0,r);break;case 5126:n=new Float32Array(e(4*r),0,r);break;default:return null}return n.length!==r?n.subarray(0,r):n},freeType:function(e){t(e.buffer)}}}function s(e){return!!e&&"object"==typeof e&&Array.isArray(e.shape)&&Array.isArray(e.stride)&&"number"==typeof e.offset&&e.shape.length===e.stride.length&&(Array.isArray(e.data)||K(e.data))}function u(e,t,r,n,i,a){for(var o=0;o<t;++o)for(var s=e[o],u=0;u<r;++u)for(var l=s[u],c=0;c<n;++c)i[a++]=l[c]}function l(e){return 0|Y[Object.prototype.toString.call(e)]}function c(e,t){for(var r=0;r<t.length;++r)e[r]=t[r]}function f(e,t,r,n,i,a,o){for(var s=0,u=0;u<r;++u)for(var l=0;l<n;++l)e[s++]=t[i*u+a*l+o]}function h(e,t,r,n){function i(t){this.id=h++,this.buffer=e.createBuffer(),this.type=t,this.usage=35044,this.byteLength=0,this.dimension=1,this.dtype=5121,this.persistentData=null,r.profile&&(this.stats={size:0})}function a(t,r,n){t.byteLength=r.byteLength,e.bufferData(t.type,r,n)}function o(e,t,r,n,i,o){if(e.usage=r,Array.isArray(t)){if(e.dtype=n||5126,0<t.length)if(Array.isArray(t[0])){i=Z(t);for(var u=n=1;u<i.length;++u)n*=i[u];e.dimension=n,a(e,t=J(t,i,e.dtype),r),o?e.persistentData=t:q.freeType(t)}else"number"==typeof t[0]?(e.dimension=i,c(i=q.allocType(e.dtype,t.length),t),a(e,i,r),o?e.persistentData=i:q.freeType(i)):K(t[0])&&(e.dimension=t[0].length,e.dtype=n||l(t[0])||5126,a(e,t=J(t,[t.length,t[0].length],e.dtype),r),o?e.persistentData=t:q.freeType(t))}else if(K(t))e.dtype=n||l(t),e.dimension=i,a(e,t,r),o&&(e.persistentData=new Uint8Array(new Uint8Array(t.buffer)));else if(s(t)){i=t.shape;var h=t.stride,p=(u=t.offset,0),d=0,m=0,v=0;1===i.length?(p=i[0],d=1,m=h[0],v=0):2===i.length&&(p=i[0],d=i[1],m=h[0],v=h[1]),e.dtype=n||l(t.data)||5126,e.dimension=d,f(i=q.allocType(e.dtype,p*d),t.data,p,d,m,v,u),a(e,i,r),o?e.persistentData=i:q.freeType(i)}else t instanceof ArrayBuffer&&(e.dtype=5121,e.dimension=i,a(e,t,r),o&&(e.persistentData=new Uint8Array(new Uint8Array(t))))}function u(r){t.bufferCount--,n(r),e.deleteBuffer(r.buffer),r.buffer=null,delete p[r.id]}var h=0,p={};i.prototype.bind=function(){e.bindBuffer(this.type,this.buffer)},i.prototype.destroy=function(){u(this)};var d=[];return r.profile&&(t.getTotalBufferSize=function(){var e=0;return Object.keys(p).forEach((function(t){e+=p[t].stats.size})),e}),{create:function(n,a,h,d){function m(t){var n=35044,i=null,a=0,u=0,l=1;return Array.isArray(t)||K(t)||s(t)||t instanceof ArrayBuffer?i=t:"number"==typeof t?a=0|t:t&&("data"in t&&(i=t.data),"usage"in t&&(n=X[t.usage]),"type"in t&&(u=Q[t.type]),"dimension"in t&&(l=0|t.dimension),"length"in t&&(a=0|t.length)),v.bind(),i?o(v,i,n,u,l,d):(a&&e.bufferData(v.type,a,n),v.dtype=u||5121,v.usage=n,v.dimension=l,v.byteLength=a),r.profile&&(v.stats.size=v.byteLength*ee[v.dtype]),m}t.bufferCount++;var v=new i(a);return p[v.id]=v,h||m(n),m._reglType="buffer",m._buffer=v,m.subdata=function(t,r){var n,i=0|(r||0);if(v.bind(),K(t)||t instanceof ArrayBuffer)e.bufferSubData(v.type,i,t);else if(Array.isArray(t)){if(0<t.length)if("number"==typeof t[0]){var a=q.allocType(v.dtype,t.length);c(a,t),e.bufferSubData(v.type,i,a),q.freeType(a)}else(Array.isArray(t[0])||K(t[0]))&&(n=Z(t),a=J(t,n,v.dtype),e.bufferSubData(v.type,i,a),q.freeType(a))}else if(s(t)){n=t.shape;var o=t.stride,u=a=0,h=0,p=0;1===n.length?(a=n[0],u=1,h=o[0],p=0):2===n.length&&(a=n[0],u=n[1],h=o[0],p=o[1]),n=Array.isArray(t.data)?v.dtype:l(t.data),f(n=q.allocType(n,a*u),t.data,a,u,h,p,t.offset),e.bufferSubData(v.type,i,n),q.freeType(n)}return m},r.profile&&(m.stats=v.stats),m.destroy=function(){u(v)},m},createStream:function(e,t){var r=d.pop();return r||(r=new i(e)),r.bind(),o(r,t,35040,0,1,!1),r},destroyStream:function(e){d.push(e)},clear:function(){G(p).forEach(u),d.forEach(u)},getBuffer:function(e){return e&&e._buffer instanceof i?e._buffer:null},restore:function(){G(p).forEach((function(t){t.buffer=e.createBuffer(),e.bindBuffer(t.type,t.buffer),e.bufferData(t.type,t.persistentData||t.byteLength,t.usage)}))},_initBuffer:o}}function p(e,t,r,n){function i(e){this.id=l++,u[this.id]=this,this.buffer=e,this.primType=4,this.type=this.vertCount=0}function a(n,i,a,o,u,l,c){var f;if(n.buffer.bind(),i?((f=c)||K(i)&&(!s(i)||K(i.data))||(f=t.oes_element_index_uint?5125:5123),r._initBuffer(n.buffer,i,a,f,3)):(e.bufferData(34963,l,a),n.buffer.dtype=f||5121,n.buffer.usage=a,n.buffer.dimension=3,n.buffer.byteLength=l),f=c,!c){switch(n.buffer.dtype){case 5121:case 5120:f=5121;break;case 5123:case 5122:f=5123;break;case 5125:case 5124:f=5125}n.buffer.dtype=f}n.type=f,0>(i=u)&&(i=n.buffer.byteLength,5123===f?i>>=1:5125===f&&(i>>=2)),n.vertCount=i,i=o,0>o&&(i=4,1===(o=n.buffer.dimension)&&(i=0),2===o&&(i=1),3===o&&(i=4)),n.primType=i}function o(e){n.elementsCount--,delete u[e.id],e.buffer.destroy(),e.buffer=null}var u={},l=0,c={uint8:5121,uint16:5123};t.oes_element_index_uint&&(c.uint32=5125),i.prototype.bind=function(){this.buffer.bind()};var f=[];return{create:function(e,t){function u(e){if(e)if("number"==typeof e)l(e),f.primType=4,f.vertCount=0|e,f.type=5121;else{var t=null,r=35044,n=-1,i=-1,o=0,h=0;Array.isArray(e)||K(e)||s(e)?t=e:("data"in e&&(t=e.data),"usage"in e&&(r=X[e.usage]),"primitive"in e&&(n=te[e.primitive]),"count"in e&&(i=0|e.count),"type"in e&&(h=c[e.type]),"length"in e?o=0|e.length:(o=i,5123===h||5122===h?o*=2:5125!==h&&5124!==h||(o*=4))),a(f,t,r,n,i,o,h)}else l(),f.primType=4,f.vertCount=0,f.type=5121;return u}var l=r.create(null,34963,!0),f=new i(l._buffer);return n.elementsCount++,u(e),u._reglType="elements",u._elements=f,u.subdata=function(e,t){return l.subdata(e,t),u},u.destroy=function(){o(f)},u},createStream:function(e){var t=f.pop();return t||(t=new i(r.create(null,34963,!0,!1)._buffer)),a(t,e,35040,-1,-1,0,0),t},destroyStream:function(e){f.push(e)},getElements:function(e){return"function"==typeof e&&e._elements instanceof i?e._elements:null},clear:function(){G(u).forEach(o)}}}function d(e){for(var t=q.allocType(5123,e.length),r=0;r<e.length;++r)if(isNaN(e[r]))t[r]=65535;else if(1/0===e[r])t[r]=31744;else if(-1/0===e[r])t[r]=64512;else{re[0]=e[r];var n=(a=ne[0])>>>31<<15,i=(a<<1>>>24)-127,a=a>>13&1023;t[r]=-24>i?n:-14>i?n+(a+1024>>-14-i):15<i?n+31744:n+(i+15<<10)+a}return t}function m(e){return Array.isArray(e)||K(e)}function v(e){return"[object "+e+"]"}function g(e){return Array.isArray(e)&&(0===e.length||"number"==typeof e[0])}function b(e){return!(!Array.isArray(e)||0===e.length||!m(e[0]))}function y(e){return Object.prototype.toString.call(e)}function _(e){if(!e)return!1;var t=y(e);return 0<=pe.indexOf(t)||g(e)||b(e)||s(e)}function w(e,t){36193===e.type?(e.data=d(t),q.freeType(t)):e.data=t}function x(e,t,r,n,i,a){if(e=void 0!==me[e]?me[e]:oe[e]*de[t],a&&(e*=6),i){for(n=0;1<=r;)n+=e*r*r,r/=2;return n}return e*r*n}function E(e,t,r,n,i,a,o){function u(){this.format=this.internalformat=6408,this.type=5121,this.flipY=this.premultiplyAlpha=this.compressed=!1,this.unpackAlignment=1,this.colorSpace=37444,this.channels=this.height=this.width=0}function l(e,t){e.internalformat=t.internalformat,e.format=t.format,e.type=t.type,e.compressed=t.compressed,e.premultiplyAlpha=t.premultiplyAlpha,e.flipY=t.flipY,e.unpackAlignment=t.unpackAlignment,e.colorSpace=t.colorSpace,e.width=t.width,e.height=t.height,e.channels=t.channels}function c(e,t){if("object"==typeof t&&t){"premultiplyAlpha"in t&&(e.premultiplyAlpha=t.premultiplyAlpha),"flipY"in t&&(e.flipY=t.flipY),"alignment"in t&&(e.unpackAlignment=t.alignment),"colorSpace"in t&&(e.colorSpace=N[t.colorSpace]),"type"in t&&(e.type=H[t.type]);var r=e.width,n=e.height,i=e.channels,a=!1;"shape"in t?(r=t.shape[0],n=t.shape[1],3===t.shape.length&&(i=t.shape[2],a=!0)):("radius"in t&&(r=n=t.radius),"width"in t&&(r=t.width),"height"in t&&(n=t.height),"channels"in t&&(i=t.channels,a=!0)),e.width=0|r,e.height=0|n,e.channels=0|i,r=!1,"format"in t&&(r=t.format,n=e.internalformat=Q[r],e.format=de[n],r in H&&!("type"in t)&&(e.type=H[r]),r in X&&(e.compressed=!0),r=!0),!a&&r?e.channels=oe[e.format]:a&&!r&&e.channels!==ae[e.format]&&(e.format=e.internalformat=ae[e.channels])}}function f(t){e.pixelStorei(37440,t.flipY),e.pixelStorei(37441,t.premultiplyAlpha),e.pixelStorei(37443,t.colorSpace),e.pixelStorei(3317,t.unpackAlignment)}function h(){u.call(this),this.yOffset=this.xOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function p(e,t){var r=null;if(_(t)?r=t:t&&(c(e,t),"x"in t&&(e.xOffset=0|t.x),"y"in t&&(e.yOffset=0|t.y),_(t.data)&&(r=t.data)),t.copy){var n=i.viewportWidth,a=i.viewportHeight;e.width=e.width||n-e.xOffset,e.height=e.height||a-e.yOffset,e.needsCopy=!0}else if(r){if(K(r))e.channels=e.channels||4,e.data=r,"type"in t||5121!==e.type||(e.type=0|Y[Object.prototype.toString.call(r)]);else if(g(r)){switch(e.channels=e.channels||4,a=(n=r).length,e.type){case 5121:case 5123:case 5125:case 5126:(a=q.allocType(e.type,a)).set(n),e.data=a;break;case 36193:e.data=d(n)}e.alignment=1,e.needsFree=!0}else if(s(r)){n=r.data,Array.isArray(n)||5121!==e.type||(e.type=0|Y[Object.prototype.toString.call(n)]),a=r.shape;var o,u,l,f,h=r.stride;3===a.length?(l=a[2],f=h[2]):f=l=1,o=a[0],u=a[1],a=h[0],h=h[1],e.alignment=1,e.width=o,e.height=u,e.channels=l,e.format=e.internalformat=ae[l],e.needsFree=!0,o=f,r=r.offset,l=e.width,f=e.height,u=e.channels;for(var p=q.allocType(36193===e.type?5126:e.type,l*f*u),v=0,x=0;x<f;++x)for(var E=0;E<l;++E)for(var A=0;A<u;++A)p[v++]=n[a*E+h*x+o*A+r];w(e,p)}else if(y(r)===se||y(r)===ue||y(r)===le)y(r)===se||y(r)===ue?e.element=r:e.element=r.canvas,e.width=e.element.width,e.height=e.element.height,e.channels=4;else if(y(r)===ce)e.element=r,e.width=r.width,e.height=r.height,e.channels=4;else if(y(r)===fe)e.element=r,e.width=r.naturalWidth,e.height=r.naturalHeight,e.channels=4;else if(y(r)===he)e.element=r,e.width=r.videoWidth,e.height=r.videoHeight,e.channels=4;else if(b(r)){for(n=e.width||r[0].length,a=e.height||r.length,h=e.channels,h=m(r[0][0])?h||r[0][0].length:h||1,o=W.shape(r),l=1,f=0;f<o.length;++f)l*=o[f];l=q.allocType(36193===e.type?5126:e.type,l),W.flatten(r,o,"",l),w(e,l),e.alignment=1,e.width=n,e.height=a,e.channels=h,e.format=e.internalformat=ae[h],e.needsFree=!0}}else e.width=e.width||1,e.height=e.height||1,e.channels=e.channels||4}function v(t,r,i,a,o){var s=t.element,u=t.data,l=t.internalformat,c=t.format,h=t.type,p=t.width,d=t.height;f(t),s?e.texSubImage2D(r,o,i,a,c,h,s):t.compressed?e.compressedTexSubImage2D(r,o,i,a,l,p,d,u):t.needsCopy?(n(),e.copyTexSubImage2D(r,o,i,a,t.xOffset,t.yOffset,p,d)):e.texSubImage2D(r,o,i,a,p,d,c,h,u)}function E(){return me.pop()||new h}function A(e){e.needsFree&&q.freeType(e.data),h.call(e),me.push(e)}function C(){u.call(this),this.genMipmaps=!1,this.mipmapHint=4352,this.mipmask=0,this.images=Array(16)}function k(e,t,r){var n=e.images[0]=E();e.mipmask=1,n.width=e.width=t,n.height=e.height=r,n.channels=e.channels=4}function M(e,t){var r=null;if(_(t))l(r=e.images[0]=E(),e),p(r,t),e.mipmask=1;else if(c(e,t),Array.isArray(t.mipmap))for(var n=t.mipmap,i=0;i<n.length;++i)l(r=e.images[i]=E(),e),r.width>>=i,r.height>>=i,p(r,n[i]),e.mipmask|=1<<i;else l(r=e.images[0]=E(),e),p(r,t),e.mipmask=1;l(e,e.images[0])}function P(t,r){for(var i=t.images,a=0;a<i.length&&i[a];++a){var o=i[a],s=r,u=a,l=o.element,c=o.data,h=o.internalformat,p=o.format,d=o.type,m=o.width,v=o.height;f(o),l?e.texImage2D(s,u,p,p,d,l):o.compressed?e.compressedTexImage2D(s,u,h,m,v,0,c):o.needsCopy?(n(),e.copyTexImage2D(s,u,p,o.xOffset,o.yOffset,m,v,0)):e.texImage2D(s,u,p,m,v,0,p,d,c||null)}}function T(){var e=ve.pop()||new C;u.call(e);for(var t=e.mipmask=0;16>t;++t)e.images[t]=null;return e}function S(e){for(var t=e.images,r=0;r<t.length;++r)t[r]&&A(t[r]),t[r]=null;ve.push(e)}function $(){this.magFilter=this.minFilter=9728,this.wrapT=this.wrapS=33071,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=4352}function V(e,t){"min"in t&&(e.minFilter=U[t.min],0<=ie.indexOf(e.minFilter)&&!("faces"in t)&&(e.genMipmaps=!0)),"mag"in t&&(e.magFilter=z[t.mag]);var r=e.wrapS,n=e.wrapT;if("wrap"in t){var i=t.wrap;"string"==typeof i?r=n=R[i]:Array.isArray(i)&&(r=R[i[0]],n=R[i[1]])}else"wrapS"in t&&(r=R[t.wrapS]),"wrapT"in t&&(n=R[t.wrapT]);if(e.wrapS=r,e.wrapT=n,"anisotropic"in t&&(e.anisotropic=t.anisotropic),"mipmap"in t){switch(r=!1,typeof t.mipmap){case"string":e.mipmapHint=F[t.mipmap],r=e.genMipmaps=!0;break;case"boolean":r=e.genMipmaps=t.mipmap;break;case"object":e.genMipmaps=!1,r=!0}!r||"min"in t||(e.minFilter=9984)}}function D(r,n){e.texParameteri(n,10241,r.minFilter),e.texParameteri(n,10240,r.magFilter),e.texParameteri(n,10242,r.wrapS),e.texParameteri(n,10243,r.wrapT),t.ext_texture_filter_anisotropic&&e.texParameteri(n,34046,r.anisotropic),r.genMipmaps&&(e.hint(33170,r.mipmapHint),e.generateMipmap(n))}function L(t){u.call(this),this.mipmask=0,this.internalformat=6408,this.id=ge++,this.refCount=1,this.target=t,this.texture=e.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new $,o.profile&&(this.stats={size:0})}function O(t){e.activeTexture(33984),e.bindTexture(t.target,t.texture)}function j(){var t=_e[0];t?e.bindTexture(t.target,t.texture):e.bindTexture(3553,null)}function I(t){var r=t.texture,n=t.unit,i=t.target;0<=n&&(e.activeTexture(33984+n),e.bindTexture(i,null),_e[n]=null),e.deleteTexture(r),t.texture=null,t.params=null,t.pixels=null,t.refCount=0,delete be[t.id],a.textureCount--}var F={"don't care":4352,"dont care":4352,nice:4354,fast:4353},R={repeat:10497,clamp:33071,mirror:33648},z={nearest:9728,linear:9729},U=B({mipmap:9987,"nearest mipmap nearest":9984,"linear mipmap nearest":9985,"nearest mipmap linear":9986,"linear mipmap linear":9987},z),N={none:0,browser:37444},H={uint8:5121,rgba4:32819,rgb565:33635,"rgb5 a1":32820},Q={alpha:6406,luminance:6409,"luminance alpha":6410,rgb:6407,rgba:6408,rgba4:32854,"rgb5 a1":32855,rgb565:36194},X={};t.ext_srgb&&(Q.srgb=35904,Q.srgba=35906),t.oes_texture_float&&(H.float32=H.float=5126),t.oes_texture_half_float&&(H.float16=H["half float"]=36193),t.webgl_depth_texture&&(B(Q,{depth:6402,"depth stencil":34041}),B(H,{uint16:5123,uint32:5125,"depth stencil":34042})),t.webgl_compressed_texture_s3tc&&B(X,{"rgb s3tc dxt1":33776,"rgba s3tc dxt1":33777,"rgba s3tc dxt3":33778,"rgba s3tc dxt5":33779}),t.webgl_compressed_texture_atc&&B(X,{"rgb atc":35986,"rgba atc explicit alpha":35987,"rgba atc interpolated alpha":34798}),t.webgl_compressed_texture_pvrtc&&B(X,{"rgb pvrtc 4bppv1":35840,"rgb pvrtc 2bppv1":35841,"rgba pvrtc 4bppv1":35842,"rgba pvrtc 2bppv1":35843}),t.webgl_compressed_texture_etc1&&(X["rgb etc1"]=36196);var J=Array.prototype.slice.call(e.getParameter(34467));Object.keys(X).forEach((function(e){var t=X[e];0<=J.indexOf(t)&&(Q[e]=t)}));var Z=Object.keys(Q);r.textureFormats=Z;var ee=[];Object.keys(Q).forEach((function(e){ee[Q[e]]=e}));var te=[];Object.keys(H).forEach((function(e){te[H[e]]=e}));var re=[];Object.keys(z).forEach((function(e){re[z[e]]=e}));var ne=[];Object.keys(U).forEach((function(e){ne[U[e]]=e}));var pe=[];Object.keys(R).forEach((function(e){pe[R[e]]=e}));var de=Z.reduce((function(e,r){var n=Q[r];return 6409===n||6406===n||6409===n||6410===n||6402===n||34041===n||t.ext_srgb&&(35904===n||35906===n)?e[n]=n:32855===n||0<=r.indexOf("rgba")?e[n]=6408:e[n]=6407,e}),{}),me=[],ve=[],ge=0,be={},ye=r.maxTextureUnits,_e=Array(ye).map((function(){return null}));return B(L.prototype,{bind:function(){this.bindCount+=1;var t=this.unit;if(0>t){for(var r=0;r<ye;++r){var n=_e[r];if(n){if(0<n.bindCount)continue;n.unit=-1}_e[r]=this,t=r;break}o.profile&&a.maxTextureUnits<t+1&&(a.maxTextureUnits=t+1),this.unit=t,e.activeTexture(33984+t),e.bindTexture(this.target,this.texture)}return t},unbind:function(){--this.bindCount},decRef:function(){0>=--this.refCount&&I(this)}}),o.profile&&(a.getTotalTextureSize=function(){var e=0;return Object.keys(be).forEach((function(t){e+=be[t].stats.size})),e}),{create2D:function(t,r){function n(e,t){var r=i.texInfo;$.call(r);var a=T();return"number"==typeof e?k(a,0|e,"number"==typeof t?0|t:0|e):e?(V(r,e),M(a,e)):k(a,1,1),r.genMipmaps&&(a.mipmask=(a.width<<1)-1),i.mipmask=a.mipmask,l(i,a),i.internalformat=a.internalformat,n.width=a.width,n.height=a.height,O(i),P(a,3553),D(r,3553),j(),S(a),o.profile&&(i.stats.size=x(i.internalformat,i.type,a.width,a.height,r.genMipmaps,!1)),n.format=ee[i.internalformat],n.type=te[i.type],n.mag=re[r.magFilter],n.min=ne[r.minFilter],n.wrapS=pe[r.wrapS],n.wrapT=pe[r.wrapT],n}var i=new L(3553);return be[i.id]=i,a.textureCount++,n(t,r),n.subimage=function(e,t,r,a){t|=0,r|=0,a|=0;var o=E();return l(o,i),o.width=0,o.height=0,p(o,e),o.width=o.width||(i.width>>a)-t,o.height=o.height||(i.height>>a)-r,O(i),v(o,3553,t,r,a),j(),A(o),n},n.resize=function(t,r){var a=0|t,s=0|r||a;if(a===i.width&&s===i.height)return n;n.width=i.width=a,n.height=i.height=s,O(i);for(var u=0;i.mipmask>>u;++u){var l=a>>u,c=s>>u;if(!l||!c)break;e.texImage2D(3553,u,i.format,l,c,0,i.format,i.type,null)}return j(),o.profile&&(i.stats.size=x(i.internalformat,i.type,a,s,!1,!1)),n},n._reglType="texture2d",n._texture=i,o.profile&&(n.stats=i.stats),n.destroy=function(){i.decRef()},n},createCube:function(t,r,n,i,s,u){function f(e,t,r,n,i,a){var s,u=h.texInfo;for($.call(u),s=0;6>s;++s)d[s]=T();if("number"!=typeof e&&e){if("object"==typeof e)if(t)M(d[0],e),M(d[1],t),M(d[2],r),M(d[3],n),M(d[4],i),M(d[5],a);else if(V(u,e),c(h,e),"faces"in e)for(e=e.faces,s=0;6>s;++s)l(d[s],h),M(d[s],e[s]);else for(s=0;6>s;++s)M(d[s],e)}else for(e=0|e||1,s=0;6>s;++s)k(d[s],e,e);for(l(h,d[0]),h.mipmask=u.genMipmaps?(d[0].width<<1)-1:d[0].mipmask,h.internalformat=d[0].internalformat,f.width=d[0].width,f.height=d[0].height,O(h),s=0;6>s;++s)P(d[s],34069+s);for(D(u,34067),j(),o.profile&&(h.stats.size=x(h.internalformat,h.type,f.width,f.height,u.genMipmaps,!0)),f.format=ee[h.internalformat],f.type=te[h.type],f.mag=re[u.magFilter],f.min=ne[u.minFilter],f.wrapS=pe[u.wrapS],f.wrapT=pe[u.wrapT],s=0;6>s;++s)S(d[s]);return f}var h=new L(34067);be[h.id]=h,a.cubeCount++;var d=Array(6);return f(t,r,n,i,s,u),f.subimage=function(e,t,r,n,i){r|=0,n|=0,i|=0;var a=E();return l(a,h),a.width=0,a.height=0,p(a,t),a.width=a.width||(h.width>>i)-r,a.height=a.height||(h.height>>i)-n,O(h),v(a,34069+e,r,n,i),j(),A(a),f},f.resize=function(t){if((t|=0)!==h.width){f.width=h.width=t,f.height=h.height=t,O(h);for(var r=0;6>r;++r)for(var n=0;h.mipmask>>n;++n)e.texImage2D(34069+r,n,h.format,t>>n,t>>n,0,h.format,h.type,null);return j(),o.profile&&(h.stats.size=x(h.internalformat,h.type,f.width,f.height,!1,!0)),f}},f._reglType="textureCube",f._texture=h,o.profile&&(f.stats=h.stats),f.destroy=function(){h.decRef()},f},clear:function(){for(var t=0;t<ye;++t)e.activeTexture(33984+t),e.bindTexture(3553,null),_e[t]=null;G(be).forEach(I),a.cubeCount=0,a.textureCount=0},getTexture:function(e){return null},restore:function(){for(var t=0;t<ye;++t){var r=_e[t];r&&(r.bindCount=0,r.unit=-1,_e[t]=null)}G(be).forEach((function(t){t.texture=e.createTexture(),e.bindTexture(t.target,t.texture);for(var r=0;32>r;++r)if(0!=(t.mipmask&1<<r))if(3553===t.target)e.texImage2D(3553,r,t.internalformat,t.width>>r,t.height>>r,0,t.internalformat,t.type,null);else for(var n=0;6>n;++n)e.texImage2D(34069+n,r,t.internalformat,t.width>>r,t.height>>r,0,t.internalformat,t.type,null);D(t.texInfo,t.target)}))},refresh:function(){for(var t=0;t<ye;++t){var r=_e[t];r&&(r.bindCount=0,r.unit=-1,_e[t]=null),e.activeTexture(33984+t),e.bindTexture(3553,null),e.bindTexture(34067,null)}}}}function A(e,t,r,n,i,a){function o(e,t,r){this.target=e,this.texture=t,this.renderbuffer=r;var n=e=0;t?(e=t.width,n=t.height):r&&(e=r.width,n=r.height),this.width=e,this.height=n}function s(e){e&&(e.texture&&e.texture._texture.decRef(),e.renderbuffer&&e.renderbuffer._renderbuffer.decRef())}function u(e,t,r){e&&(e.texture?e.texture._texture.refCount+=1:e.renderbuffer._renderbuffer.refCount+=1)}function l(t,r){r&&(r.texture?e.framebufferTexture2D(36160,t,r.target,r.texture._texture.texture,0):e.framebufferRenderbuffer(36160,t,36161,r.renderbuffer._renderbuffer.renderbuffer))}function c(e){var t=3553,r=null,n=null,i=e;return"object"==typeof e&&(i=e.data,"target"in e&&(t=0|e.target)),"texture2d"===(e=i._reglType)||"textureCube"===e?r=i:"renderbuffer"===e&&(n=i,t=36161),new o(t,r,n)}function f(e,t,r,a,s){return r?((e=n.create2D({width:e,height:t,format:a,type:s}))._texture.refCount=0,new o(3553,e,null)):((e=i.create({width:e,height:t,format:a}))._renderbuffer.refCount=0,new o(36161,null,e))}function h(e){return e&&(e.texture||e.renderbuffer)}function p(e,t,r){e&&(e.texture?e.texture.resize(t,r):e.renderbuffer&&e.renderbuffer.resize(t,r),e.width=t,e.height=r)}function d(){this.id=E++,A[this.id]=this,this.framebuffer=e.createFramebuffer(),this.height=this.width=0,this.colorAttachments=[],this.depthStencilAttachment=this.stencilAttachment=this.depthAttachment=null}function m(e){e.colorAttachments.forEach(s),s(e.depthAttachment),s(e.stencilAttachment),s(e.depthStencilAttachment)}function v(t){e.deleteFramebuffer(t.framebuffer),t.framebuffer=null,a.framebufferCount--,delete A[t.id]}function g(t){var n;e.bindFramebuffer(36160,t.framebuffer);var i=t.colorAttachments;for(n=0;n<i.length;++n)l(36064+n,i[n]);for(n=i.length;n<r.maxColorAttachments;++n)e.framebufferTexture2D(36160,36064+n,3553,null,0);e.framebufferTexture2D(36160,33306,3553,null,0),e.framebufferTexture2D(36160,36096,3553,null,0),e.framebufferTexture2D(36160,36128,3553,null,0),l(36096,t.depthAttachment),l(36128,t.stencilAttachment),l(33306,t.depthStencilAttachment),e.checkFramebufferStatus(36160),e.isContextLost(),e.bindFramebuffer(36160,y.next?y.next.framebuffer:null),y.cur=y.next,e.getError()}function b(e,t){function r(e,t){var i,a=0,o=0,s=!0,l=!0;i=null;var p=!0,d="rgba",v="uint8",b=1,y=null,x=null,E=null,A=!1;"number"==typeof e?(a=0|e,o=0|t||a):e?("shape"in e?(a=(o=e.shape)[0],o=o[1]):("radius"in e&&(a=o=e.radius),"width"in e&&(a=e.width),"height"in e&&(o=e.height)),("color"in e||"colors"in e)&&(i=e.color||e.colors,Array.isArray(i)),i||("colorCount"in e&&(b=0|e.colorCount),"colorTexture"in e&&(p=!!e.colorTexture,d="rgba4"),"colorType"in e&&(v=e.colorType,!p)&&("half float"===v||"float16"===v?d="rgba16f":"float"!==v&&"float32"!==v||(d="rgba32f")),"colorFormat"in e&&(d=e.colorFormat,0<=_.indexOf(d)?p=!0:0<=w.indexOf(d)&&(p=!1))),("depthTexture"in e||"depthStencilTexture"in e)&&(A=!(!e.depthTexture&&!e.depthStencilTexture)),"depth"in e&&("boolean"==typeof e.depth?s=e.depth:(y=e.depth,l=!1)),"stencil"in e&&("boolean"==typeof e.stencil?l=e.stencil:(x=e.stencil,s=!1)),"depthStencil"in e&&("boolean"==typeof e.depthStencil?s=l=e.depthStencil:(E=e.depthStencil,l=s=!1))):a=o=1;var C=null,k=null,M=null,P=null;if(Array.isArray(i))C=i.map(c);else if(i)C=[c(i)];else for(C=Array(b),i=0;i<b;++i)C[i]=f(a,o,p,d,v);for(a=a||C[0].width,o=o||C[0].height,y?k=c(y):s&&!l&&(k=f(a,o,A,"depth","uint32")),x?M=c(x):l&&!s&&(M=f(a,o,!1,"stencil","uint8")),E?P=c(E):!y&&!x&&l&&s&&(P=f(a,o,A,"depth stencil","depth stencil")),s=null,i=0;i<C.length;++i)u(C[i]),C[i]&&C[i].texture&&(l=be[C[i].texture._texture.format]*ye[C[i].texture._texture.type],null===s&&(s=l));return u(k),u(M),u(P),m(n),n.width=a,n.height=o,n.colorAttachments=C,n.depthAttachment=k,n.stencilAttachment=M,n.depthStencilAttachment=P,r.color=C.map(h),r.depth=h(k),r.stencil=h(M),r.depthStencil=h(P),r.width=n.width,r.height=n.height,g(n),r}var n=new d;return a.framebufferCount++,r(e,t),B(r,{resize:function(e,t){var i=Math.max(0|e,1),a=Math.max(0|t||i,1);if(i===n.width&&a===n.height)return r;for(var o=n.colorAttachments,s=0;s<o.length;++s)p(o[s],i,a);return p(n.depthAttachment,i,a),p(n.stencilAttachment,i,a),p(n.depthStencilAttachment,i,a),n.width=r.width=i,n.height=r.height=a,g(n),r},_reglType:"framebuffer",_framebuffer:n,destroy:function(){v(n),m(n)},use:function(e){y.setFBO({framebuffer:r},e)}})}var y={cur:null,next:null,dirty:!1,setFBO:null},_=["rgba"],w=["rgba4","rgb565","rgb5 a1"];t.ext_srgb&&w.push("srgba"),t.ext_color_buffer_half_float&&w.push("rgba16f","rgb16f"),t.webgl_color_buffer_float&&w.push("rgba32f");var x=["uint8"];t.oes_texture_half_float&&x.push("half float","float16"),t.oes_texture_float&&x.push("float","float32");var E=0,A={};return B(y,{getFramebuffer:function(e){return"function"==typeof e&&"framebuffer"===e._reglType&&(e=e._framebuffer)instanceof d?e:null},create:b,createCube:function(e){function t(e){var i,a={color:null},o=0,s=null;i="rgba";var u="uint8",l=1;if("number"==typeof e?o=0|e:e?("shape"in e?o=e.shape[0]:("radius"in e&&(o=0|e.radius),"width"in e?o=0|e.width:"height"in e&&(o=0|e.height)),("color"in e||"colors"in e)&&(s=e.color||e.colors,Array.isArray(s)),s||("colorCount"in e&&(l=0|e.colorCount),"colorType"in e&&(u=e.colorType),"colorFormat"in e&&(i=e.colorFormat)),"depth"in e&&(a.depth=e.depth),"stencil"in e&&(a.stencil=e.stencil),"depthStencil"in e&&(a.depthStencil=e.depthStencil)):o=1,s)if(Array.isArray(s))for(e=[],i=0;i<s.length;++i)e[i]=s[i];else e=[s];else for(e=Array(l),s={radius:o,format:i,type:u},i=0;i<l;++i)e[i]=n.createCube(s);for(a.color=Array(e.length),i=0;i<e.length;++i)l=e[i],o=o||l.width,a.color[i]={target:34069,data:e[i]};for(i=0;6>i;++i){for(l=0;l<e.length;++l)a.color[l].target=34069+i;0<i&&(a.depth=r[0].depth,a.stencil=r[0].stencil,a.depthStencil=r[0].depthStencil),r[i]?r[i](a):r[i]=b(a)}return B(t,{width:o,height:o,color:e})}var r=Array(6);return t(e),B(t,{faces:r,resize:function(e){var n=0|e;if(n===t.width)return t;var i=t.color;for(e=0;e<i.length;++e)i[e].resize(n);for(e=0;6>e;++e)r[e].resize(n);return t.width=t.height=n,t},_reglType:"framebufferCube",destroy:function(){r.forEach((function(e){e.destroy()}))}})},clear:function(){G(A).forEach(v)},restore:function(){y.cur=null,y.next=null,y.dirty=!0,G(A).forEach((function(t){t.framebuffer=e.createFramebuffer(),g(t)}))}})}function C(){this.w=this.z=this.y=this.x=this.state=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=5126,this.divisor=this.stride=this.offset=0}function k(e,t,r,n,i){function a(){this.id=++l,this.attributes=[];var e=t.oes_vertex_array_object;this.vao=e?e.createVertexArrayOES():null,c[this.id]=this,this.buffers=[]}var o=r.maxAttributes,u=Array(o);for(r=0;r<o;++r)u[r]=new C;var l=0,c={},f={Record:C,scope:{},state:u,currentVAO:null,targetVAO:null,restore:t.oes_vertex_array_object?function(){t.oes_vertex_array_object&&G(c).forEach((function(e){e.refresh()}))}:function(){},createVAO:function(e){function t(e){var n={},a=r.attributes;a.length=e.length;for(var o=0;o<e.length;++o){var u,l=e[o],c=a[o]=new C,f=l.data||l;Array.isArray(f)||K(f)||s(f)?(r.buffers[o]&&(u=r.buffers[o],K(f)&&u._buffer.byteLength>=f.byteLength?u.subdata(f):(u.destroy(),r.buffers[o]=null)),r.buffers[o]||(u=r.buffers[o]=i.create(l,34962,!1,!0)),c.buffer=i.getBuffer(u),c.size=0|c.buffer.dimension,c.normalized=!1,c.type=c.buffer.dtype,c.offset=0,c.stride=0,c.divisor=0,c.state=1,n[o]=1):i.getBuffer(l)?(c.buffer=i.getBuffer(l),c.size=0|c.buffer.dimension,c.normalized=!1,c.type=c.buffer.dtype,c.offset=0,c.stride=0,c.divisor=0,c.state=1):i.getBuffer(l.buffer)?(c.buffer=i.getBuffer(l.buffer),c.size=0|(+l.size||c.buffer.dimension),c.normalized=!!l.normalized||!1,c.type="type"in l?Q[l.type]:c.buffer.dtype,c.offset=0|(l.offset||0),c.stride=0|(l.stride||0),c.divisor=0|(l.divisor||0),c.state=1):"x"in l&&(c.x=+l.x||0,c.y=+l.y||0,c.z=+l.z||0,c.w=+l.w||0,c.state=2)}for(e=0;e<r.buffers.length;++e)!n[e]&&r.buffers[e]&&(r.buffers[e].destroy(),r.buffers[e]=null);return r.refresh(),t}var r=new a;return n.vaoCount+=1,t.destroy=function(){for(var e=0;e<r.buffers.length;++e)r.buffers[e]&&r.buffers[e].destroy();r.buffers.length=0,r.destroy()},t._vao=r,t._reglType="vao",t(e)},getVAO:function(e){return"function"==typeof e&&e._vao?e._vao:null},destroyBuffer:function(t){for(var r=0;r<u.length;++r){var n=u[r];n.buffer===t&&(e.disableVertexAttribArray(r),n.buffer=null)}},setVAO:t.oes_vertex_array_object?function(e){if(e!==f.currentVAO){var r=t.oes_vertex_array_object;e?r.bindVertexArrayOES(e.vao):r.bindVertexArrayOES(null),f.currentVAO=e}}:function(r){if(r!==f.currentVAO){if(r)r.bindAttrs();else for(var n=t.angle_instanced_arrays,i=0;i<u.length;++i){var a=u[i];a.buffer?(e.enableVertexAttribArray(i),e.vertexAttribPointer(i,a.size,a.type,a.normalized,a.stride,a.offfset),n&&a.divisor&&n.vertexAttribDivisorANGLE(i,a.divisor)):(e.disableVertexAttribArray(i),e.vertexAttrib4f(i,a.x,a.y,a.z,a.w))}f.currentVAO=r}},clear:t.oes_vertex_array_object?function(){G(c).forEach((function(e){e.destroy()}))}:function(){}};return a.prototype.bindAttrs=function(){for(var r=t.angle_instanced_arrays,n=this.attributes,i=0;i<n.length;++i){var a=n[i];a.buffer?(e.enableVertexAttribArray(i),e.bindBuffer(34962,a.buffer.buffer),e.vertexAttribPointer(i,a.size,a.type,a.normalized,a.stride,a.offset),r&&a.divisor&&r.vertexAttribDivisorANGLE(i,a.divisor)):(e.disableVertexAttribArray(i),e.vertexAttrib4f(i,a.x,a.y,a.z,a.w))}for(r=n.length;r<o;++r)e.disableVertexAttribArray(r)},a.prototype.refresh=function(){var e=t.oes_vertex_array_object;e&&(e.bindVertexArrayOES(this.vao),this.bindAttrs(),f.currentVAO=this)},a.prototype.destroy=function(){if(this.vao){var e=t.oes_vertex_array_object;this===f.currentVAO&&(f.currentVAO=null,e.bindVertexArrayOES(null)),e.deleteVertexArrayOES(this.vao),this.vao=null}c[this.id]&&(delete c[this.id],--n.vaoCount)},f}function M(e,t,r,n){function i(e,t,r,n){this.name=e,this.id=t,this.location=r,this.info=n}function a(e,t){for(var r=0;r<e.length;++r)if(e[r].id===t.id)return void(e[r].location=t.location);e.push(t)}function o(r,n,i){if(!(o=(i=35632===r?l:c)[n])){var a=t.str(n),o=e.createShader(r);e.shaderSource(o,a),e.compileShader(o),i[n]=o}return o}function s(e,t){this.id=p++,this.fragId=e,this.vertId=t,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,n.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function u(r,s,u){var l;l=o(35632,r.fragId);var c=o(35633,r.vertId);if(s=r.program=e.createProgram(),e.attachShader(s,l),e.attachShader(s,c),u)for(l=0;l<u.length;++l)c=u[l],e.bindAttribLocation(s,c[0],c[1]);e.linkProgram(s),c=e.getProgramParameter(s,35718),n.profile&&(r.stats.uniformsCount=c);var f=r.uniforms;for(l=0;l<c;++l)if(u=e.getActiveUniform(s,l))if(1<u.size)for(var h=0;h<u.size;++h){var p=u.name.replace("[0]","["+h+"]");a(f,new i(p,t.id(p),e.getUniformLocation(s,p),u))}else a(f,new i(u.name,t.id(u.name),e.getUniformLocation(s,u.name),u));for(c=e.getProgramParameter(s,35721),n.profile&&(r.stats.attributesCount=c),r=r.attributes,l=0;l<c;++l)(u=e.getActiveAttrib(s,l))&&a(r,new i(u.name,t.id(u.name),e.getAttribLocation(s,u.name),u))}var l={},c={},f={},h=[],p=0;return n.profile&&(r.getMaxUniformsCount=function(){var e=0;return h.forEach((function(t){t.stats.uniformsCount>e&&(e=t.stats.uniformsCount)})),e},r.getMaxAttributesCount=function(){var e=0;return h.forEach((function(t){t.stats.attributesCount>e&&(e=t.stats.attributesCount)})),e}),{clear:function(){var t=e.deleteShader.bind(e);G(l).forEach(t),l={},G(c).forEach(t),c={},h.forEach((function(t){e.deleteProgram(t.program)})),h.length=0,f={},r.shaderCount=0},program:function(t,n,i,a){var o=f[n];o||(o=f[n]={});var p=o[t];if(p&&(p.refCount++,!a))return p;var d=new s(n,t);return r.shaderCount++,u(d,i,a),p||(o[t]=d),h.push(d),B(d,{destroy:function(){if(d.refCount--,0>=d.refCount){e.deleteProgram(d.program);var t=h.indexOf(d);h.splice(t,1),r.shaderCount--}0>=o[d.vertId].refCount&&(e.deleteShader(c[d.vertId]),delete c[d.vertId],delete f[d.fragId][d.vertId]),Object.keys(f[d.fragId]).length||(e.deleteShader(l[d.fragId]),delete l[d.fragId],delete f[d.fragId])}})},restore:function(){l={},c={};for(var e=0;e<h.length;++e)u(h[e],null,h[e].attributes.map((function(e){return[e.location,e.name]})))},shader:o,frag:-1,vert:-1}}function P(e,t,r,n,i,a,o){function s(i){var a;a=null===t.next?5121:t.next.colorAttachments[0].texture._texture.type;var o=0,s=0,u=n.framebufferWidth,l=n.framebufferHeight,c=null;return K(i)?c=i:i&&(o=0|i.x,s=0|i.y,u=0|(i.width||n.framebufferWidth-o),l=0|(i.height||n.framebufferHeight-s),c=i.data||null),r(),i=u*l*4,c||(5121===a?c=new Uint8Array(i):5126===a&&(c=c||new Float32Array(i))),e.pixelStorei(3333,4),e.readPixels(o,s,u,l,6408,a,c),c}return function(e){return e&&"framebuffer"in e?function(e){var r;return t.setFBO({framebuffer:e.framebuffer},(function(){r=s(e)})),r}(e):s(e)}}function T(e){return Array.prototype.slice.call(e)}function S(e){return T(e).join("")}function $(e){return Array.isArray(e)||K(e)||s(e)}function V(e){return e.sort((function(e,t){return"viewport"===e?-1:"viewport"===t?1:e<t?-1:1}))}function D(e,t,r,n){this.thisDep=e,this.contextDep=t,this.propDep=r,this.append=n}function L(e){return e&&!(e.thisDep||e.contextDep||e.propDep)}function O(e){return new D(!1,!1,!1,e)}function j(e,t){var r=e.type;if(0===r)return new D(!0,1<=(r=e.data.length),2<=r,t);if(4===r)return new D((r=e.data).thisDep,r.contextDep,r.propDep,t);if(5===r)return new D(!1,!1,!1,t);if(6===r){for(var n=r=!1,i=!1,a=0;a<e.data.length;++a){var o=e.data[a];1===o.type?i=!0:2===o.type?n=!0:3===o.type?r=!0:0===o.type?(r=!0,1<=(o=o.data)&&(n=!0),2<=o&&(i=!0)):4===o.type&&(r=r||o.data.thisDep,n=n||o.data.contextDep,i=i||o.data.propDep)}return new D(r,n,i,t)}return new D(3===r,2===r,1===r,t)}function I(e,t,r,n,a,o,s,u,l,c,f,h,p,d,v){function g(e){return e.replace(".","_")}function b(e,t,r){var n=g(e);ae.push(e),ie[n]=ne[n]=!!r,oe[n]=t}function y(e,t,r){var n=g(e);ae.push(e),Array.isArray(r)?(ne[n]=r.slice(),ie[n]=r.slice()):ne[n]=ie[n]=r,se[n]=t}function _(){var e=function(){function e(){var e=[],t=[];return B((function(){e.push.apply(e,T(arguments))}),{def:function(){var n="v"+r++;return t.push(n),0<arguments.length&&(e.push(n,"="),e.push.apply(e,T(arguments)),e.push(";")),n},toString:function(){return S([0<t.length?"var "+t.join(",")+";":"",S(e)])}})}function t(){function t(e,t){n(e,t,"=",r.def(e,t),";")}var r=e(),n=e(),i=r.toString,a=n.toString;return B((function(){r.apply(r,T(arguments))}),{def:r.def,entry:r,exit:n,save:t,set:function(e,n,i){t(e,n),r(e,n,"=",i,";")},toString:function(){return i()+a()}})}var r=0,n=[],i=[],a=e(),o={};return{global:a,link:function(e){for(var t=0;t<i.length;++t)if(i[t]===e)return n[t];return t="g"+r++,n.push(t),i.push(e),t},block:e,proc:function(e,r){function n(){var e="a"+i.length;return i.push(e),e}var i=[];r=r||0;for(var a=0;a<r;++a)n();var s=(a=t()).toString;return o[e]=B(a,{arg:n,toString:function(){return S(["function(",i.join(),"){",s(),"}"])}})},scope:t,cond:function(){var e=S(arguments),r=t(),n=t(),i=r.toString,a=n.toString;return B(r,{then:function(){return r.apply(r,T(arguments)),this},else:function(){return n.apply(n,T(arguments)),this},toString:function(){var t=a();return t&&(t="else{"+t+"}"),S(["if(",e,"){",i(),"}",t])}})},compile:function(){var e=['"use strict";',a,"return {"];Object.keys(o).forEach((function(t){e.push('"',t,'":',o[t].toString(),",")})),e.push("}");var t=S(e).replace(/;/g,";\n").replace(/}/g,"}\n").replace(/{/g,"{\n");return Function.apply(null,n.concat(t)).apply(null,i)}}}(),r=e.link,n=e.global;e.id=ce++,e.batchId="0";var i=r(ue),a=e.shared={props:"a0"};Object.keys(ue).forEach((function(e){a[e]=n.def(i,".",e)}));var o=e.next={},s=e.current={};Object.keys(se).forEach((function(e){Array.isArray(ne[e])&&(o[e]=n.def(a.next,".",e),s[e]=n.def(a.current,".",e))}));var u=e.constants={};Object.keys(le).forEach((function(e){u[e]=n.def(JSON.stringify(le[e]))})),e.invoke=function(t,n){switch(n.type){case 0:var i=["this",a.context,a.props,e.batchId];return t.def(r(n.data),".call(",i.slice(0,Math.max(n.data.length+1,4)),")");case 1:return t.def(a.props,n.data);case 2:return t.def(a.context,n.data);case 3:return t.def("this",n.data);case 4:return n.data.append(e,t),n.data.ref;case 5:return n.data.toString();case 6:return n.data.map((function(r){return e.invoke(t,r)}))}},e.attribCache={};var l={};return e.scopeAttrib=function(e){if((e=t.id(e))in l)return l[e];var n=c.scope[e];return n||(n=c.scope[e]=new J),l[e]=r(n)},e}function w(e,t){var r=e.static,n=e.dynamic;if("framebuffer"in r){var i=r.framebuffer;return i?(i=u.getFramebuffer(i),O((function(e,t){var r=e.link(i),n=e.shared;return t.set(n.framebuffer,".next",r),n=n.context,t.set(n,".framebufferWidth",r+".width"),t.set(n,".framebufferHeight",r+".height"),r}))):O((function(e,t){var r=e.shared;return t.set(r.framebuffer,".next","null"),r=r.context,t.set(r,".framebufferWidth",r+".drawingBufferWidth"),t.set(r,".framebufferHeight",r+".drawingBufferHeight"),"null"}))}if("framebuffer"in n){var a=n.framebuffer;return j(a,(function(e,t){var r=e.invoke(t,a),n=e.shared,i=n.framebuffer;return r=t.def(i,".getFramebuffer(",r,")"),t.set(i,".next",r),n=n.context,t.set(n,".framebufferWidth",r+"?"+r+".width:"+n+".drawingBufferWidth"),t.set(n,".framebufferHeight",r+"?"+r+".height:"+n+".drawingBufferHeight"),r}))}return null}function x(e,r,n){function i(e){if(e in a){var r=t.id(a[e]);return(e=O((function(){return r}))).id=r,e}if(e in o){var n=o[e];return j(n,(function(e,t){var r=e.invoke(t,n);return t.def(e.shared.strings,".id(",r,")")}))}return null}var a=e.static,o=e.dynamic,s=i("frag"),u=i("vert"),l=null;return L(s)&&L(u)?(l=f.program(u.id,s.id,null,n),e=O((function(e,t){return e.link(l)}))):e=new D(s&&s.thisDep||u&&u.thisDep,s&&s.contextDep||u&&u.contextDep,s&&s.propDep||u&&u.propDep,(function(e,t){var r,n,i=e.shared.shader;return r=s?s.append(e,t):t.def(i,".","frag"),n=u?u.append(e,t):t.def(i,".","vert"),t.def(i+".program("+n+","+r+")")})),{frag:s,vert:u,progVar:e,program:l}}function E(e,t){function r(e,t){if(e in n){var r=0|n[e];return O((function(e,n){return t&&(e.OFFSET=r),r}))}if(e in i){var o=i[e];return j(o,(function(e,r){var n=e.invoke(r,o);return t&&(e.OFFSET=n),n}))}return t&&a?O((function(e,t){return e.OFFSET="0",0})):null}var n=e.static,i=e.dynamic,a=function(){if("elements"in n){var e=n.elements;$(e)?e=o.getElements(o.create(e,!0)):e&&(e=o.getElements(e));var t=O((function(t,r){if(e){var n=t.link(e);return t.ELEMENTS=n}return t.ELEMENTS=null}));return t.value=e,t}if("elements"in i){var r=i.elements;return j(r,(function(e,t){var n=(i=e.shared).isBufferArgs,i=i.elements,a=e.invoke(t,r),o=t.def("null");return n=t.def(n,"(",a,")"),a=e.cond(n).then(o,"=",i,".createStream(",a,");").else(o,"=",i,".getElements(",a,");"),t.entry(a),t.exit(e.cond(n).then(i,".destroyStream(",o,");")),e.ELEMENTS=o}))}return null}(),s=r("offset",!0);return{elements:a,primitive:function(){if("primitive"in n){var e=n.primitive;return O((function(t,r){return te[e]}))}if("primitive"in i){var t=i.primitive;return j(t,(function(e,r){var n=e.constants.primTypes,i=e.invoke(r,t);return r.def(n,"[",i,"]")}))}return a?L(a)?a.value?O((function(e,t){return t.def(e.ELEMENTS,".primType")})):O((function(){return 4})):new D(a.thisDep,a.contextDep,a.propDep,(function(e,t){var r=e.ELEMENTS;return t.def(r,"?",r,".primType:",4)})):null}(),count:function(){if("count"in n){var e=0|n.count;return O((function(){return e}))}if("count"in i){var t=i.count;return j(t,(function(e,r){return e.invoke(r,t)}))}return a?L(a)?a?s?new D(s.thisDep,s.contextDep,s.propDep,(function(e,t){return t.def(e.ELEMENTS,".vertCount-",e.OFFSET)})):O((function(e,t){return t.def(e.ELEMENTS,".vertCount")})):O((function(){return-1})):new D(a.thisDep||s.thisDep,a.contextDep||s.contextDep,a.propDep||s.propDep,(function(e,t){var r=e.ELEMENTS;return e.OFFSET?t.def(r,"?",r,".vertCount-",e.OFFSET,":-1"):t.def(r,"?",r,".vertCount:-1")})):null}(),instances:r("instances",!1),offset:s}}function A(e,r){var n=e.static,i=e.dynamic,o={};return Object.keys(n).forEach((function(e){var r=n[e],i=t.id(e),s=new J;if($(r))s.state=1,s.buffer=a.getBuffer(a.create(r,34962,!1,!0)),s.type=0;else if(l=a.getBuffer(r))s.state=1,s.buffer=l,s.type=0;else if("constant"in r){var u=r.constant;s.buffer="null",s.state=2,"number"==typeof u?s.x=u:_e.forEach((function(e,t){t<u.length&&(s[e]=u[t])}))}else{var l=$(r.buffer)?a.getBuffer(a.create(r.buffer,34962,!1,!0)):a.getBuffer(r.buffer),c=0|r.offset,f=0|r.stride,h=0|r.size,p=!!r.normalized,d=0;"type"in r&&(d=Q[r.type]),r=0|r.divisor,s.buffer=l,s.state=1,s.size=h,s.normalized=p,s.type=d||l.dtype,s.offset=c,s.stride=f,s.divisor=r}o[e]=O((function(e,t){var r=e.attribCache;if(i in r)return r[i];var n={isStream:!1};return Object.keys(s).forEach((function(e){n[e]=s[e]})),s.buffer&&(n.buffer=e.link(s.buffer),n.type=n.type||n.buffer+".dtype"),r[i]=n}))})),Object.keys(i).forEach((function(e){var t=i[e];o[e]=j(t,(function(e,r){function n(e){r(u[e],"=",i,".",e,"|0;")}var i=e.invoke(r,t),a=e.shared,o=e.constants,s=a.isBufferArgs,u=(a=a.buffer,{isStream:r.def(!1)}),l=new J;l.state=1,Object.keys(l).forEach((function(e){u[e]=r.def(""+l[e])}));var c=u.buffer,f=u.type;return r("if(",s,"(",i,")){",u.isStream,"=true;",c,"=",a,".createStream(",34962,",",i,");",f,"=",c,".dtype;","}else{",c,"=",a,".getBuffer(",i,");","if(",c,"){",f,"=",c,".dtype;",'}else if("constant" in ',i,"){",u.state,"=",2,";","if(typeof "+i+'.constant === "number"){',u[_e[0]],"=",i,".constant;",_e.slice(1).map((function(e){return u[e]})).join("="),"=0;","}else{",_e.map((function(e,t){return u[e]+"="+i+".constant.length>"+t+"?"+i+".constant["+t+"]:0;"})).join(""),"}}else{","if(",s,"(",i,".buffer)){",c,"=",a,".createStream(",34962,",",i,".buffer);","}else{",c,"=",a,".getBuffer(",i,".buffer);","}",f,'="type" in ',i,"?",o.glTypes,"[",i,".type]:",c,".dtype;",u.normalized,"=!!",i,".normalized;"),n("size"),n("offset"),n("stride"),n("divisor"),r("}}"),r.exit("if(",u.isStream,"){",a,".destroyStream(",c,");","}"),u}))})),o}function C(e,t,n,a,o){function s(e){var t=l[e];t&&(h[e]=t)}var u=function(e,t){if("string"==typeof(r=e.static).frag&&"string"==typeof r.vert){if(0<Object.keys(t.dynamic).length)return null;var r=t.static,n=Object.keys(r);if(0<n.length&&"number"==typeof r[n[0]]){for(var i=[],a=0;a<n.length;++a)i.push([0|r[n[a]],n[a]]);return i}}return null}(e,t),l=function(e,t,r){function n(e){if(e in i){var r=i[e];e=!0;var n,o,s=0|r.x,u=0|r.y;return"width"in r?n=0|r.width:e=!1,"height"in r?o=0|r.height:e=!1,new D(!e&&t&&t.thisDep,!e&&t&&t.contextDep,!e&&t&&t.propDep,(function(e,t){var i=e.shared.context,a=n;"width"in r||(a=t.def(i,".","framebufferWidth","-",s));var l=o;return"height"in r||(l=t.def(i,".","framebufferHeight","-",u)),[s,u,a,l]}))}if(e in a){var l=a[e];return e=j(l,(function(e,t){var r=e.invoke(t,l),n=e.shared.context,i=t.def(r,".x|0"),a=t.def(r,".y|0");return[i,a,t.def('"width" in ',r,"?",r,".width|0:","(",n,".","framebufferWidth","-",i,")"),r=t.def('"height" in ',r,"?",r,".height|0:","(",n,".","framebufferHeight","-",a,")")]})),t&&(e.thisDep=e.thisDep||t.thisDep,e.contextDep=e.contextDep||t.contextDep,e.propDep=e.propDep||t.propDep),e}return t?new D(t.thisDep,t.contextDep,t.propDep,(function(e,t){var r=e.shared.context;return[0,0,t.def(r,".","framebufferWidth"),t.def(r,".","framebufferHeight")]})):null}var i=e.static,a=e.dynamic;if(e=n("viewport")){var o=e;e=new D(e.thisDep,e.contextDep,e.propDep,(function(e,t){var r=o.append(e,t),n=e.shared.context;return t.set(n,".viewportWidth",r[2]),t.set(n,".viewportHeight",r[3]),r}))}return{viewport:e,scissor_box:n("scissor.box")}}(e,d=w(e)),f=E(e),h=function(e,t){var r=e.static,n=e.dynamic,a={};return ae.forEach((function(e){function t(t,i){if(e in r){var s=t(r[e]);a[o]=O((function(){return s}))}else if(e in n){var u=n[e];a[o]=j(u,(function(e,t){return i(e,t,e.invoke(t,u))}))}}var o=g(e);switch(e){case"cull.enable":case"blend.enable":case"dither":case"stencil.enable":case"depth.enable":case"scissor.enable":case"polygonOffset.enable":case"sample.alpha":case"sample.enable":case"depth.mask":return t((function(e){return e}),(function(e,t,r){return r}));case"depth.func":return t((function(e){return Ee[e]}),(function(e,t,r){return t.def(e.constants.compareFuncs,"[",r,"]")}));case"depth.range":return t((function(e){return e}),(function(e,t,r){return[t.def("+",r,"[0]"),t=t.def("+",r,"[1]")]}));case"blend.func":return t((function(e){return[xe["srcRGB"in e?e.srcRGB:e.src],xe["dstRGB"in e?e.dstRGB:e.dst],xe["srcAlpha"in e?e.srcAlpha:e.src],xe["dstAlpha"in e?e.dstAlpha:e.dst]]}),(function(e,t,r){function n(e,n){return t.def('"',e,n,'" in ',r,"?",r,".",e,n,":",r,".",e)}e=e.constants.blendFuncs;var i=n("src","RGB"),a=n("dst","RGB"),o=(i=t.def(e,"[",i,"]"),t.def(e,"[",n("src","Alpha"),"]"));return[i,a=t.def(e,"[",a,"]"),o,e=t.def(e,"[",n("dst","Alpha"),"]")]}));case"blend.equation":return t((function(e){return"string"==typeof e?[Z[e],Z[e]]:"object"==typeof e?[Z[e.rgb],Z[e.alpha]]:void 0}),(function(e,t,r){var n=e.constants.blendEquations,i=t.def(),a=t.def();return(e=e.cond("typeof ",r,'==="string"')).then(i,"=",a,"=",n,"[",r,"];"),e.else(i,"=",n,"[",r,".rgb];",a,"=",n,"[",r,".alpha];"),t(e),[i,a]}));case"blend.color":return t((function(e){return i(4,(function(t){return+e[t]}))}),(function(e,t,r){return i(4,(function(e){return t.def("+",r,"[",e,"]")}))}));case"stencil.mask":return t((function(e){return 0|e}),(function(e,t,r){return t.def(r,"|0")}));case"stencil.func":return t((function(e){return[Ee[e.cmp||"keep"],e.ref||0,"mask"in e?e.mask:-1]}),(function(e,t,r){return[e=t.def('"cmp" in ',r,"?",e.constants.compareFuncs,"[",r,".cmp]",":",7680),t.def(r,".ref|0"),t=t.def('"mask" in ',r,"?",r,".mask|0:-1")]}));case"stencil.opFront":case"stencil.opBack":return t((function(t){return["stencil.opBack"===e?1029:1028,Ae[t.fail||"keep"],Ae[t.zfail||"keep"],Ae[t.zpass||"keep"]]}),(function(t,r,n){function i(e){return r.def('"',e,'" in ',n,"?",a,"[",n,".",e,"]:",7680)}var a=t.constants.stencilOps;return["stencil.opBack"===e?1029:1028,i("fail"),i("zfail"),i("zpass")]}));case"polygonOffset.offset":return t((function(e){return[0|e.factor,0|e.units]}),(function(e,t,r){return[t.def(r,".factor|0"),t=t.def(r,".units|0")]}));case"cull.face":return t((function(e){var t=0;return"front"===e?t=1028:"back"===e&&(t=1029),t}),(function(e,t,r){return t.def(r,'==="front"?',1028,":",1029)}));case"lineWidth":return t((function(e){return e}),(function(e,t,r){return r}));case"frontFace":return t((function(e){return Ce[e]}),(function(e,t,r){return t.def(r+'==="cw"?2304:2305')}));case"colorMask":return t((function(e){return e.map((function(e){return!!e}))}),(function(e,t,r){return i(4,(function(e){return"!!"+r+"["+e+"]"}))}));case"sample.coverage":return t((function(e){return["value"in e?e.value:1,!!e.invert]}),(function(e,t,r){return[t.def('"value" in ',r,"?+",r,".value:1"),t=t.def("!!",r,".invert")]}))}})),a}(e),p=x(e,0,u);s("viewport"),s(g("scissor.box"));var d,v=0<Object.keys(h).length;if((d={framebuffer:d,draw:f,shader:p,state:h,dirty:v,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}}).profile=function(e){var t,r=e.static;if(e=e.dynamic,"profile"in r){var n=!!r.profile;(t=O((function(e,t){return n}))).enable=n}else if("profile"in e){var i=e.profile;t=j(i,(function(e,t){return e.invoke(t,i)}))}return t}(e),d.uniforms=function(e,t){var r=e.static,n=e.dynamic,a={};return Object.keys(r).forEach((function(e){var t,n=r[e];if("number"==typeof n||"boolean"==typeof n)t=O((function(){return n}));else if("function"==typeof n){var o=n._reglType;"texture2d"===o||"textureCube"===o?t=O((function(e){return e.link(n)})):"framebuffer"!==o&&"framebufferCube"!==o||(t=O((function(e){return e.link(n.color[0])})))}else m(n)&&(t=O((function(e){return e.global.def("[",i(n.length,(function(e){return n[e]})),"]")})));t.value=n,a[e]=t})),Object.keys(n).forEach((function(e){var t=n[e];a[e]=j(t,(function(e,r){return e.invoke(r,t)}))})),a}(n),d.drawVAO=d.scopeVAO=function(e,t){var r=e.static,n=e.dynamic;if("vao"in r){var i=r.vao;return null!==i&&null===c.getVAO(i)&&(i=c.createVAO(i)),O((function(e){return e.link(c.getVAO(i))}))}if("vao"in n){var a=n.vao;return j(a,(function(e,t){var r=e.invoke(t,a);return t.def(e.shared.vao+".getVAO("+r+")")}))}return null}(e),!d.drawVAO&&p.program&&!u&&r.angle_instanced_arrays){var b=!0;if(e=p.program.attributes.map((function(e){return e=t.static[e],b=b&&!!e,e})),b&&0<e.length){var y=c.getVAO(c.createVAO(e));d.drawVAO=new D(null,null,null,(function(e,t){return e.link(y)})),d.useVAO=!0}}return u?d.useVAO=!0:d.attributes=A(t),d.context=function(e){var t=e.static,r=e.dynamic,n={};return Object.keys(t).forEach((function(e){var r=t[e];n[e]=O((function(e,t){return"number"==typeof r||"boolean"==typeof r?""+r:e.link(r)}))})),Object.keys(r).forEach((function(e){var t=r[e];n[e]=j(t,(function(e,r){return e.invoke(r,t)}))})),n}(a),d}function k(e,t,r){var n=e.shared.context,i=e.scope();Object.keys(r).forEach((function(a){t.save(n,"."+a);var o=r[a].append(e,t);Array.isArray(o)?i(n,".",a,"=[",o.join(),"];"):i(n,".",a,"=",o,";")})),t(i)}function M(e,t,r,n){var i,a=(s=e.shared).gl,o=s.framebuffer;re&&(i=t.def(s.extensions,".webgl_draw_buffers"));var s=(u=e.constants).drawBuffer,u=u.backBuffer;e=r?r.append(e,t):t.def(o,".next"),n||t("if(",e,"!==",o,".cur){"),t("if(",e,"){",a,".bindFramebuffer(",36160,",",e,".framebuffer);"),re&&t(i,".drawBuffersWEBGL(",s,"[",e,".colorAttachments.length]);"),t("}else{",a,".bindFramebuffer(",36160,",null);"),re&&t(i,".drawBuffersWEBGL(",u,");"),t("}",o,".cur=",e,";"),n||t("}")}function P(e,t,r){var n=e.shared,a=n.gl,o=e.current,s=e.next,u=n.current,l=n.next,c=e.cond(u,".dirty");ae.forEach((function(t){var n,f;if(!((t=g(t))in r.state))if(t in s){n=s[t],f=o[t];var h=i(ne[t].length,(function(e){return c.def(n,"[",e,"]")}));c(e.cond(h.map((function(e,t){return e+"!=="+f+"["+t+"]"})).join("||")).then(a,".",se[t],"(",h,");",h.map((function(e,t){return f+"["+t+"]="+e})).join(";"),";"))}else n=c.def(l,".",t),h=e.cond(n,"!==",u,".",t),c(h),t in oe?h(e.cond(n).then(a,".enable(",oe[t],");").else(a,".disable(",oe[t],");"),u,".",t,"=",n,";"):h(a,".",se[t],"(",n,");",u,".",t,"=",n,";")})),0===Object.keys(r.state).length&&c(u,".dirty=false;"),t(c)}function I(e,t,r,n){var i=e.shared,a=e.current,o=i.current,s=i.gl;V(Object.keys(r)).forEach((function(i){var u=r[i];if(!n||n(u)){var l=u.append(e,t);if(oe[i]){var c=oe[i];L(u)?t(s,l?".enable(":".disable(",c,");"):t(e.cond(l).then(s,".enable(",c,");").else(s,".disable(",c,");")),t(o,".",i,"=",l,";")}else if(m(l)){var f=a[i];t(s,".",se[i],"(",l,");",l.map((function(e,t){return f+"["+t+"]="+e})).join(";"),";")}else t(s,".",se[i],"(",l,");",o,".",i,"=",l,";")}}))}function F(e,t){ee&&(e.instancing=t.def(e.shared.extensions,".angle_instanced_arrays"))}function R(e,t,r,n,i){function a(){return"undefined"==typeof performance?"Date.now()":"performance.now()"}function o(e){e(l=t.def(),"=",a(),";"),"string"==typeof i?e(h,".count+=",i,";"):e(h,".count++;"),d&&(n?e(c=t.def(),"=",m,".getNumPendingQueries();"):e(m,".beginQuery(",h,");"))}function s(e){e(h,".cpuTime+=",a(),"-",l,";"),d&&(n?e(m,".pushScopeStats(",c,",",m,".getNumPendingQueries(),",h,");"):e(m,".endQuery();"))}function u(e){var r=t.def(p,".profile");t(p,".profile=",e,";"),t.exit(p,".profile=",r,";")}var l,c,f=e.shared,h=e.stats,p=f.current,m=f.timer;if(r=r.profile){if(L(r))return void(r.enable?(o(t),s(t.exit),u("true")):u("false"));u(r=r.append(e,t))}else r=t.def(p,".profile");o(f=e.block()),t("if(",r,"){",f,"}"),s(e=e.block()),t.exit("if(",r,"){",e,"}")}function U(e,t,r,n,i){function a(r,n,i){function a(){t("if(!",c,".buffer){",u,".enableVertexAttribArray(",l,");}");var r,a=i.type;r=i.size?t.def(i.size,"||",n):n,t("if(",c,".type!==",a,"||",c,".size!==",r,"||",p.map((function(e){return c+"."+e+"!=="+i[e]})).join("||"),"){",u,".bindBuffer(",34962,",",f,".buffer);",u,".vertexAttribPointer(",[l,r,a,i.normalized,i.stride,i.offset],");",c,".type=",a,";",c,".size=",r,";",p.map((function(e){return c+"."+e+"="+i[e]+";"})).join(""),"}"),ee&&(a=i.divisor,t("if(",c,".divisor!==",a,"){",e.instancing,".vertexAttribDivisorANGLE(",[l,a],");",c,".divisor=",a,";}"))}function s(){t("if(",c,".buffer){",u,".disableVertexAttribArray(",l,");",c,".buffer=null;","}if(",_e.map((function(e,t){return c+"."+e+"!=="+h[t]})).join("||"),"){",u,".vertexAttrib4f(",l,",",h,");",_e.map((function(e,t){return c+"."+e+"="+h[t]+";"})).join(""),"}")}var u=o.gl,l=t.def(r,".location"),c=t.def(o.attributes,"[",l,"]");r=i.state;var f=i.buffer,h=[i.x,i.y,i.z,i.w],p=["buffer","normalized","offset","stride"];1===r?a():2===r?s():(t("if(",r,"===",1,"){"),a(),t("}else{"),s(),t("}"))}var o=e.shared;n.forEach((function(n){var o,s=n.name,u=r.attributes[s];if(u){if(!i(u))return;o=u.append(e,t)}else{if(!i(ke))return;var l=e.scopeAttrib(s);o={},Object.keys(new J).forEach((function(e){o[e]=t.def(l,".",e)}))}a(e.link(n),function(e){switch(e){case 35664:case 35667:case 35671:return 2;case 35665:case 35668:case 35672:return 3;case 35666:case 35669:case 35673:return 4;default:return 1}}(n.info.type),o)}))}function N(e,r,n,a,o){for(var s,u=e.shared,l=u.gl,c=0;c<a.length;++c){var f,h=(v=a[c]).name,p=v.info.type,d=n.uniforms[h],v=e.link(v)+".location";if(d){if(!o(d))continue;if(L(d)){if(h=d.value,35678===p||35680===p)r(l,".uniform1i(",v,",",(p=e.link(h._texture||h.color[0]._texture))+".bind());"),r.exit(p,".unbind();");else if(35674===p||35675===p||35676===p)d=2,35675===p?d=3:35676===p&&(d=4),r(l,".uniformMatrix",d,"fv(",v,",false,",h=e.global.def("new Float32Array(["+Array.prototype.slice.call(h)+"])"),");");else{switch(p){case 5126:s="1f";break;case 35664:s="2f";break;case 35665:s="3f";break;case 35666:s="4f";break;case 35670:case 5124:s="1i";break;case 35671:case 35667:s="2i";break;case 35672:case 35668:s="3i";break;case 35673:s="4i";break;case 35669:s="4i"}r(l,".uniform",s,"(",v,",",m(h)?Array.prototype.slice.call(h):h,");")}continue}f=d.append(e,r)}else{if(!o(ke))continue;f=r.def(u.uniforms,"[",t.id(h),"]")}switch(35678===p?r("if(",f,"&&",f,'._reglType==="framebuffer"){',f,"=",f,".color[0];","}"):35680===p&&r("if(",f,"&&",f,'._reglType==="framebufferCube"){',f,"=",f,".color[0];","}"),h=1,p){case 35678:case 35680:p=r.def(f,"._texture"),r(l,".uniform1i(",v,",",p,".bind());"),r.exit(p,".unbind();");continue;case 5124:case 35670:s="1i";break;case 35667:case 35671:s="2i",h=2;break;case 35668:case 35672:s="3i",h=3;break;case 35669:case 35673:s="4i",h=4;break;case 5126:s="1f";break;case 35664:s="2f",h=2;break;case 35665:s="3f",h=3;break;case 35666:s="4f",h=4;break;case 35674:s="Matrix2fv";break;case 35675:s="Matrix3fv";break;case 35676:s="Matrix4fv"}if(r(l,".uniform",s,"(",v,","),"M"===s.charAt(0)){v=Math.pow(p-35674+2,2);var g=e.global.def("new Float32Array(",v,")");Array.isArray(f)?r("false,(",i(v,(function(e){return g+"["+e+"]="+f[e]})),",",g,")"):r("false,(Array.isArray(",f,")||",f," instanceof Float32Array)?",f,":(",i(v,(function(e){return g+"["+e+"]="+f+"["+e+"]"})),",",g,")")}else r(1<h?i(h,(function(e){return Array.isArray(f)?f[e]:f+"["+e+"]"})):f);r(");")}}function q(e,t,r,n){function i(i){var a=h[i];return a?a.contextDep&&n.contextDynamic||a.propDep?a.append(e,r):a.append(e,t):t.def(f,".",i)}function a(){function e(){r(u,".drawElementsInstancedANGLE(",[d,v,g,m+"<<(("+g+"-5121)>>1)",s],");")}function t(){r(u,".drawArraysInstancedANGLE(",[d,m,v,s],");")}p?b?e():(r("if(",p,"){"),e(),r("}else{"),t(),r("}")):t()}function o(){function e(){r(c+".drawElements("+[d,v,g,m+"<<(("+g+"-5121)>>1)"]+");")}function t(){r(c+".drawArrays("+[d,m,v]+");")}p?b?e():(r("if(",p,"){"),e(),r("}else{"),t(),r("}")):t()}var s,u,l=e.shared,c=l.gl,f=l.draw,h=n.draw,p=function(){var i=h.elements,a=t;return i?((i.contextDep&&n.contextDynamic||i.propDep)&&(a=r),i=i.append(e,a)):i=a.def(f,".","elements"),i&&a("if("+i+")"+c+".bindBuffer(34963,"+i+".buffer.buffer);"),i}(),d=i("primitive"),m=i("offset"),v=function(){var i=h.count,a=t;return i?((i.contextDep&&n.contextDynamic||i.propDep)&&(a=r),i=i.append(e,a)):i=a.def(f,".","count"),i}();if("number"==typeof v){if(0===v)return}else r("if(",v,"){"),r.exit("}");ee&&(s=i("instances"),u=e.instancing);var g=p+".type",b=h.elements&&L(h.elements);ee&&("number"!=typeof s||0<=s)?"string"==typeof s?(r("if(",s,">0){"),a(),r("}else if(",s,"<0){"),o(),r("}")):a():o()}function H(e,t,r,n,i){return i=(t=_()).proc("body",i),ee&&(t.instancing=i.def(t.shared.extensions,".angle_instanced_arrays")),e(t,i,r,n),t.compile().body}function K(e,t,r,n){F(e,t),r.useVAO?r.drawVAO?t(e.shared.vao,".setVAO(",r.drawVAO.append(e,t),");"):t(e.shared.vao,".setVAO(",e.shared.vao,".targetVAO);"):(t(e.shared.vao,".setVAO(null);"),U(e,t,r,n.attributes,(function(){return!0}))),N(e,t,r,n.uniforms,(function(){return!0})),q(e,t,t,r)}function G(e,t,r,n){function i(){return!0}e.batchId="a1",F(e,t),U(e,t,r,n.attributes,i),N(e,t,r,n.uniforms,i),q(e,t,t,r)}function W(e,t,r,n){function i(e){return e.contextDep&&o||e.propDep}function a(e){return!i(e)}F(e,t);var o=r.contextDep,s=t.def(),u=t.def();e.shared.props=u,e.batchId=s;var l=e.scope(),c=e.scope();t(l.entry,"for(",s,"=0;",s,"<","a1",";++",s,"){",u,"=","a0","[",s,"];",c,"}",l.exit),r.needsContext&&k(e,c,r.context),r.needsFramebuffer&&M(e,c,r.framebuffer),I(e,c,r.state,i),r.profile&&i(r.profile)&&R(e,c,r,!1,!0),n?(r.useVAO?r.drawVAO?i(r.drawVAO)?c(e.shared.vao,".setVAO(",r.drawVAO.append(e,c),");"):l(e.shared.vao,".setVAO(",r.drawVAO.append(e,l),");"):l(e.shared.vao,".setVAO(",e.shared.vao,".targetVAO);"):(l(e.shared.vao,".setVAO(null);"),U(e,l,r,n.attributes,a),U(e,c,r,n.attributes,i)),N(e,l,r,n.uniforms,a),N(e,c,r,n.uniforms,i),q(e,l,c,r)):(t=e.global.def("{}"),n=r.shader.progVar.append(e,c),u=c.def(n,".id"),l=c.def(t,"[",u,"]"),c(e.shared.gl,".useProgram(",n,".program);","if(!",l,"){",l,"=",t,"[",u,"]=",e.link((function(t){return H(G,e,r,t,2)})),"(",n,");}",l,".call(this,a0[",s,"],",s,");"))}function Y(e,r){function n(t){var n=r.shader[t];n&&i.set(a.shader,"."+t,n.append(e,i))}var i=e.proc("scope",3);e.batchId="a2";var a=e.shared,o=a.current;k(e,i,r.context),r.framebuffer&&r.framebuffer.append(e,i),V(Object.keys(r.state)).forEach((function(t){var n=r.state[t].append(e,i);m(n)?n.forEach((function(r,n){i.set(e.next[t],"["+n+"]",r)})):i.set(a.next,"."+t,n)})),R(e,i,r,!0,!0),["elements","offset","count","instances","primitive"].forEach((function(t){var n=r.draw[t];n&&i.set(a.draw,"."+t,""+n.append(e,i))})),Object.keys(r.uniforms).forEach((function(n){var o=r.uniforms[n].append(e,i);Array.isArray(o)&&(o="["+o.join()+"]"),i.set(a.uniforms,"["+t.id(n)+"]",o)})),Object.keys(r.attributes).forEach((function(t){var n=r.attributes[t].append(e,i),a=e.scopeAttrib(t);Object.keys(new J).forEach((function(e){i.set(a,"."+e,n[e])}))})),r.scopeVAO&&i.set(a.vao,".targetVAO",r.scopeVAO.append(e,i)),n("vert"),n("frag"),0<Object.keys(r.state).length&&(i(o,".dirty=true;"),i.exit(o,".dirty=true;")),i("a1(",e.shared.context,",a0,",e.batchId,");")}function X(e,t,r){var n=t.static[r];if(n&&function(e){if("object"==typeof e&&!m(e)){for(var t=Object.keys(e),r=0;r<t.length;++r)if(z.isDynamic(e[t[r]]))return!0;return!1}}(n)){var i=e.global,a=Object.keys(n),o=!1,s=!1,u=!1,l=e.global.def("{}");a.forEach((function(t){var r=n[t];if(z.isDynamic(r))"function"==typeof r&&(r=n[t]=z.unbox(r)),t=j(r,null),o=o||t.thisDep,u=u||t.propDep,s=s||t.contextDep;else{switch(i(l,".",t,"="),typeof r){case"number":i(r);break;case"string":i('"',r,'"');break;case"object":Array.isArray(r)&&i("[",r.join(),"]");break;default:i(e.link(r))}i(";")}})),t.dynamic[r]=new z.DynamicVariable(4,{thisDep:o,contextDep:s,propDep:u,ref:l,append:function(e,t){a.forEach((function(r){var i=n[r];z.isDynamic(i)&&(i=e.invoke(t,i),t(l,".",r,"=",i,";"))}))}}),delete t.static[r]}}var J=c.Record,Z={add:32774,subtract:32778,"reverse subtract":32779};r.ext_blend_minmax&&(Z.min=32775,Z.max=32776);var ee=r.angle_instanced_arrays,re=r.webgl_draw_buffers,ne={dirty:!0,profile:v.profile},ie={},ae=[],oe={},se={};b("dither",3024),b("blend.enable",3042),y("blend.color","blendColor",[0,0,0,0]),y("blend.equation","blendEquationSeparate",[32774,32774]),y("blend.func","blendFuncSeparate",[1,0,1,0]),b("depth.enable",2929,!0),y("depth.func","depthFunc",513),y("depth.range","depthRange",[0,1]),y("depth.mask","depthMask",!0),y("colorMask","colorMask",[!0,!0,!0,!0]),b("cull.enable",2884),y("cull.face","cullFace",1029),y("frontFace","frontFace",2305),y("lineWidth","lineWidth",1),b("polygonOffset.enable",32823),y("polygonOffset.offset","polygonOffset",[0,0]),b("sample.alpha",32926),b("sample.enable",32928),y("sample.coverage","sampleCoverage",[1,!1]),b("stencil.enable",2960),y("stencil.mask","stencilMask",-1),y("stencil.func","stencilFunc",[519,0,-1]),y("stencil.opFront","stencilOpSeparate",[1028,7680,7680,7680]),y("stencil.opBack","stencilOpSeparate",[1029,7680,7680,7680]),b("scissor.enable",3089),y("scissor.box","scissor",[0,0,e.drawingBufferWidth,e.drawingBufferHeight]),y("viewport","viewport",[0,0,e.drawingBufferWidth,e.drawingBufferHeight]);var ue={gl:e,context:p,strings:t,next:ie,current:ne,draw:h,elements:o,buffer:a,shader:f,attributes:c.state,vao:c,uniforms:l,framebuffer:u,extensions:r,timer:d,isBufferArgs:$},le={primTypes:te,compareFuncs:Ee,blendFuncs:xe,blendEquations:Z,stencilOps:Ae,glTypes:Q,orientationType:Ce};re&&(le.backBuffer=[1029],le.drawBuffer=i(n.maxDrawbuffers,(function(e){return 0===e?[0]:i(e,(function(e){return 36064+e}))})));var ce=0;return{next:ie,current:ne,procs:function(){var e=_(),t=e.proc("poll"),a=e.proc("refresh"),o=e.block();t(o),a(o);var s,u=e.shared,l=u.gl,c=u.next,f=u.current;o(f,".dirty=false;"),M(e,t),M(e,a,null,!0),ee&&(s=e.link(ee)),r.oes_vertex_array_object&&a(e.link(r.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var h=0;h<n.maxAttributes;++h){var p=a.def(u.attributes,"[",h,"]"),d=e.cond(p,".buffer");d.then(l,".enableVertexAttribArray(",h,");",l,".bindBuffer(",34962,",",p,".buffer.buffer);",l,".vertexAttribPointer(",h,",",p,".size,",p,".type,",p,".normalized,",p,".stride,",p,".offset);").else(l,".disableVertexAttribArray(",h,");",l,".vertexAttrib4f(",h,",",p,".x,",p,".y,",p,".z,",p,".w);",p,".buffer=null;"),a(d),ee&&a(s,".vertexAttribDivisorANGLE(",h,",",p,".divisor);")}return a(e.shared.vao,".currentVAO=null;",e.shared.vao,".setVAO(",e.shared.vao,".targetVAO);"),Object.keys(oe).forEach((function(r){var n=oe[r],i=o.def(c,".",r),s=e.block();s("if(",i,"){",l,".enable(",n,")}else{",l,".disable(",n,")}",f,".",r,"=",i,";"),a(s),t("if(",i,"!==",f,".",r,"){",s,"}")})),Object.keys(se).forEach((function(r){var n,s,u=se[r],h=ne[r],p=e.block();p(l,".",u,"("),m(h)?(u=h.length,n=e.global.def(c,".",r),s=e.global.def(f,".",r),p(i(u,(function(e){return n+"["+e+"]"})),");",i(u,(function(e){return s+"["+e+"]="+n+"["+e+"];"})).join("")),t("if(",i(u,(function(e){return n+"["+e+"]!=="+s+"["+e+"]"})).join("||"),"){",p,"}")):(n=o.def(c,".",r),s=o.def(f,".",r),p(n,");",f,".",r,"=",n,";"),t("if(",n,"!==",s,"){",p,"}")),a(p)})),e.compile()}(),compile:function(e,t,r,n,i){var a=_();a.stats=a.link(i),Object.keys(t.static).forEach((function(e){X(a,t,e)})),we.forEach((function(t){X(a,e,t)}));var o=C(e,t,r,n);return function(e,t){var r=e.proc("draw",1);F(e,r),k(e,r,t.context),M(e,r,t.framebuffer),P(e,r,t),I(e,r,t.state),R(e,r,t,!1,!0);var n=t.shader.progVar.append(e,r);if(r(e.shared.gl,".useProgram(",n,".program);"),t.shader.program)K(e,r,t,t.shader.program);else{r(e.shared.vao,".setVAO(null);");var i=e.global.def("{}"),a=r.def(n,".id"),o=r.def(i,"[",a,"]");r(e.cond(o).then(o,".call(this,a0);").else(o,"=",i,"[",a,"]=",e.link((function(r){return H(K,e,t,r,1)})),"(",n,");",o,".call(this,a0);"))}0<Object.keys(t.state).length&&r(e.shared.current,".dirty=true;")}(a,o),Y(a,o),function(e,t){function r(e){return e.contextDep&&i||e.propDep}var n=e.proc("batch",2);e.batchId="0",F(e,n);var i=!1,a=!0;Object.keys(t.context).forEach((function(e){i=i||t.context[e].propDep})),i||(k(e,n,t.context),a=!1);var o=!1;if((s=t.framebuffer)?(s.propDep?i=o=!0:s.contextDep&&i&&(o=!0),o||M(e,n,s)):M(e,n,null),t.state.viewport&&t.state.viewport.propDep&&(i=!0),P(e,n,t),I(e,n,t.state,(function(e){return!r(e)})),t.profile&&r(t.profile)||R(e,n,t,!1,"a1"),t.contextDep=i,t.needsContext=a,t.needsFramebuffer=o,(a=t.shader.progVar).contextDep&&i||a.propDep)W(e,n,t,null);else if(a=a.append(e,n),n(e.shared.gl,".useProgram(",a,".program);"),t.shader.program)W(e,n,t,t.shader.program);else{n(e.shared.vao,".setVAO(null);");var s=e.global.def("{}"),u=(o=n.def(a,".id"),n.def(s,"[",o,"]"));n(e.cond(u).then(u,".call(this,a0,a1);").else(u,"=",s,"[",o,"]=",e.link((function(r){return H(W,e,t,r,2)})),"(",a,");",u,".call(this,a0,a1);"))}0<Object.keys(t.state).length&&n(e.shared.current,".dirty=true;")}(a,o),B(a.compile(),{destroy:function(){o.shader.program.destroy()}})}}}function F(e,t){for(var r=0;r<e.length;++r)if(e[r]===t)return r;return-1}var B=function(e,t){for(var r=Object.keys(t),n=0;n<r.length;++n)e[r[n]]=t[r[n]];return e},R=0,z={DynamicVariable:e,define:function(r,n){return new e(r,t(n+""))},isDynamic:function(t){return"function"==typeof t&&!t._reglType||t instanceof e},unbox:function t(r,n){return"function"==typeof r?new e(0,r):"number"==typeof r||"boolean"==typeof r?new e(5,r):Array.isArray(r)?new e(6,r.map((function(e,r){return t(e,n+"["+r+"]")}))):r instanceof e?r:void 0},accessor:t},U={next:"function"==typeof requestAnimationFrame?function(e){return requestAnimationFrame(e)}:function(e){return setTimeout(e,16)},cancel:"function"==typeof cancelAnimationFrame?function(e){return cancelAnimationFrame(e)}:clearTimeout},N="undefined"!=typeof performance&&performance.now?function(){return performance.now()}:function(){return+new Date},q=o();q.zero=o();var H=function(e,t){var r=1;t.ext_texture_filter_anisotropic&&(r=e.getParameter(34047));var n=1,i=1;t.webgl_draw_buffers&&(n=e.getParameter(34852),i=e.getParameter(36063));var a=!!t.oes_texture_float;if(a){a=e.createTexture(),e.bindTexture(3553,a),e.texImage2D(3553,0,6408,1,1,0,6408,5126,null);var o=e.createFramebuffer();if(e.bindFramebuffer(36160,o),e.framebufferTexture2D(36160,36064,3553,a,0),e.bindTexture(3553,null),36053!==e.checkFramebufferStatus(36160))a=!1;else{e.viewport(0,0,1,1),e.clearColor(1,0,0,1),e.clear(16384);var s=q.allocType(5126,4);e.readPixels(0,0,1,1,6408,5126,s),e.getError()?a=!1:(e.deleteFramebuffer(o),e.deleteTexture(a),a=1===s[0]),q.freeType(s)}}return s=!0,"undefined"!=typeof navigator&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent))||(s=e.createTexture(),o=q.allocType(5121,36),e.activeTexture(33984),e.bindTexture(34067,s),e.texImage2D(34069,0,6408,3,3,0,6408,5121,o),q.freeType(o),e.bindTexture(34067,null),e.deleteTexture(s),s=!e.getError()),{colorBits:[e.getParameter(3410),e.getParameter(3411),e.getParameter(3412),e.getParameter(3413)],depthBits:e.getParameter(3414),stencilBits:e.getParameter(3415),subpixelBits:e.getParameter(3408),extensions:Object.keys(t).filter((function(e){return!!t[e]})),maxAnisotropic:r,maxDrawbuffers:n,maxColorAttachments:i,pointSizeDims:e.getParameter(33901),lineWidthDims:e.getParameter(33902),maxViewportDims:e.getParameter(3386),maxCombinedTextureUnits:e.getParameter(35661),maxCubeMapSize:e.getParameter(34076),maxRenderbufferSize:e.getParameter(34024),maxTextureUnits:e.getParameter(34930),maxTextureSize:e.getParameter(3379),maxAttributes:e.getParameter(34921),maxVertexUniforms:e.getParameter(36347),maxVertexTextureUnits:e.getParameter(35660),maxVaryingVectors:e.getParameter(36348),maxFragmentUniforms:e.getParameter(36349),glsl:e.getParameter(35724),renderer:e.getParameter(7937),vendor:e.getParameter(7936),version:e.getParameter(7938),readFloat:a,npotTextureCube:s}},K=function(e){return e instanceof Uint8Array||e instanceof Uint16Array||e instanceof Uint32Array||e instanceof Int8Array||e instanceof Int16Array||e instanceof Int32Array||e instanceof Float32Array||e instanceof Float64Array||e instanceof Uint8ClampedArray},G=function(e){return Object.keys(e).map((function(t){return e[t]}))},W={shape:function(e){for(var t=[];e.length;e=e[0])t.push(e.length);return t},flatten:function(e,t,r,n){var i=1;if(t.length)for(var a=0;a<t.length;++a)i*=t[a];else i=0;switch(r=n||q.allocType(r,i),t.length){case 0:break;case 1:for(n=t[0],t=0;t<n;++t)r[t]=e[t];break;case 2:for(n=t[0],t=t[1],a=i=0;a<n;++a)for(var o=e[a],s=0;s<t;++s)r[i++]=o[s];break;case 3:u(e,t[0],t[1],t[2],r,0);break;default:!function e(t,r,n,i,a){for(var o=1,s=n+1;s<r.length;++s)o*=r[s];var l=r[n];if(4==r.length-n){var c=r[n+1],f=r[n+2];for(r=r[n+3],s=0;s<l;++s)u(t[s],c,f,r,i,a),a+=o}else for(s=0;s<l;++s)e(t[s],r,n+1,i,a),a+=o}(e,t,0,r,0)}return r}},Y={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},Q={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,float:5126,float32:5126},X={dynamic:35048,stream:35040,static:35044},J=W.flatten,Z=W.shape,ee=[];ee[5120]=1,ee[5122]=2,ee[5124]=4,ee[5121]=1,ee[5123]=2,ee[5125]=4,ee[5126]=4;var te={points:0,point:0,lines:1,line:1,triangles:4,triangle:4,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},re=new Float32Array(1),ne=new Uint32Array(re.buffer),ie=[9984,9986,9985,9987],ae=[0,6409,6410,6407,6408],oe={};oe[6409]=oe[6406]=oe[6402]=1,oe[34041]=oe[6410]=2,oe[6407]=oe[35904]=3,oe[6408]=oe[35906]=4;var se=v("HTMLCanvasElement"),ue=v("OffscreenCanvas"),le=v("CanvasRenderingContext2D"),ce=v("ImageBitmap"),fe=v("HTMLImageElement"),he=v("HTMLVideoElement"),pe=Object.keys(Y).concat([se,ue,le,ce,fe,he]),de=[];de[5121]=1,de[5126]=4,de[36193]=2,de[5123]=2,de[5125]=4;var me=[];me[32854]=2,me[32855]=2,me[36194]=2,me[34041]=4,me[33776]=.5,me[33777]=.5,me[33778]=1,me[33779]=1,me[35986]=.5,me[35987]=1,me[34798]=1,me[35840]=.5,me[35841]=.25,me[35842]=.5,me[35843]=.25,me[36196]=.5;var ve=[];ve[32854]=2,ve[32855]=2,ve[36194]=2,ve[33189]=2,ve[36168]=1,ve[34041]=4,ve[35907]=4,ve[34836]=16,ve[34842]=8,ve[34843]=6;var ge=function(e,t,r,n,i){function a(e){this.id=l++,this.refCount=1,this.renderbuffer=e,this.format=32854,this.height=this.width=0,i.profile&&(this.stats={size:0})}function o(t){var r=t.renderbuffer;e.bindRenderbuffer(36161,null),e.deleteRenderbuffer(r),t.renderbuffer=null,t.refCount=0,delete c[t.id],n.renderbufferCount--}var s={rgba4:32854,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};t.ext_srgb&&(s.srgba=35907),t.ext_color_buffer_half_float&&(s.rgba16f=34842,s.rgb16f=34843),t.webgl_color_buffer_float&&(s.rgba32f=34836);var u=[];Object.keys(s).forEach((function(e){u[s[e]]=e}));var l=0,c={};return a.prototype.decRef=function(){0>=--this.refCount&&o(this)},i.profile&&(n.getTotalRenderbufferSize=function(){var e=0;return Object.keys(c).forEach((function(t){e+=c[t].stats.size})),e}),{create:function(t,r){function o(t,r){var n=0,a=0,c=32854;if("object"==typeof t&&t?("shape"in t?(n=0|(a=t.shape)[0],a=0|a[1]):("radius"in t&&(n=a=0|t.radius),"width"in t&&(n=0|t.width),"height"in t&&(a=0|t.height)),"format"in t&&(c=s[t.format])):"number"==typeof t?(n=0|t,a="number"==typeof r?0|r:n):t||(n=a=1),n!==l.width||a!==l.height||c!==l.format)return o.width=l.width=n,o.height=l.height=a,l.format=c,e.bindRenderbuffer(36161,l.renderbuffer),e.renderbufferStorage(36161,c,n,a),i.profile&&(l.stats.size=ve[l.format]*l.width*l.height),o.format=u[l.format],o}var l=new a(e.createRenderbuffer());return c[l.id]=l,n.renderbufferCount++,o(t,r),o.resize=function(t,r){var n=0|t,a=0|r||n;return n===l.width&&a===l.height||(o.width=l.width=n,o.height=l.height=a,e.bindRenderbuffer(36161,l.renderbuffer),e.renderbufferStorage(36161,l.format,n,a),i.profile&&(l.stats.size=ve[l.format]*l.width*l.height)),o},o._reglType="renderbuffer",o._renderbuffer=l,i.profile&&(o.stats=l.stats),o.destroy=function(){l.decRef()},o},clear:function(){G(c).forEach(o)},restore:function(){G(c).forEach((function(t){t.renderbuffer=e.createRenderbuffer(),e.bindRenderbuffer(36161,t.renderbuffer),e.renderbufferStorage(36161,t.format,t.width,t.height)})),e.bindRenderbuffer(36161,null)}}},be=[];be[6408]=4,be[6407]=3;var ye=[];ye[5121]=1,ye[5126]=4,ye[36193]=2;var _e=["x","y","z","w"],we="blend.func blend.equation stencil.func stencil.opFront stencil.opBack sample.coverage viewport scissor.box polygonOffset.offset".split(" "),xe={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},Ee={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},Ae={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},Ce={cw:2304,ccw:2305},ke=new D(!1,!1,!1,(function(){}));return function(e){function t(){if(0===X.length)C&&C.update(),te=null;else{te=U.next(t),d();for(var e=X.length-1;0<=e;--e){var r=X[e];r&&r(V,null,0)}g.flush(),C&&C.update()}}function i(){!te&&0<X.length&&(te=U.next(t))}function a(){te&&(U.cancel(t),te=null)}function o(e){e.preventDefault(),a(),J.forEach((function(e){e()}))}function s(e){g.getError(),y.restore(),R.restore(),L.restore(),q.restore(),K.restore(),G.restore(),O.restore(),C&&C.restore(),W.procs.refresh(),i(),Z.forEach((function(e){e()}))}function u(e){function t(e,t){var r={},n={};return Object.keys(e).forEach((function(i){var a=e[i];if(z.isDynamic(a))n[i]=z.unbox(a,i);else{if(t&&Array.isArray(a))for(var o=0;o<a.length;++o)if(z.isDynamic(a[o]))return void(n[i]=z.unbox(a,i));r[i]=a}})),{dynamic:n,static:r}}var r=t(e.context||{},!0),n=t(e.uniforms||{},!0),i=t(e.attributes||{},!1);e=t(function(e){function t(e){if(e in r){var t=r[e];delete r[e],Object.keys(t).forEach((function(n){r[e+"."+n]=t[n]}))}}var r=B({},e);return delete r.uniforms,delete r.attributes,delete r.context,delete r.vao,"stencil"in r&&r.stencil.op&&(r.stencil.opBack=r.stencil.opFront=r.stencil.op,delete r.stencil.op),t("blend"),t("depth"),t("cull"),t("stencil"),t("polygonOffset"),t("scissor"),t("sample"),"vao"in e&&(r.vao=e.vao),r}(e),!1);var a={gpuTime:0,cpuTime:0,count:0},o=W.compile(e,i,n,r,a),s=o.draw,u=o.batch,l=o.scope,c=[];return B((function(e,t){var r;if("function"==typeof e)return l.call(this,null,e,0);if("function"==typeof t)if("number"==typeof e)for(r=0;r<e;++r)l.call(this,null,t,r);else{if(!Array.isArray(e))return l.call(this,e,t,0);for(r=0;r<e.length;++r)l.call(this,e[r],t,r)}else if("number"==typeof e){if(0<e)return u.call(this,function(e){for(;c.length<e;)c.push(null);return c}(0|e),0|e)}else{if(!Array.isArray(e))return s.call(this,e);if(e.length)return u.call(this,e,e.length)}}),{stats:a,destroy:function(){o.destroy()}})}function l(e,t){var r=0;W.procs.poll();var n=t.color;n&&(g.clearColor(+n[0]||0,+n[1]||0,+n[2]||0,+n[3]||0),r|=16384),"depth"in t&&(g.clearDepth(+t.depth),r|=256),"stencil"in t&&(g.clearStencil(0|t.stencil),r|=1024),g.clear(r)}function c(e){return X.push(e),i(),{cancel:function(){var t=F(X,e);X[t]=function e(){var t=F(X,e);X[t]=X[X.length-1],--X.length,0>=X.length&&a()}}}}function f(){var e=Y.viewport,t=Y.scissor_box;e[0]=e[1]=t[0]=t[1]=0,V.viewportWidth=V.framebufferWidth=V.drawingBufferWidth=e[2]=t[2]=g.drawingBufferWidth,V.viewportHeight=V.framebufferHeight=V.drawingBufferHeight=e[3]=t[3]=g.drawingBufferHeight}function d(){V.tick+=1,V.time=v(),f(),W.procs.poll()}function m(){q.refresh(),f(),W.procs.refresh(),C&&C.update()}function v(){return(N()-T)/1e3}if(!(e=function(e){var t,i,a,o,s=e||{};e={};var u=[],l=[],c="undefined"==typeof window?1:window.devicePixelRatio,f=!1,h=function(e){},p=function(){};if("string"==typeof s?t=document.querySelector(s):"object"==typeof s&&("string"==typeof s.nodeName&&"function"==typeof s.appendChild&&"function"==typeof s.getBoundingClientRect?t=s:"function"==typeof s.drawArrays||"function"==typeof s.drawElements?a=(o=s).canvas:("gl"in s?o=s.gl:"canvas"in s?a=n(s.canvas):"container"in s&&(i=n(s.container)),"attributes"in s&&(e=s.attributes),"extensions"in s&&(u=r(s.extensions)),"optionalExtensions"in s&&(l=r(s.optionalExtensions)),"onDone"in s&&(h=s.onDone),"profile"in s&&(f=!!s.profile),"pixelRatio"in s&&(c=+s.pixelRatio))),t&&("canvas"===t.nodeName.toLowerCase()?a=t:i=t),!o){if(!a){if(!(t=function(e,t,r){function n(){var t=window.innerWidth,n=window.innerHeight;e!==document.body&&(t=(n=e.getBoundingClientRect()).right-n.left,n=n.bottom-n.top),a.width=r*t,a.height=r*n,B(a.style,{width:t+"px",height:n+"px"})}var i,a=document.createElement("canvas");return B(a.style,{border:0,margin:0,padding:0,top:0,left:0}),e.appendChild(a),e===document.body&&(a.style.position="absolute",B(e.style,{margin:0,padding:0})),e!==document.body&&"function"==typeof ResizeObserver?(i=new ResizeObserver((function(){setTimeout(n)}))).observe(e):window.addEventListener("resize",n,!1),n(),{canvas:a,onDestroy:function(){i?i.disconnect():window.removeEventListener("resize",n),e.removeChild(a)}}}(i||document.body,0,c)))return null;a=t.canvas,p=t.onDestroy}void 0===e.premultipliedAlpha&&(e.premultipliedAlpha=!0),o=function(e,t){function r(r){try{return e.getContext(r,t)}catch(a){return null}}return r("webgl")||r("experimental-webgl")||r("webgl-experimental")}(a,e)}return o?{gl:o,canvas:a,container:i,extensions:u,optionalExtensions:l,pixelRatio:c,profile:f,onDone:h,onDestroy:p}:(p(),h("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}(e)))return null;var g=e.gl,b=g.getContextAttributes();g.isContextLost();var y=function(e,t){function r(t){var r;t=t.toLowerCase();try{r=n[t]=e.getExtension(t)}catch(i){}return!!r}for(var n={},i=0;i<t.extensions.length;++i){var a=t.extensions[i];if(!r(a))return t.onDestroy(),t.onDone('"'+a+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return t.optionalExtensions.forEach(r),{extensions:n,restore:function(){Object.keys(n).forEach((function(e){if(n[e]&&!r(e))throw Error("(regl): error restoring extension "+e)}))}}}(g,e);if(!y)return null;var _=function(){var e={"":0},t=[""];return{id:function(r){var n=e[r];return n||(n=e[r]=t.length,t.push(r),n)},str:function(e){return t[e]}}}(),w={vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0},x=y.extensions,C=function(e,t){function r(){this.endQueryIndex=this.startQueryIndex=-1,this.sum=0,this.stats=null}function n(e,t,n){var i=o.pop()||new r;i.startQueryIndex=e,i.endQueryIndex=t,i.sum=0,i.stats=n,s.push(i)}if(!t.ext_disjoint_timer_query)return null;var i=[],a=[],o=[],s=[],u=[],l=[];return{beginQuery:function(e){var r=i.pop()||t.ext_disjoint_timer_query.createQueryEXT();t.ext_disjoint_timer_query.beginQueryEXT(35007,r),a.push(r),n(a.length-1,a.length,e)},endQuery:function(){t.ext_disjoint_timer_query.endQueryEXT(35007)},pushScopeStats:n,update:function(){var e,r;if(0!==(e=a.length)){l.length=Math.max(l.length,e+1),u.length=Math.max(u.length,e+1),u[0]=0;var n=l[0]=0;for(r=e=0;r<a.length;++r){var c=a[r];t.ext_disjoint_timer_query.getQueryObjectEXT(c,34919)?(n+=t.ext_disjoint_timer_query.getQueryObjectEXT(c,34918),i.push(c)):a[e++]=c,u[r+1]=n,l[r+1]=e}for(a.length=e,r=e=0;r<s.length;++r){var f=(n=s[r]).startQueryIndex;c=n.endQueryIndex,n.sum+=u[c]-u[f],f=l[f],(c=l[c])===f?(n.stats.gpuTime+=n.sum/1e6,o.push(n)):(n.startQueryIndex=f,n.endQueryIndex=c,s[e++]=n)}s.length=e}},getNumPendingQueries:function(){return a.length},clear:function(){i.push.apply(i,a);for(var e=0;e<i.length;e++)t.ext_disjoint_timer_query.deleteQueryEXT(i[e]);a.length=0,i.length=0},restore:function(){a.length=0,i.length=0}}}(0,x),T=N(),S=g.drawingBufferWidth,$=g.drawingBufferHeight,V={tick:0,time:0,viewportWidth:S,viewportHeight:$,framebufferWidth:S,framebufferHeight:$,drawingBufferWidth:S,drawingBufferHeight:$,pixelRatio:e.pixelRatio},D=H(g,x),L=h(g,w,e,(function(e){return O.destroyBuffer(e)})),O=k(g,x,D,w,L),j=p(g,x,L,w),R=M(g,_,w,e),q=E(g,x,D,(function(){W.procs.poll()}),V,w,e),K=ge(g,x,0,w,e),G=A(g,x,D,q,K,w),W=I(g,_,x,D,L,j,0,G,{},O,R,{elements:null,primitive:4,count:-1,offset:0,instances:-1},V,C,e),Y=(_=P(g,G,W.procs.poll,V),W.next),Q=g.canvas,X=[],J=[],Z=[],ee=[e.onDestroy],te=null;Q&&(Q.addEventListener("webglcontextlost",o,!1),Q.addEventListener("webglcontextrestored",s,!1));var re=G.setFBO=u({framebuffer:z.define.call(null,1,"framebuffer")});return m(),b=B(u,{clear:function(e){if("framebuffer"in e)if(e.framebuffer&&"framebufferCube"===e.framebuffer_reglType)for(var t=0;6>t;++t)re(B({framebuffer:e.framebuffer.faces[t]},e),l);else re(e,l);else l(0,e)},prop:z.define.bind(null,1),context:z.define.bind(null,2),this:z.define.bind(null,3),draw:u({}),buffer:function(e){return L.create(e,34962,!1,!1)},elements:function(e){return j.create(e,!1)},texture:q.create2D,cube:q.createCube,renderbuffer:K.create,framebuffer:G.create,framebufferCube:G.createCube,vao:O.createVAO,attributes:b,frame:c,on:function(e,t){var r;switch(e){case"frame":return c(t);case"lost":r=J;break;case"restore":r=Z;break;case"destroy":r=ee}return r.push(t),{cancel:function(){for(var e=0;e<r.length;++e)if(r[e]===t){r[e]=r[r.length-1],r.pop();break}}}},limits:D,hasExtension:function(e){return 0<=D.extensions.indexOf(e.toLowerCase())},read:_,destroy:function(){X.length=0,a(),Q&&(Q.removeEventListener("webglcontextlost",o),Q.removeEventListener("webglcontextrestored",s)),R.clear(),G.clear(),K.clear(),q.clear(),j.clear(),L.clear(),O.clear(),C&&C.clear(),ee.forEach((function(e){e()}))},_gl:g,_refresh:m,poll:function(){d(),C&&C.update()},now:v,stats:w}),e.onDone(null,b),b}},"object"==typeof _$regl_78.exports?_$regl_78.exports=X():"function"==typeof define&&define.amd?define(X):U.createREGL=X(),_$regl_78=_$regl_78.exports;var _$primitiveQuad_77=function(e){e=void 0!==e?e:1,Array.isArray(e)||(e=[e,e]);var t=[0,0,-1];return{positions:[[-e[0],-e[1],0],[e[0],-e[1],0],[e[0],e[1],0],[-e[0],e[1],0]],cells:[[0,1,2],[2,3,0]],uvs:[[0,0],[1,0],[1,1],[0,1]],normals:[t.slice(),t.slice(),t.slice(),t.slice()]}};function rgb2hsl(e){var t,r,n=e[0]/255,i=e[1]/255,a=e[2]/255,o=Math.min(n,i,a),s=Math.max(n,i,a),u=s-o;return s==o?t=0:n==s?t=(i-a)/u:i==s?t=2+(a-n)/u:a==s&&(t=4+(n-i)/u),(t=Math.min(60*t,360))<0&&(t+=360),r=(o+s)/2,[t,100*(s==o?0:r<=.5?u/(s+o):u/(2-s-o)),100*r]}function rgb2hsv(e){var t,r,n=e[0],i=e[1],a=e[2],o=Math.min(n,i,a),s=Math.max(n,i,a),u=s-o;return r=0==s?0:u/s*1e3/10,s==o?t=0:n==s?t=(i-a)/u:i==s?t=2+(a-n)/u:a==s&&(t=4+(n-i)/u),(t=Math.min(60*t,360))<0&&(t+=360),[t,r,s/255*1e3/10]}function rgb2hwb(e){var t=e[0],r=e[1],n=e[2];return[rgb2hsl(e)[0],1/255*Math.min(t,Math.min(r,n))*100,100*(n=1-1/255*Math.max(t,Math.max(r,n)))]}function rgb2cmyk(e){var t,r=e[0]/255,n=e[1]/255,i=e[2]/255;return[100*((1-r-(t=Math.min(1-r,1-n,1-i)))/(1-t)||0),100*((1-n-t)/(1-t)||0),100*((1-i-t)/(1-t)||0),100*t]}function rgb2keyword(e){return reverseKeywords[JSON.stringify(e)]}function rgb2xyz(e){var t=e[0]/255,r=e[1]/255,n=e[2]/255;return[100*(.4124*(t=t>.04045?Math.pow((t+.055)/1.055,2.4):t/12.92)+.3576*(r=r>.04045?Math.pow((r+.055)/1.055,2.4):r/12.92)+.1805*(n=n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92)),100*(.2126*t+.7152*r+.0722*n),100*(.0193*t+.1192*r+.9505*n)]}function rgb2lab(e){var t=rgb2xyz(e),r=t[0],n=t[1],i=t[2];return n/=100,i/=108.883,r=(r/=95.047)>.008856?Math.pow(r,1/3):7.787*r+16/116,[116*(n=n>.008856?Math.pow(n,1/3):7.787*n+16/116)-16,500*(r-n),200*(n-(i=i>.008856?Math.pow(i,1/3):7.787*i+16/116))]}function hsl2rgb(e){var t,r,n,i,a,o=e[0]/360,s=e[1]/100,u=e[2]/100;if(0==s)return[a=255*u,a,a];t=2*u-(r=u<.5?u*(1+s):u+s-u*s),i=[0,0,0];for(var l=0;l<3;l++)(n=o+1/3*-(l-1))<0&&n++,n>1&&n--,a=6*n<1?t+6*(r-t)*n:2*n<1?r:3*n<2?t+(r-t)*(2/3-n)*6:t,i[l]=255*a;return i}function hsv2rgb(e){var t=e[0]/60,r=e[1]/100,n=e[2]/100,i=Math.floor(t)%6,a=t-Math.floor(t),o=255*n*(1-r),s=255*n*(1-r*a),u=255*n*(1-r*(1-a));switch(n*=255,i){case 0:return[n,u,o];case 1:return[s,n,o];case 2:return[o,n,u];case 3:return[o,s,n];case 4:return[u,o,n];case 5:return[n,o,s]}}function hwb2rgb(e){var t,n,i,a,o=e[0]/360,s=e[1]/100,u=e[2]/100,l=s+u;switch(l>1&&(s/=l,u/=l),i=6*o-(t=Math.floor(6*o)),0!=(1&t)&&(i=1-i),a=s+i*((n=1-u)-s),t){default:case 6:case 0:r=n,g=a,b=s;break;case 1:r=a,g=n,b=s;break;case 2:r=s,g=n,b=a;break;case 3:r=s,g=a,b=n;break;case 4:r=a,g=s,b=n;break;case 5:r=n,g=s,b=a}return[255*r,255*g,255*b]}function cmyk2rgb(e){var t=e[0]/100,r=e[1]/100,n=e[2]/100,i=e[3]/100;return[255*(1-Math.min(1,t*(1-i)+i)),255*(1-Math.min(1,r*(1-i)+i)),255*(1-Math.min(1,n*(1-i)+i))]}function xyz2rgb(e){var t,r,n,i=e[0]/100,a=e[1]/100,o=e[2]/100;return r=-.9689*i+1.8758*a+.0415*o,n=.0557*i+-.204*a+1.057*o,t=(t=3.2406*i+-1.5372*a+-.4986*o)>.0031308?1.055*Math.pow(t,1/2.4)-.055:t*=12.92,r=r>.0031308?1.055*Math.pow(r,1/2.4)-.055:r*=12.92,n=n>.0031308?1.055*Math.pow(n,1/2.4)-.055:n*=12.92,[255*(t=Math.min(Math.max(0,t),1)),255*(r=Math.min(Math.max(0,r),1)),255*(n=Math.min(Math.max(0,n),1))]}function xyz2lab(e){var t=e[0],r=e[1],n=e[2];return r/=100,n/=108.883,t=(t/=95.047)>.008856?Math.pow(t,1/3):7.787*t+16/116,[116*(r=r>.008856?Math.pow(r,1/3):7.787*r+16/116)-16,500*(t-r),200*(r-(n=n>.008856?Math.pow(n,1/3):7.787*n+16/116))]}function lab2xyz(e){var t,r,n,i,a=e[0],o=e[1],s=e[2];return a<=8?i=(r=100*a/903.3)/100*7.787+16/116:(r=100*Math.pow((a+16)/116,3),i=Math.pow(r/100,1/3)),[t=t/95.047<=.008856?t=95.047*(o/500+i-16/116)/7.787:95.047*Math.pow(o/500+i,3),r,n=n/108.883<=.008859?n=108.883*(i-s/200-16/116)/7.787:108.883*Math.pow(i-s/200,3)]}function lab2lch(e){var t,r=e[0],n=e[1],i=e[2];return(t=360*Math.atan2(i,n)/2/Math.PI)<0&&(t+=360),[r,Math.sqrt(n*n+i*i),t]}function lab2rgb(e){return xyz2rgb(lab2xyz(e))}function lch2lab(e){var t,r=e[0],n=e[1];return t=e[2]/360*2*Math.PI,[r,n*Math.cos(t),n*Math.sin(t)]}function keyword2rgb(e){return cssKeywords[e]}var _$conversions_74={rgb2hsl:rgb2hsl,rgb2hsv:rgb2hsv,rgb2hwb:rgb2hwb,rgb2cmyk:rgb2cmyk,rgb2keyword:rgb2keyword,rgb2xyz:rgb2xyz,rgb2lab:rgb2lab,rgb2lch:function(e){return lab2lch(rgb2lab(e))},hsl2rgb:hsl2rgb,hsl2hsv:function(e){var t=e[0],r=e[1]/100,n=e[2]/100;return 0===n?[0,0,0]:[t,2*(r*=(n*=2)<=1?n:2-n)/(n+r)*100,(n+r)/2*100]},hsl2hwb:function(e){return rgb2hwb(hsl2rgb(e))},hsl2cmyk:function(e){return rgb2cmyk(hsl2rgb(e))},hsl2keyword:function(e){return rgb2keyword(hsl2rgb(e))},hsv2rgb:hsv2rgb,hsv2hsl:function(e){var t,r,n=e[0],i=e[1]/100,a=e[2]/100;return t=i*a,[n,100*(t=(t/=(r=(2-i)*a)<=1?r:2-r)||0),100*(r/=2)]},hsv2hwb:function(e){return rgb2hwb(hsv2rgb(e))},hsv2cmyk:function(e){return rgb2cmyk(hsv2rgb(e))},hsv2keyword:function(e){return rgb2keyword(hsv2rgb(e))},hwb2rgb:hwb2rgb,hwb2hsl:function(e){return rgb2hsl(hwb2rgb(e))},hwb2hsv:function(e){return rgb2hsv(hwb2rgb(e))},hwb2cmyk:function(e){return rgb2cmyk(hwb2rgb(e))},hwb2keyword:function(e){return rgb2keyword(hwb2rgb(e))},cmyk2rgb:cmyk2rgb,cmyk2hsl:function(e){return rgb2hsl(cmyk2rgb(e))},cmyk2hsv:function(e){return rgb2hsv(cmyk2rgb(e))},cmyk2hwb:function(e){return rgb2hwb(cmyk2rgb(e))},cmyk2keyword:function(e){return rgb2keyword(cmyk2rgb(e))},keyword2rgb:keyword2rgb,keyword2hsl:function(e){return rgb2hsl(keyword2rgb(e))},keyword2hsv:function(e){return rgb2hsv(keyword2rgb(e))},keyword2hwb:function(e){return rgb2hwb(keyword2rgb(e))},keyword2cmyk:function(e){return rgb2cmyk(keyword2rgb(e))},keyword2lab:function(e){return rgb2lab(keyword2rgb(e))},keyword2xyz:function(e){return rgb2xyz(keyword2rgb(e))},xyz2rgb:xyz2rgb,xyz2lab:xyz2lab,xyz2lch:function(e){return lab2lch(xyz2lab(e))},lab2xyz:lab2xyz,lab2rgb:lab2rgb,lab2lch:lab2lch,lch2lab:lch2lab,lch2xyz:function(e){return lab2xyz(lch2lab(e))},lch2rgb:function(e){return lab2rgb(lch2lab(e))}},cssKeywords={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},reverseKeywords={};for(var key in cssKeywords)reverseKeywords[JSON.stringify(cssKeywords[key])]=key;var _$colorConvert_75={},__convert_75=function(){return new Converter};for(var func in _$conversions_74){__convert_75[func+"Raw"]=function(e){return function(t){return"number"==typeof t&&(t=Array.prototype.slice.call(arguments)),_$conversions_74[e](t)}}(func);var pair=/(\w+)2(\w+)/.exec(func),from=pair[1],to=pair[2];(__convert_75[from]=__convert_75[from]||{})[to]=__convert_75[func]=function(e){return function(t){"number"==typeof t&&(t=Array.prototype.slice.call(arguments));var r=_$conversions_74[e](t);if("string"==typeof r||void 0===r)return r;for(var n=0;n<r.length;n++)r[n]=Math.round(r[n]);return r}}(func)}var Converter=function(){this.convs={}};Converter.prototype.routeSpace=function(e,t){var r=t[0];return void 0===r?this.getValues(e):("number"==typeof r&&(r=Array.prototype.slice.call(t)),this.setValues(e,r))},Converter.prototype.setValues=function(e,t){return this.space=e,this.convs={},this.convs[e]=t,this},Converter.prototype.getValues=function(e){var t=this.convs[e];if(!t){var r=this.space,n=this.convs[r];t=__convert_75[r][e](n),this.convs[e]=t}return t},["rgb","hsl","hsv","cmyk","keyword"].forEach((function(e){Converter.prototype[e]=function(t){return this.routeSpace(e,arguments)}})),_$colorConvert_75=__convert_75;var _$parseColor_73=function(e){var t,r,n,i;if(t=/^((?:rgb|hs[lv]|cmyk|xyz|lab)a?)\s*\(([^\)]*)\)/.exec(e)){var a=t[1],o="cmyk"===(s=a.replace(/a$/,""))?4:3;r=_$colorConvert_75[s],n=t[2].replace(/^\s+|\s+$/g,"").split(/\s*,\s*/).map((function(e,t){return/%$/.test(e)&&t===o?parseFloat(e)/100:(/%$/.test(e),parseFloat(e))})),a===s&&n.push(1),i=void 0===n[o]?1:n[o],n=n.slice(0,o),r[s]=function(){return n}}else if(/^#[A-Fa-f0-9]+$/.test(e)){var s;o=(s=e.replace(/^#/,"")).length,r=_$colorConvert_75.rgb,n=(n=s.split(3===o?/(.)/:/(..)/)).filter(Boolean).map((function(e){return 3===o?parseInt(e+e,16):parseInt(e,16)})),i=1,r.rgb=function(){return n},n[0]||(n[0]=0),n[1]||(n[1]=0),n[2]||(n[2]=0)}else(r=_$colorConvert_75.keyword).keyword=function(){return e},n=e,i=1;var u={rgb:void 0,hsl:void 0,hsv:void 0,cmyk:void 0,keyword:void 0,hex:void 0};try{u.rgb=r.rgb(n)}catch(l){}try{u.hsl=r.hsl(n)}catch(l){}try{u.hsv=r.hsv(n)}catch(l){}try{u.cmyk=r.cmyk(n)}catch(l){}try{u.keyword=r.keyword(n)}catch(l){}return u.rgb&&(u.hex="#"+u.rgb.map((function(e){var t=e.toString(16);return 1===t.length?"0"+t:t})).join("")),u.rgb&&(u.rgba=u.rgb.concat(i)),u.hsl&&(u.hsla=u.hsl.concat(i)),u.hsv&&(u.hsva=u.hsv.concat(i)),u.cmyk&&(u.cmyka=u.cmyk.concat(i)),u};function isTextureLike(e){return e&&!Array.isArray(e)&&"object"==typeof e}var _$shader_30=function(e){if(!(e=e||{}).gl)throw new Error('Must specify { context: "webgl" } in sketch settings, or a WebGL-enabled canvas');var t=e.gl,r={gl:t};void 0!==e.extensions&&(r.extensions=e.extensions),void 0!==e.optionalExtensions&&(r.optionalExtensions=e.optionalExtensions),void 0!==e.profile&&(r.profile=e.profile),void 0!==e.onDone&&(r.onDone=e.onDone);var n,i=_$regl_78(r),a=_$primitiveQuad_77(),o=new Map,s=e.uniforms||{},u=Object.assign({},s);Object.keys(s).forEach((function(e){var t=s[e];"function"==typeof t?u[e]=function(e,r,n){var a=t.call(s,r,n);if(isTextureLike(a))if(o.has(t)){var u=o.get(t);u(a),a=u}else{var l=i.texture(a);o.set(t,l),a=l}return a}:isTextureLike(t)?u[e]=i.texture(t):u[e]=t}));try{n=i({scissor:!!e.scissor&&{enable:!0,box:{x:i.prop("scissorX"),y:i.prop("scissorY"),width:i.prop("scissorWidth"),height:i.prop("scissorHeight")}},uniforms:u,frag:e.frag||["precision highp float;","","void main () {","  gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);","}"].join("\n"),vert:e.vert||["precision highp float;","attribute vec3 position;","varying vec2 vUv;","","void main () {","  gl_Position = vec4(position.xyz, 1.0);","  vUv = gl_Position.xy * 0.5 + 0.5;","}"].join("\n"),blend:!1!==e.blend?{enable:!0,func:{srcRGB:"src alpha",srcAlpha:1,dstRGB:"one minus src alpha",dstAlpha:1}}:void 0,attributes:{position:a.positions},elements:a.cells})}catch(m){d(m)}var l=_$defined_35(e.clearColor,"black");if("string"==typeof l){var c=_$parseColor_73(l);if(!c.rgb)throw new Error('Error parsing { clearColor } color string "'+l+'"');l=c.rgb.slice(0,3).map((function(e){return e/255}))}else if(l&&(!Array.isArray(l)||l.length<3))throw new Error("Error with { clearColor } option, must be a string or [ r, g, b ] float array");var f=_$defined_35(e.clearAlpha,1),h=!!l&&l.concat([f||0]);return{render:function(e){i.poll(),h&&i.clear({color:h,depth:1,stencil:0}),p(e),t.flush()},regl:i,drawQuad:p,unload:function(){o.clear(),i.destroy()}};function p(e){if(e=e||{},n)try{n(e)}catch(m){d(m)&&null==e&&console.warn('Warning: shader.render() is not called with any "props" parameter')}}function d(e){if(/^\(regl\)/.test(e.message))return!0;throw e}},_$canvasSketchUtil_15={random:_$random_29,math:_$math_27},_$quadInOut_56=function(e){return(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1)},_$quartOut_61=function(e){return Math.pow(e-1,3)*(1-e)+1},_$backInOut_36=function(e){var t=2.5949095;return(e*=2)<1?e*e*((t+1)*e-t)*.5:.5*((e-=2)*e*((t+1)*e+t)+2)},_$backIn_37=function(e){var t=1.70158;return e*e*((t+1)*e-t)},_$backOut_38=function(e){var t=1.70158;return--e*e*((t+1)*e+t)+1},_$bounceOut_41=function(e){var t=e*e;return e<4/11?7.5625*t:e<8/11?9.075*t-9.9*e+3.4:e<.9?4356/361*t-35442/1805*e+16061/1805:10.8*e*e-20.52*e+10.72},_$bounceInOut_39=function(e){return e<.5?.5*(1-_$bounceOut_41(1-2*e)):.5*_$bounceOut_41(2*e-1)+.5},_$bounceIn_40=function(e){return 1-_$bounceOut_41(1-e)},_$circInOut_42=function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)},_$circIn_43=function(e){return 1-Math.sqrt(1-e*e)},_$circOut_44=function(e){return Math.sqrt(1- --e*e)},_$cubicInOut_45=function(e){return e<.5?4*e*e*e:.5*Math.pow(2*e-2,3)+1},_$cubicIn_46=function(e){return e*e*e},_$cubicOut_47=function(e){var t=e-1;return t*t*t+1},_$elasticInOut_48=function(e){return e<.5?.5*Math.sin(13*Math.PI/2*2*e)*Math.pow(2,10*(2*e-1)):.5*Math.sin(-13*Math.PI/2*(2*e-1+1))*Math.pow(2,-10*(2*e-1))+1},_$elasticIn_49=function(e){return Math.sin(13*e*Math.PI/2)*Math.pow(2,10*(e-1))},_$elasticOut_50=function(e){return Math.sin(-13*(e+1)*Math.PI/2)*Math.pow(2,-10*e)+1},_$expoInOut_51=function(e){return 0===e||1===e?e:e<.5?.5*Math.pow(2,20*e-10):-.5*Math.pow(2,10-20*e)+1},_$expoIn_52=function(e){return 0===e?e:Math.pow(2,10*(e-1))},_$expoOut_53=function(e){return 1===e?e:1-Math.pow(2,-10*e)},_$linear_55=function(e){return e},_$quadIn_57=function(e){return e*e},_$quadOut_58=function(e){return-e*(e-2)},_$quartInOut_59=function(e){return e<.5?8*Math.pow(e,4):-8*Math.pow(e-1,4)+1},_$quartIn_60=function(e){return Math.pow(e,4)},_$quintInOut_62=function(e){return(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)},_$quintIn_63=function(e){return e*e*e*e*e},_$quintOut_64=function(e){return--e*e*e*e*e+1},_$sineInOut_65=function(e){return-.5*(Math.cos(Math.PI*e)-1)},_$sineIn_66=function(e){var t=Math.cos(e*Math.PI*.5);return Math.abs(t)<1e-14?1:1-t},_$sineOut_67=function(e){return Math.sin(e*Math.PI/2)},_$eases_54={quadInOut:_$quadInOut_56,quartOut:_$quartOut_61};const{math:math,random:random}=_$canvasSketchUtil_15,directions={RIGHT:"right",LEFT:"left",RANDOM:"random"},animations={SHOW:"show",HIDE:"hide",STAY:"stay"};var _$txtShuffle_2={animations:animations,directions:directions,shuffle:({text:e="",duration:t=1,delay:r=0,delayResolve:n=.2,fps:i=60,glyphs:a=" !#$&%()*+0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[]^_`abcdefghijklmnopqrstu\xfcvwxyz{|}~",animation:o=animations.SHOW,direction:s=directions.RIGHT,onUpdate:u=null,onComplete:l=null}={})=>{const c=a.split(""),f=e.split(""),h=1e3/i;let p,d,m,v,g,b,y,_,w,x=Date.now(),E=Date.now(),A=f.map((e,t)=>t);o==animations.HIDE&&(s==directions.LEFT?s=directions.RIGHT:s==directions.RIGHT&&(s=directions.LEFT)),s==directions.LEFT&&A.reverse(),s==directions.RANDOM&&(A=random.shuffle(A));const C=()=>{if(Date.now()-x<h)requestAnimationFrame(C);else{x=Date.now(),v="",y=.001*(x-E)/t,o==animations.HIDE&&(y=1-y),_=math.clamp01(y-r),_=_$eases_54.quartOut(_),w=math.clamp01(y-r-n),w*=1/(1-n),w=_$eases_54.quadInOut(w),p=Math.round(_*e.length),d=Math.round(w*e.length);for(let t=0;t<e.length;t++)b=A[t],m=f[t],b>=p&&o!=animations.STAY&&(m=" ")," "!=m&&b>=d&&(m=random.pick(c)),v=`${v}${m}`;(g=o==animations.HIDE?_<=0:_>=1)?v=o==animations.HIDE?"":e:requestAnimationFrame(C),u&&u(v),g&&l&&l(v)}};C()},shuffleLCD:({text:e="",delay:t=0,fps:r=60,glyphs:n=" '\"\u201c\u201d\u2018\u2019\xb9\xb2\xb3!#$&%()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstu\xfcvwxyz{|}~\xbd\xbc\xa1\xab\xbb\xd7\u2591\u2592\u2593\u2502\u2524\u2561\u2562\u2556\u2555\u2563\u2551\u2557\u255d\u255c\u255b\u2510\u2514\u2534\u252c\u251c\u2500\u253c\u255e\u255f\u255a\u2554\u2569\u2566\u2560\u2550\u256c\u2567\u2568\u2564\u2565\u2559\u2558\u2552\u2553\u256b\u256a\u2518\u250c",animation:i=animations.SHOW,stayFrames:a=25,onUpdate:o=null,onComplete:s=null}={})=>{const u=n.split(""),l=e.split(""),c=1e3/r;l.map((e,t)=>t),u.map((e,t)=>t);let f=l.map(e=>0),h=l.map(e=>u.findIndex(t=>t==e));i==animations.HIDE&&(f=h.concat()),i==animations.STAY&&(f=h.map(e=>math.mod(e-random.rangeFloor(5,a),u.length)));let p,d,m,v,g=Date.now(),b=Date.now(),y=0;const _=()=>{if(Date.now()-g<c)requestAnimationFrame(_);else{(g=Date.now())-b>1e3*t&&y++,d="",m=0;for(let t=0;t<e.length;t++)v=f[t],ridx=h[t],i==animations.SHOW&&(v!=ridx?t<y&&v++:m++),i==animations.HIDE&&(v>0?t<y&&v--:m++),i==animations.STAY&&(v!=ridx?v++:m++),p=u[v%u.length],f[t]=v%u.length,d=`${d}${p}`;complete=m>=e.length,complete?d=i==animations.HIDE?"":e:requestAnimationFrame(_),o&&o(d),complete&&s&&s(d)}};_()}},_$js_12={};Object.defineProperty(_$js_12,"__esModule",{value:!0}),_$js_12.split=function(e,t,r,n,i,a){let o=`${t}_${r}_${n}px`,s=d.get(o);if(void 0!==s)return s;if(n<=0)return[];let u=[],l=t.split("\n"),c=__b_12.get(r),f=void 0===c?t.length:n/c.size*1.5,h=i&&void 0!==c&&c.count>2e4;for(let d of l){let t=p(e,d.slice(0,Math.max(0,f)),r,h),i=Math.min(d.length,f);if(t<=n)u.push(d);else{for(;t>n;){let o=T(e,d,n,r,t,i,h,a),s=d.slice(0,Math.max(0,o));d=d.slice(s.length),u.push(s),t=p(e,d.slice(0,Math.max(0,f)),r,h),i=Math.min(d.length,f)}t>0&&u.push(d)}}return u=u.map((e,t)=>0===t?e.trimEnd():e.trim()),d.set(o,u),d.size>500&&d.delete(d.keys().next().value),u};var d=new Map,__b_12=new Map,__z_12=new Map;function p(e,t,r,n){var i,a;let o=__b_12.get(r);if(n&&void 0!==o&&o.count>2e4){let n=__z_12.get(r);if(void 0===n&&(n=function(e,t){var r;let n=new Map,i=0;for(let u of"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890,.-+=?"){let t=e.measureText(u).width;n.set(u,t),i+=t}let a=i/n.size,o=(t/a+3)/4,s=n.keys();for(let u of s)n.set(u,(null!=(r=n.get(u))?r:a)*o);return n}(e,o.size),__z_12.set(r,n)),o.count>5e5){let e=0;for(let r of t)e+=null!=(i=n.get(r))?i:o.size;return 1.01*e}let a=e.measureText(t);return function(e,t,r,n,i){var a,o,s;let u=0,l={};for(let f of e)u+=null!=(a=r.get(f))?a:i,l[f]=(null!=(o=l[f])?o:0)+1;let c=t-u;for(let f of Object.keys(l)){let e=l[f],t=null!=(s=r.get(f))?s:i,a=t+c*(t*e/u)*n/e;r.set(f,a)}}(t,a.width,n,Math.max(.05,1-o.count/2e5),o.size),__b_12.set(r,{count:o.count+t.length,size:o.size}),a.width}let s=e.measureText(t),u=s.width/t.length;if((null!=(a=null==o?void 0:o.count)?a:0)>2e4)return s.width;if(void 0===o)__b_12.set(r,{count:t.length,size:u});else{let e=u-o.size,n=t.length/(o.count+t.length),i=o.size+e*n;__b_12.set(r,{count:o.count+t.length,size:i})}return s.width}function T(e,t,r,n,i,a,o,s){if(t.length<=1)return t.length;if(i<r)return-1;let u=Math.floor(r/i*a),l=p(e,t.slice(0,Math.max(0,u)),n,o),c=null==s?void 0:s(t);if(l!==r)if(l<r){for(;l<r;)u++,l=p(e,t.slice(0,Math.max(0,u)),n,o);u--}else for(;l>r;){let r=void 0!==c?0:t.lastIndexOf(" ",u-1);r>0?u=r:u--,l=p(e,t.slice(0,Math.max(0,u)),n,o)}if(" "!==t[u]){let e=0;if(void 0===c)e=t.lastIndexOf(" ",u);else for(let t of c){if(t>u)break;e=t}e>0&&(u=e)}return u}var _$tweakpane_84={exports:{}},__global_84,factory;__global_84=void 0,factory=function(e){function t(e){return null==e}const r={alreadydisposed:()=>"View has been already disposed",invalidparams:e=>`Invalid parameters for '${e.name}'`,nomatchingcontroller:e=>`No matching controller for '${e.key}'`,nomatchingview:e=>`No matching view for '${JSON.stringify(e.params)}'`,notbindable:()=>"Value is not bindable",propertynotfound:e=>`Property '${e.name}' not found`,shouldneverhappen:()=>"This error should never happen"};class n{static alreadyDisposed(){return new n({type:"alreadydisposed"})}static notBindable(){return new n({type:"notbindable"})}static propertyNotFound(e){return new n({type:"propertynotfound",context:{name:e}})}static shouldNeverHappen(){return new n({type:"shouldneverhappen"})}constructor(e){var t;this.message=null!==(t=r[e.type](e.context))&&void 0!==t?t:"Unexpected error",this.name=this.constructor.name,this.stack=new Error(this.message).stack,this.type=e.type}}class i{constructor(){this.observers_={}}on(e,t){let r=this.observers_[e];return r||(r=this.observers_[e]=[]),r.push({handler:t}),this}off(e,t){const r=this.observers_[e];return r&&(this.observers_[e]=r.filter(e=>e.handler!==t)),this}emit(e,t){const r=this.observers_[e];r&&r.forEach(e=>{e.handler(t)})}}const a="tp";function o(e){return(t,r)=>[a,"-",e,"v",t?"_"+t:"",r?"-"+r:""].join("")}function s(e){return e.rawValue}function u(e,t){var r,n;e.emitter.on("change",(r=s,n=t,e=>n(r(e)))),t(e.rawValue)}function l(e,t,r){u(e.value(t),r)}function c(e,t){return r=>{!function(e,t,r){r?e.classList.add(t):e.classList.remove(t)}(e,t,r)}}o("btn");class f{constructor(e,t){var r;this.constraint_=null==t?void 0:t.constraint,this.equals_=null!==(r=null==t?void 0:t.equals)&&void 0!==r?r:(e,t)=>e===t,this.emitter=new i,this.rawValue_=e}get constraint(){return this.constraint_}get rawValue(){return this.rawValue_}set rawValue(e){this.setRawValue(e,{forceEmit:!1,last:!0})}setRawValue(e,t){const r=null!=t?t:{forceEmit:!1,last:!0},n=this.constraint_?this.constraint_.constrain(e):e,i=this.rawValue_;(!this.equals_(i,n)||r.forceEmit)&&(this.emitter.emit("beforechange",{sender:this}),this.rawValue_=n,this.emitter.emit("change",{options:r,previousRawValue:i,rawValue:n,sender:this}))}}class h{constructor(e){this.emitter=new i,this.value_=e}get rawValue(){return this.value_}set rawValue(e){this.setRawValue(e,{forceEmit:!1,last:!0})}setRawValue(e,t){const r=null!=t?t:{forceEmit:!1,last:!0},n=this.value_;(n!==e||r.forceEmit)&&(this.emitter.emit("beforechange",{sender:this}),this.value_=e,this.emitter.emit("change",{options:r,previousRawValue:n,rawValue:this.value_,sender:this}))}}function p(e,t){const r=null==t?void 0:t.constraint,n=null==t?void 0:t.equals;return r||n?new f(e,t):new h(e)}class d{constructor(e){this.emitter=new i,this.valMap_=e;for(const t in this.valMap_)this.valMap_[t].emitter.on("change",()=>{this.emitter.emit("change",{key:t,sender:this})})}static createCore(e){return Object.keys(e).reduce((t,r)=>Object.assign(t,{[r]:p(e[r])}),{})}static fromObject(e){const t=this.createCore(e);return new d(t)}get(e){return this.valMap_[e].rawValue}set(e,t){this.valMap_[e].rawValue=t}value(e){return this.valMap_[e]}}function m(e){return t=>r=>{if(!t&&void 0===r)return{succeeded:!1,value:void 0};if(t&&void 0===r)return{succeeded:!0,value:void 0};const n=e(r);return void 0!==n?{succeeded:!0,value:n}:{succeeded:!1,value:void 0}}}function v(e){return{custom:t=>m(t)(e),boolean:m(e=>"boolean"==typeof e?e:void 0)(e),number:m(e=>"number"==typeof e?e:void 0)(e),string:m(e=>"string"==typeof e?e:void 0)(e),function:m(e=>"function"==typeof e?e:void 0)(e),constant:t=>m(e=>e===t?t:void 0)(e),raw:m(e=>e)(e),object:t=>m(e=>{if(null!==(r=e)&&"object"==typeof r)return function(e,t){return Object.keys(t).reduce((r,n)=>{if(void 0===r)return;const i=(0,t[n])(e[n]);return i.succeeded?Object.assign(Object.assign({},r),{[n]:i.value}):void 0},{})}(e,t);var r})(e),array:t=>m(e=>{if(Array.isArray(e))return r=t,e.reduce((e,t)=>{if(void 0===e)return;const n=r(t);return n.succeeded&&void 0!==n.value?[...e,n.value]:void 0},[]);var r})(e)}}const g={optional:v(!0),required:v(!1)};function b(e,t){const r=g.required.object(t)(e);return r.succeeded?r.value:void 0}o("");o("");const y="http://www.w3.org/2000/svg";function _(e){e.offsetHeight}function w(e){return void 0!==e.ontouchstart}const x={check:'<path d="M2 8l4 4l8 -8"/>',dropdown:'<path d="M5 7h6l-3 3 z"/>',p2dpad:'<path d="M8 4v8"/><path d="M4 8h8"/><circle cx="12" cy="12" r="1.2"/>'};function E(e,t){const r=e.createElementNS(y,"svg");return r.innerHTML=x[t],r}function A(e){for(;e.children.length>0;)e.removeChild(e.children[0])}function C(e){return e.relatedTarget?e.relatedTarget:"explicitOriginalTarget"in e?e.explicitOriginalTarget:null}o("lbl");class k extends d{constructor(e){super(e)}static create(e){const t={completed:!0,expanded:e,expandedHeight:null,shouldFixHeight:!1,temporaryExpanded:null},r=d.createCore(t);return new k(r)}get styleExpanded(){var e;return null!==(e=this.get("temporaryExpanded"))&&void 0!==e?e:this.get("expanded")}get styleHeight(){if(!this.styleExpanded)return"0";const e=this.get("expandedHeight");return this.get("shouldFixHeight")&&!t(e)?e+"px":"auto"}bindExpandedClass(e,t){const r=()=>{this.styleExpanded?e.classList.add(t):e.classList.remove(t)};l(this,"expanded",r),l(this,"temporaryExpanded",r)}cleanUpTransition(){this.set("shouldFixHeight",!1),this.set("expandedHeight",null),this.set("completed",!0)}}function M(e,t){t.style.height=e.styleHeight}function P(e,r){e.value("expanded").emitter.on("beforechange",()=>{if(e.set("completed",!1),t(e.get("expandedHeight"))){const t=function(e,t){let r=0;return function(n,i){const a=n.style.transition;n.style.transition="none",e.set("expandedHeight",null),e.set("temporaryExpanded",!0),_(t),r=t.clientHeight,e.set("temporaryExpanded",null),_(t),n.style.transition=a}(t),r}(e,r);t>0&&e.set("expandedHeight",t)}e.set("shouldFixHeight",!0),_(r)}),e.emitter.on("change",()=>{M(e,r)}),M(e,r),r.addEventListener("transitionend",t=>{"height"===t.propertyName&&e.cleanUpTransition()})}o("cnt");o("spr");o("tbi");o("tab");class T{constructor(e){this.constraints=e}constrain(e){return this.constraints.reduce((e,t)=>t.constrain(e),e)}}function S(e,t){if(e instanceof t)return e;if(e instanceof T){const r=e.constraints.reduce((e,r)=>e||(r instanceof t?r:null),null);if(r)return r}return null}class ${constructor(e){this.values=d.fromObject({max:e.max,min:e.min})}constrain(e){const t=this.values.get("max"),r=this.values.get("min");return Math.min(Math.max(e,r),t)}}class V{constructor(e){this.values=d.fromObject({max:e.max,min:e.min})}get maxValue(){return this.values.get("max")}get minValue(){return this.values.get("min")}constrain(e){const r=this.values.get("max"),n=this.values.get("min");let i=e;return t(n)||(i=Math.max(i,n)),t(r)||(i=Math.min(i,r)),i}}class D{constructor(e,t=0){this.step=e,this.origin=t}constrain(e){const t=this.origin%this.step;return t+Math.round((e-t)/this.step)*this.step}}o("lst");const L=o("pop");class O{constructor(e,t){this.element=e.createElement("div"),this.element.classList.add(L()),t.viewProps.bindClassModifiers(this.element),u(t.shows,c(this.element,L(void 0,"v")))}}class j{constructor(e,t){this.shows=p(!1),this.viewProps=t.viewProps,this.view=new O(e,{shows:this.shows,viewProps:this.viewProps})}}const I=o("txt");class F{constructor(e,t){this.onChange_=this.onChange_.bind(this),this.element=e.createElement("div"),this.element.classList.add(I()),t.viewProps.bindClassModifiers(this.element),this.props_=t.props,this.props_.emitter.on("change",this.onChange_);const r=e.createElement("input");r.classList.add(I("i")),r.type="text",t.viewProps.bindDisabled(r),this.element.appendChild(r),this.inputElement=r,t.value.emitter.on("change",this.onChange_),this.value_=t.value,this.refresh()}refresh(){const e=this.props_.get("formatter");this.inputElement.value=e(this.value_.rawValue)}onChange_(){this.refresh()}}class B{constructor(e,t){this.onInputChange_=this.onInputChange_.bind(this),this.parser_=t.parser,this.props=t.props,this.value=t.value,this.viewProps=t.viewProps,this.view=new F(e,{props:t.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_)}onInputChange_(e){const r=e.currentTarget.value,n=this.parser_(r);t(n)||(this.value.rawValue=n),this.view.refresh()}}class R{constructor(e){this.text=e}evaluate(){return Number(this.text)}toString(){return this.text}}const z={"**":(e,t)=>Math.pow(e,t),"*":(e,t)=>e*t,"/":(e,t)=>e/t,"%":(e,t)=>e%t,"+":(e,t)=>e+t,"-":(e,t)=>e-t,"<<":(e,t)=>e<<t,">>":(e,t)=>e>>t,">>>":(e,t)=>e>>>t,"&":(e,t)=>e&t,"^":(e,t)=>e^t,"|":(e,t)=>e|t};class U{constructor(e,t,r){this.left=t,this.operator=e,this.right=r}evaluate(){const e=z[this.operator];if(!e)throw new Error("unexpected binary operator: '"+this.operator);return e(this.left.evaluate(),this.right.evaluate())}toString(){return["b(",this.left.toString(),this.operator,this.right.toString(),")"].join(" ")}}const N={"+":e=>e,"-":e=>-e,"~":e=>~e};class q{constructor(e,t){this.operator=e,this.expression=t}evaluate(){const e=N[this.operator];if(!e)throw new Error("unexpected unary operator: '"+this.operator);return e(this.expression.evaluate())}toString(){return["u(",this.operator,this.expression.toString(),")"].join(" ")}}function H(e){return(t,r)=>{for(let n=0;n<e.length;n++){const i=e[n](t,r);if(""!==i)return i}return""}}function K(e,t){var r;const n=e.substr(t).match(/^\s+/);return null!==(r=n&&n[0])&&void 0!==r?r:""}function G(e,t){var r;const n=e.substr(t).match(/^[0-9]+/);return null!==(r=n&&n[0])&&void 0!==r?r:""}function W(e,t){const r=e.substr(t,1);if(t+=1,"e"!==r.toLowerCase())return"";const n=function(e,t){const r=G(e,t);if(""!==r)return r;const n=e.substr(t,1);if("-"!==n&&"+"!==n)return"";const i=G(e,t+=1);return""===i?"":n+i}(e,t);return""===n?"":r+n}function Y(e,t){const r=e.substr(t,1);if("0"===r)return r;const n=function(e,t){const r=e.substr(t,1);return r.match(/^[1-9]$/)?r:""}(e,t);return t+=n.length,""===n?"":n+G(e,t)}const Q=H([function(e,t){const r=Y(e,t);if(t+=r.length,""===r)return"";const n=e.substr(t,1);if(t+=n.length,"."!==n)return"";const i=G(e,t);return r+n+i+W(e,t+=i.length)},function(e,t){const r=e.substr(t,1);if(t+=r.length,"."!==r)return"";const n=G(e,t);return t+=n.length,""===n?"":r+n+W(e,t)},function(e,t){const r=Y(e,t);return t+=r.length,""===r?"":r+W(e,t)}]),X=H([function(e,t){const r=e.substr(t,2);if(t+=r.length,"0b"!==r.toLowerCase())return"";const n=function(e,t){var r;const n=e.substr(t).match(/^[01]+/);return null!==(r=n&&n[0])&&void 0!==r?r:""}(e,t);return""===n?"":r+n},function(e,t){const r=e.substr(t,2);if(t+=r.length,"0o"!==r.toLowerCase())return"";const n=function(e,t){var r;const n=e.substr(t).match(/^[0-7]+/);return null!==(r=n&&n[0])&&void 0!==r?r:""}(e,t);return""===n?"":r+n},function(e,t){const r=e.substr(t,2);if(t+=r.length,"0x"!==r.toLowerCase())return"";const n=function(e,t){var r;const n=e.substr(t).match(/^[0-9a-f]+/i);return null!==(r=n&&n[0])&&void 0!==r?r:""}(e,t);return""===n?"":r+n}]),J=H([X,Q]);function Z(e,t,r){r+=K(t,r).length;const n=e.filter(e=>t.startsWith(e,r))[0];return n?(r+=n.length,{cursor:r+=K(t,r).length,operator:n}):null}const ee=[["**"],["*","/","%"],["+","-"],["<<",">>>",">>"],["&"],["^"],["|"]].reduce((e,t)=>function(e,t){return(r,n)=>{const i=e(r,n);if(!i)return null;n=i.cursor;let a=i.evaluable;for(;;){const i=Z(t,r,n);if(!i)break;n=i.cursor;const o=e(r,n);if(!o)return null;n=o.cursor,a=new U(i.operator,a,o.evaluable)}return a?{cursor:n,evaluable:a}:null}}(e,t),(function e(t,r){const n=function(e,t){var r;return null!==(r=function(e,t){const r=J(e,t);return t+=r.length,""===r?null:{evaluable:new R(r),cursor:t}}(e,t))&&void 0!==r?r:function(e,t){const r=e.substr(t,1);if(t+=r.length,"("!==r)return null;const n=te(e,t);if(!n)return null;t=n.cursor,t+=K(e,t).length;const i=e.substr(t,1);return t+=i.length,")"!==i?null:{evaluable:n.evaluable,cursor:t}}(e,t)}(t,r);if(n)return n;const i=t.substr(r,1);if(r+=i.length,"+"!==i&&"-"!==i&&"~"!==i)return null;const a=e(t,r);return a?{cursor:r=a.cursor,evaluable:new q(i,a.evaluable)}:null}));function te(e,t){return t+=K(e,t).length,ee(e,t)}function re(e){var t;const r=function(e){const t=te(e,0);return t?t.cursor+K(e,t.cursor).length!==e.length?null:t.evaluable:null}(e);return null!==(t=null==r?void 0:r.evaluate())&&void 0!==t?t:null}function ne(e){return t=>t.toFixed(Math.max(Math.min(e,20),0))}const ie=ne(0);function ae(e){return ie(e)+"%"}function oe({primary:e,secondary:t,forward:r,backward:n}){let i=!1;function a(e){i||(i=!0,e(),i=!1)}e.emitter.on("change",n=>{a(()=>{t.setRawValue(r(e,t),n.options)})}),t.emitter.on("change",i=>{a(()=>{e.setRawValue(n(e,t),i.options)}),a(()=>{t.setRawValue(r(e,t),i.options)})}),a(()=>{t.setRawValue(r(e,t),{forceEmit:!1,last:!0})})}function se(e,t){const r=e*(t.altKey?.1:1)*(t.shiftKey?10:1);return t.upKey?+r:t.downKey?-r:0}function ue(e){return{altKey:e.altKey,downKey:"ArrowDown"===e.key,shiftKey:e.shiftKey,upKey:"ArrowUp"===e.key}}function le(e){return{altKey:e.altKey,downKey:"ArrowLeft"===e.key,shiftKey:e.shiftKey,upKey:"ArrowRight"===e.key}}function ce(e){return function(e){return"ArrowUp"===e||"ArrowDown"===e}(e)||"ArrowLeft"===e||"ArrowRight"===e}function fe(e,t){var r,n;const i=t.ownerDocument.defaultView,a=t.getBoundingClientRect();return{x:e.pageX-((null!==(r=i&&i.scrollX)&&void 0!==r?r:0)+a.left),y:e.pageY-((null!==(n=i&&i.scrollY)&&void 0!==n?n:0)+a.top)}}class he{constructor(e){this.lastTouch_=null,this.onDocumentMouseMove_=this.onDocumentMouseMove_.bind(this),this.onDocumentMouseUp_=this.onDocumentMouseUp_.bind(this),this.onMouseDown_=this.onMouseDown_.bind(this),this.onTouchEnd_=this.onTouchEnd_.bind(this),this.onTouchMove_=this.onTouchMove_.bind(this),this.onTouchStart_=this.onTouchStart_.bind(this),this.elem_=e,this.emitter=new i,e.addEventListener("touchstart",this.onTouchStart_,{passive:!1}),e.addEventListener("touchmove",this.onTouchMove_,{passive:!0}),e.addEventListener("touchend",this.onTouchEnd_),e.addEventListener("mousedown",this.onMouseDown_)}computePosition_(e){const t=this.elem_.getBoundingClientRect();return{bounds:{width:t.width,height:t.height},point:e?{x:e.x,y:e.y}:null}}onMouseDown_(e){var t;e.preventDefault(),null===(t=e.currentTarget)||void 0===t||t.focus();const r=this.elem_.ownerDocument;r.addEventListener("mousemove",this.onDocumentMouseMove_),r.addEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("down",{altKey:e.altKey,data:this.computePosition_(fe(e,this.elem_)),sender:this,shiftKey:e.shiftKey})}onDocumentMouseMove_(e){this.emitter.emit("move",{altKey:e.altKey,data:this.computePosition_(fe(e,this.elem_)),sender:this,shiftKey:e.shiftKey})}onDocumentMouseUp_(e){const t=this.elem_.ownerDocument;t.removeEventListener("mousemove",this.onDocumentMouseMove_),t.removeEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("up",{altKey:e.altKey,data:this.computePosition_(fe(e,this.elem_)),sender:this,shiftKey:e.shiftKey})}onTouchStart_(e){e.preventDefault();const t=e.targetTouches.item(0),r=this.elem_.getBoundingClientRect();this.emitter.emit("down",{altKey:e.altKey,data:this.computePosition_(t?{x:t.clientX-r.left,y:t.clientY-r.top}:void 0),sender:this,shiftKey:e.shiftKey}),this.lastTouch_=t}onTouchMove_(e){const t=e.targetTouches.item(0),r=this.elem_.getBoundingClientRect();this.emitter.emit("move",{altKey:e.altKey,data:this.computePosition_(t?{x:t.clientX-r.left,y:t.clientY-r.top}:void 0),sender:this,shiftKey:e.shiftKey}),this.lastTouch_=t}onTouchEnd_(e){var t;const r=null!==(t=e.targetTouches.item(0))&&void 0!==t?t:this.lastTouch_,n=this.elem_.getBoundingClientRect();this.emitter.emit("up",{altKey:e.altKey,data:this.computePosition_(r?{x:r.clientX-n.left,y:r.clientY-n.top}:void 0),sender:this,shiftKey:e.shiftKey})}}function pe(e,t,r,n,i){return n+(e-t)/(r-t)*(i-n)}function de(e){return String(e.toFixed(10)).split(".")[1].replace(/0+$/,"").length}function me(e,t,r){return Math.min(Math.max(e,t),r)}function ve(e,t){return(e%t+t)%t}const ge=o("txt");class be{constructor(e,t){this.onChange_=this.onChange_.bind(this),this.props_=t.props,this.props_.emitter.on("change",this.onChange_),this.element=e.createElement("div"),this.element.classList.add(ge(),ge(void 0,"num")),t.arrayPosition&&this.element.classList.add(ge(void 0,t.arrayPosition)),t.viewProps.bindClassModifiers(this.element);const r=e.createElement("input");r.classList.add(ge("i")),r.type="text",t.viewProps.bindDisabled(r),this.element.appendChild(r),this.inputElement=r,this.onDraggingChange_=this.onDraggingChange_.bind(this),this.dragging_=t.dragging,this.dragging_.emitter.on("change",this.onDraggingChange_),this.element.classList.add(ge()),this.inputElement.classList.add(ge("i"));const n=e.createElement("div");n.classList.add(ge("k")),this.element.appendChild(n),this.knobElement=n;const i=e.createElementNS(y,"svg");i.classList.add(ge("g")),this.knobElement.appendChild(i);const a=e.createElementNS(y,"path");a.classList.add(ge("gb")),i.appendChild(a),this.guideBodyElem_=a;const s=e.createElementNS(y,"path");s.classList.add(ge("gh")),i.appendChild(s),this.guideHeadElem_=s;const u=e.createElement("div");u.classList.add(o("tt")()),this.knobElement.appendChild(u),this.tooltipElem_=u,t.value.emitter.on("change",this.onChange_),this.value=t.value,this.refresh()}onDraggingChange_(e){if(null===e.rawValue)return void this.element.classList.remove(ge(void 0,"drg"));this.element.classList.add(ge(void 0,"drg"));const t=e.rawValue/this.props_.get("draggingScale"),r=t+(t>0?-1:t<0?1:0),n=me(-r,-4,4);this.guideHeadElem_.setAttributeNS(null,"d",[`M ${r+n},0 L${r},4 L${r+n},8`,`M ${t},-1 L${t},9`].join(" ")),this.guideBodyElem_.setAttributeNS(null,"d",`M 0,4 L${t},4`);const i=this.props_.get("formatter");this.tooltipElem_.textContent=i(this.value.rawValue),this.tooltipElem_.style.left=t+"px"}refresh(){const e=this.props_.get("formatter");this.inputElement.value=e(this.value.rawValue)}onChange_(){this.refresh()}}class ye{constructor(e,t){var r;this.originRawValue_=0,this.onInputChange_=this.onInputChange_.bind(this),this.onInputKeyDown_=this.onInputKeyDown_.bind(this),this.onInputKeyUp_=this.onInputKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.baseStep_=t.baseStep,this.parser_=t.parser,this.props=t.props,this.sliderProps_=null!==(r=t.sliderProps)&&void 0!==r?r:null,this.value=t.value,this.viewProps=t.viewProps,this.dragging_=p(null),this.view=new be(e,{arrayPosition:t.arrayPosition,dragging:this.dragging_,props:this.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_),this.view.inputElement.addEventListener("keydown",this.onInputKeyDown_),this.view.inputElement.addEventListener("keyup",this.onInputKeyUp_);const n=new he(this.view.knobElement);n.emitter.on("down",this.onPointerDown_),n.emitter.on("move",this.onPointerMove_),n.emitter.on("up",this.onPointerUp_)}constrainValue_(e){var t,r;const n=null===(t=this.sliderProps_)||void 0===t?void 0:t.get("minValue"),i=null===(r=this.sliderProps_)||void 0===r?void 0:r.get("maxValue");let a=e;return void 0!==n&&(a=Math.max(a,n)),void 0!==i&&(a=Math.min(a,i)),a}onInputChange_(e){const r=e.currentTarget.value,n=this.parser_(r);t(n)||(this.value.rawValue=this.constrainValue_(n)),this.view.refresh()}onInputKeyDown_(e){const t=se(this.baseStep_,ue(e));0!==t&&this.value.setRawValue(this.constrainValue_(this.value.rawValue+t),{forceEmit:!1,last:!1})}onInputKeyUp_(e){0!==se(this.baseStep_,ue(e))&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}onPointerDown_(){this.originRawValue_=this.value.rawValue,this.dragging_.rawValue=0}computeDraggingValue_(e){if(!e.point)return null;const t=e.point.x-e.bounds.width/2;return this.constrainValue_(this.originRawValue_+t*this.props.get("draggingScale"))}onPointerMove_(e){const t=this.computeDraggingValue_(e.data);null!==t&&(this.value.setRawValue(t,{forceEmit:!1,last:!1}),this.dragging_.rawValue=this.value.rawValue-this.originRawValue_)}onPointerUp_(e){const t=this.computeDraggingValue_(e.data);null!==t&&(this.value.setRawValue(t,{forceEmit:!0,last:!0}),this.dragging_.rawValue=null)}}o("sld");o("sldtxt");function _e(e,t){e.write(t)}function we(e){if("inline"===e||"popup"===e)return e}function xe(e){const t=g;return t.required.object({max:t.optional.number,min:t.optional.number,step:t.optional.number})(e).value}function Ee(e,t){const r=e&&S(e,D);return r?de(r.step):Math.max(de(t),2)}function Ae(e){const t=function(e){const t=e?S(e,D):null;return t?t.step:null}(e);return null!=t?t:1}function Ce(e,t){var r;const n=e&&S(e,D),i=Math.abs(null!==(r=null==n?void 0:n.step)&&void 0!==r?r:t);return 0===i?.1:Math.pow(10,Math.floor(Math.log10(i))-1)}o("ckb");const ke=o("col");class Me{constructor(e,t){this.element=e.createElement("div"),this.element.classList.add(ke()),t.foldable.bindExpandedClass(this.element,ke(void 0,"expanded")),l(t.foldable,"completed",c(this.element,ke(void 0,"cpl")));const r=e.createElement("div");r.classList.add(ke("h")),this.element.appendChild(r);const n=e.createElement("div");n.classList.add(ke("s")),r.appendChild(n),this.swatchElement=n;const i=e.createElement("div");if(i.classList.add(ke("t")),r.appendChild(i),this.textElement=i,"inline"===t.pickerLayout){const t=e.createElement("div");t.classList.add(ke("p")),this.element.appendChild(t),this.pickerElement=t}else this.pickerElement=null}}function Pe(e,t,r){const n=ve(e,360),i=me(t/100,0,1),a=me(r/100,0,1),o=a*i,s=o*(1-Math.abs(n/60%2-1)),u=a-o;let l,c,f;return[l,c,f]=n>=0&&n<60?[o,s,0]:n>=60&&n<120?[s,o,0]:n>=120&&n<180?[0,o,s]:n>=180&&n<240?[0,s,o]:n>=240&&n<300?[s,0,o]:[o,0,s],[255*(l+u),255*(c+u),255*(f+u)]}function Te(e){return[e[0],e[1],e[2]]}function Se(e,t){return[e[0],e[1],e[2],t]}const $e={hsl:{hsl:(e,t,r)=>[e,t,r],hsv:function(e,t,r){const n=r+t*(100-Math.abs(2*r-100))/200;return[e,0!==n?t*(100-Math.abs(2*r-100))/n:0,r+t*(100-Math.abs(2*r-100))/200]},rgb:function(e,t,r){const n=(e%360+360)%360,i=me(t/100,0,1),a=me(r/100,0,1),o=(1-Math.abs(2*a-1))*i,s=o*(1-Math.abs(n/60%2-1)),u=a-o/2;let l,c,f;return[l,c,f]=n>=0&&n<60?[o,s,0]:n>=60&&n<120?[s,o,0]:n>=120&&n<180?[0,o,s]:n>=180&&n<240?[0,s,o]:n>=240&&n<300?[s,0,o]:[o,0,s],[255*(l+u),255*(c+u),255*(f+u)]}},hsv:{hsl:function(e,t,r){const n=100-Math.abs(r*(200-t)/100-100);return[e,0!==n?t*r/n:0,r*(200-t)/200]},hsv:(e,t,r)=>[e,t,r],rgb:Pe},rgb:{hsl:function(e,t,r){const n=me(e/255,0,1),i=me(t/255,0,1),a=me(r/255,0,1),o=Math.max(n,i,a),s=Math.min(n,i,a),u=o-s;let l=0,c=0;const f=(s+o)/2;return 0!==u&&(c=u/(1-Math.abs(o+s-1)),l=(l=n===o?(i-a)/u:i===o?2+(a-n)/u:4+(n-i)/u)/6+(l<0?1:0)),[360*l,100*c,100*f]},hsv:function(e,t,r){const n=me(e/255,0,1),i=me(t/255,0,1),a=me(r/255,0,1),o=Math.max(n,i,a),s=o-Math.min(n,i,a);let u;return[u=0===s?0:o===n?((i-a)/s%6+6)%6*60:o===i?60*((a-n)/s+2):60*((n-i)/s+4),100*(0===o?0:s/o),100*o]},rgb:(e,t,r)=>[e,t,r]}};function Ve(e,t){return["float"===t?1:"rgb"===e?255:360,"float"===t?1:"rgb"===e?255:100,"float"===t?1:"rgb"===e?255:100]}function De(e,t,r,n){const i=Ve(t,r),a=Ve(t,n);return e.map((e,t)=>e/i[t]*a[t])}function Le(e,r){return"object"==typeof e&&!t(e)&&r in e&&"number"==typeof e[r]}class Oe{static black(e="int"){return new Oe([0,0,0],"rgb",e)}static fromObject(e,t="int"){const r="a"in e?[e.r,e.g,e.b,e.a]:[e.r,e.g,e.b];return new Oe(r,"rgb",t)}static toRgbaObject(e,t="int"){return e.toRgbaObject(t)}static isRgbColorObject(e){return Le(e,"r")&&Le(e,"g")&&Le(e,"b")}static isRgbaColorObject(e){return this.isRgbColorObject(e)&&Le(e,"a")}static isColorObject(e){return this.isRgbColorObject(e)}static equals(e,t){if(e.mode!==t.mode)return!1;const r=e.comps_,n=t.comps_;for(let i=0;i<r.length;i++)if(r[i]!==n[i])return!1;return!0}constructor(e,t,r="int"){this.mode=t,this.type=r,this.comps_=function(e,t,r){var n;const i=Ve(t,r);return["rgb"===t?me(e[0],0,i[0]):(a=e[0],o=i[0],a===o?o:ve(a,o)),me(e[1],0,i[1]),me(e[2],0,i[2]),me(null!==(n=e[3])&&void 0!==n?n:1,0,1)];var a,o}(e,t,r)}getComponents(e,t="int"){return Se(function(e,t,r){const n=De(e,t.mode,t.type,"int");return De($e[t.mode][r.mode](...n),r.mode,"int",r.type)}(Te(this.comps_),{mode:this.mode,type:this.type},{mode:null!=e?e:this.mode,type:t}),this.comps_[3])}toRgbaObject(e="int"){const t=this.getComponents("rgb",e);return{r:t[0],g:t[1],b:t[2],a:t[3]}}}const je=o("colp");class Ie{constructor(e,t){this.alphaViews_=null,this.element=e.createElement("div"),this.element.classList.add(je()),t.viewProps.bindClassModifiers(this.element);const r=e.createElement("div");r.classList.add(je("hsv"));const n=e.createElement("div");n.classList.add(je("sv")),this.svPaletteView_=t.svPaletteView,n.appendChild(this.svPaletteView_.element),r.appendChild(n);const i=e.createElement("div");i.classList.add(je("h")),this.hPaletteView_=t.hPaletteView,i.appendChild(this.hPaletteView_.element),r.appendChild(i),this.element.appendChild(r);const a=e.createElement("div");if(a.classList.add(je("rgb")),this.textView_=t.textView,a.appendChild(this.textView_.element),this.element.appendChild(a),t.alphaViews){this.alphaViews_={palette:t.alphaViews.palette,text:t.alphaViews.text};const r=e.createElement("div");r.classList.add(je("a"));const n=e.createElement("div");n.classList.add(je("ap")),n.appendChild(this.alphaViews_.palette.element),r.appendChild(n);const i=e.createElement("div");i.classList.add(je("at")),i.appendChild(this.alphaViews_.text.element),r.appendChild(i),this.element.appendChild(r)}}get allFocusableElements(){const e=[this.svPaletteView_.element,this.hPaletteView_.element,this.textView_.modeSelectElement,...this.textView_.textViews.map(e=>e.inputElement)];return this.alphaViews_&&e.push(this.alphaViews_.palette.element,this.alphaViews_.text.inputElement),e}}function Fe(e){return"int"===e?"int":"float"===e?"float":void 0}function Be(e){const t=g;return b(e,{alpha:t.optional.boolean,color:t.optional.object({alpha:t.optional.boolean,type:t.optional.custom(Fe)}),expanded:t.optional.boolean,picker:t.optional.custom(we)})}function Re(e){return e?.1:1}function ze(e){var t;return null===(t=e.color)||void 0===t?void 0:t.type}function Ue(e,t){const r=e.match(/^(.+)%$/);return r?Math.min(.01*parseFloat(r[1])*t,t):Math.min(parseFloat(e),t)}const Ne={deg:e=>e,grad:e=>360*e/400,rad:e=>360*e/(2*Math.PI),turn:e=>360*e};function qe(e){const t=e.match(/^([0-9.]+?)(deg|grad|rad|turn)$/);if(!t)return parseFloat(e);const r=parseFloat(t[1]),n=t[2];return Ne[n](r)}function He(e){const t=e.match(/^rgb\(\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!t)return null;const r=[Ue(t[1],255),Ue(t[2],255),Ue(t[3],255)];return isNaN(r[0])||isNaN(r[1])||isNaN(r[2])?null:r}function Ke(e){return t=>{const r=He(t);return r?new Oe(r,"rgb",e):null}}function Ge(e){const t=e.match(/^rgba\(\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!t)return null;const r=[Ue(t[1],255),Ue(t[2],255),Ue(t[3],255),Ue(t[4],1)];return isNaN(r[0])||isNaN(r[1])||isNaN(r[2])||isNaN(r[3])?null:r}function We(e){return t=>{const r=Ge(t);return r?new Oe(r,"rgb",e):null}}function Ye(e){const t=e.match(/^hsl\(\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!t)return null;const r=[qe(t[1]),Ue(t[2],100),Ue(t[3],100)];return isNaN(r[0])||isNaN(r[1])||isNaN(r[2])?null:r}function Qe(e){return t=>{const r=Ye(t);return r?new Oe(r,"hsl",e):null}}function Xe(e){const t=e.match(/^hsla\(\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!t)return null;const r=[qe(t[1]),Ue(t[2],100),Ue(t[3],100),Ue(t[4],1)];return isNaN(r[0])||isNaN(r[1])||isNaN(r[2])||isNaN(r[3])?null:r}function Je(e){return t=>{const r=Xe(t);return r?new Oe(r,"hsl",e):null}}function Ze(e){const t=e.match(/^#([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);if(t)return[parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16)];const r=e.match(/^(?:#|0x)([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);return r?[parseInt(r[1],16),parseInt(r[2],16),parseInt(r[3],16)]:null}function et(e){const t=e.match(/^#?([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);if(t)return[parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16),pe(parseInt(t[4]+t[4],16),0,255,0,1)];const r=e.match(/^(?:#|0x)?([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);return r?[parseInt(r[1],16),parseInt(r[2],16),parseInt(r[3],16),pe(parseInt(r[4],16),0,255,0,1)]:null}function tt(e){const t=e.match(/^\{\s*r\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*g\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*b\s*:\s*([0-9A-Fa-f.]+%?)\s*\}$/);if(!t)return null;const r=[parseFloat(t[1]),parseFloat(t[2]),parseFloat(t[3])];return isNaN(r[0])||isNaN(r[1])||isNaN(r[2])?null:r}function rt(e){return t=>{const r=tt(t);return r?new Oe(r,"rgb",e):null}}function nt(e){const t=e.match(/^\{\s*r\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*g\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*b\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*a\s*:\s*([0-9A-Fa-f.]+%?)\s*\}$/);if(!t)return null;const r=[parseFloat(t[1]),parseFloat(t[2]),parseFloat(t[3]),parseFloat(t[4])];return isNaN(r[0])||isNaN(r[1])||isNaN(r[2])||isNaN(r[3])?null:r}function it(e){return t=>{const r=nt(t);return r?new Oe(r,"rgb",e):null}}const at=[{parser:Ze,result:{alpha:!1,mode:"rgb",notation:"hex"}},{parser:et,result:{alpha:!0,mode:"rgb",notation:"hex"}},{parser:He,result:{alpha:!1,mode:"rgb",notation:"func"}},{parser:Ge,result:{alpha:!0,mode:"rgb",notation:"func"}},{parser:Ye,result:{alpha:!1,mode:"hsl",notation:"func"}},{parser:Xe,result:{alpha:!0,mode:"hsl",notation:"func"}},{parser:tt,result:{alpha:!1,mode:"rgb",notation:"object"}},{parser:nt,result:{alpha:!0,mode:"rgb",notation:"object"}}];function ot(e,t="int"){const r=function(e){return at.reduce((t,{parser:r,result:n})=>t||(r(e)?n:null),null)}(e);return r?"hex"===r.notation&&"float"!==t?Object.assign(Object.assign({},r),{type:"int"}):"func"===r.notation?Object.assign(Object.assign({},r),{type:t}):null:null}const st={int:[function(e){const t=Ze(e);return t?new Oe(t,"rgb","int"):null},function(e){const t=et(e);return t?new Oe(t,"rgb","int"):null},Ke("int"),We("int"),Qe("int"),Je("int"),rt("int"),it("int")],float:[Ke("float"),We("float"),Qe("float"),Je("float"),rt("float"),it("float")]};function ut(e){const t=st[e];return e=>t.reduce((t,r)=>t||r(e),null)}function lt(e){const t=me(Math.floor(e),0,255).toString(16);return 1===t.length?"0"+t:t}function ct(e,t="#"){return`${t}${Te(e.getComponents("rgb")).map(lt).join("")}`}function ft(e,t="#"){const r=e.getComponents("rgb");return`${t}${[r[0],r[1],r[2],255*r[3]].map(lt).join("")}`}function ht(e,t){const r=ne("float"===t?2:0);return`rgb(${Te(e.getComponents("rgb",t)).map(e=>r(e)).join(", ")})`}function pt(e){return t=>ht(t,e)}function dt(e,t){const r=ne(2),n=ne("float"===t?2:0);return`rgba(${e.getComponents("rgb",t).map((e,t)=>(3===t?r:n)(e)).join(", ")})`}function mt(e){return t=>dt(t,e)}function vt(e,t){const r=ne("float"===t?2:0),n=["r","g","b"];return`{${Te(e.getComponents("rgb",t)).map((e,t)=>`${n[t]}: ${r(e)}`).join(", ")}}`}function gt(e){return t=>vt(t,e)}function bt(e,t){const r=ne(2),n=ne("float"===t?2:0),i=["r","g","b","a"];return`{${e.getComponents("rgb",t).map((e,t)=>`${i[t]}: ${(3===t?r:n)(e)}`).join(", ")}}`}function yt(e){return t=>bt(t,e)}const _t=[{format:{alpha:!1,mode:"rgb",notation:"hex",type:"int"},stringifier:ct},{format:{alpha:!0,mode:"rgb",notation:"hex",type:"int"},stringifier:ft},{format:{alpha:!1,mode:"hsl",notation:"func",type:"int"},stringifier:function(e){const t=[ne(0),ae,ae];return`hsl(${Te(e.getComponents("hsl")).map((e,r)=>t[r](e)).join(", ")})`}},{format:{alpha:!0,mode:"hsl",notation:"func",type:"int"},stringifier:function(e){const t=[ne(0),ae,ae,ne(2)];return`hsla(${e.getComponents("hsl").map((e,r)=>t[r](e)).join(", ")})`}},...["int","float"].reduce((e,t)=>[...e,{format:{alpha:!1,mode:"rgb",notation:"func",type:t},stringifier:pt(t)},{format:{alpha:!0,mode:"rgb",notation:"func",type:t},stringifier:mt(t)},{format:{alpha:!1,mode:"rgb",notation:"object",type:t},stringifier:gt(t)},{format:{alpha:!0,mode:"rgb",notation:"object",type:t},stringifier:yt(t)}],[])];function wt(e){return _t.reduce((t,r)=>{return t||(n=r.format,i=e,n.alpha===i.alpha&&n.mode===i.mode&&n.notation===i.notation&&n.type===i.type?r.stringifier:null);var n,i},null)}const xt=o("apl");class Et{constructor(e,t){this.onValueChange_=this.onValueChange_.bind(this),this.value=t.value,this.value.emitter.on("change",this.onValueChange_),this.element=e.createElement("div"),this.element.classList.add(xt()),t.viewProps.bindClassModifiers(this.element),t.viewProps.bindTabIndex(this.element);const r=e.createElement("div");r.classList.add(xt("b")),this.element.appendChild(r);const n=e.createElement("div");n.classList.add(xt("c")),r.appendChild(n),this.colorElem_=n;const i=e.createElement("div");i.classList.add(xt("m")),this.element.appendChild(i),this.markerElem_=i;const a=e.createElement("div");a.classList.add(xt("p")),this.markerElem_.appendChild(a),this.previewElem_=a,this.update_()}update_(){const e=this.value.rawValue,t=e.getComponents("rgb"),r=new Oe([t[0],t[1],t[2],0],"rgb"),n=new Oe([t[0],t[1],t[2],255],"rgb"),i=["to right",dt(r),dt(n)];this.colorElem_.style.background=`linear-gradient(${i.join(",")})`,this.previewElem_.style.backgroundColor=dt(e);const a=pe(t[3],0,1,0,100);this.markerElem_.style.left=a+"%"}onValueChange_(){this.update_()}}class At{constructor(e,t){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=t.value,this.viewProps=t.viewProps,this.view=new Et(e,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new he(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(e,t){if(!e.point)return;const r=e.point.x/e.bounds.width,n=this.value.rawValue,[i,a,o]=n.getComponents("hsv");this.value.setRawValue(new Oe([i,a,o,r],"hsv"),t)}onPointerDown_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onKeyDown_(e){const t=se(Re(!0),le(e));if(0===t)return;const r=this.value.rawValue,[n,i,a,o]=r.getComponents("hsv");this.value.setRawValue(new Oe([n,i,a,o+t],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(e){0!==se(Re(!0),le(e))&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}const Ct=o("coltxt");class kt{constructor(e,t){this.element=e.createElement("div"),this.element.classList.add(Ct()),t.viewProps.bindClassModifiers(this.element);const r=e.createElement("div");r.classList.add(Ct("m")),this.modeElem_=function(e){const t=e.createElement("select");return t.appendChild([{text:"RGB",value:"rgb"},{text:"HSL",value:"hsl"},{text:"HSV",value:"hsv"}].reduce((t,r)=>{const n=e.createElement("option");return n.textContent=r.text,n.value=r.value,t.appendChild(n),t},e.createDocumentFragment())),t}(e),this.modeElem_.classList.add(Ct("ms")),r.appendChild(this.modeSelectElement),t.viewProps.bindDisabled(this.modeElem_);const n=e.createElement("div");n.classList.add(Ct("mm")),n.appendChild(E(e,"dropdown")),r.appendChild(n),this.element.appendChild(r);const i=e.createElement("div");i.classList.add(Ct("w")),this.element.appendChild(i),this.textsElem_=i,this.textViews_=t.textViews,this.applyTextViews_(),u(t.colorMode,e=>{this.modeElem_.value=e})}get modeSelectElement(){return this.modeElem_}get textViews(){return this.textViews_}set textViews(e){this.textViews_=e,this.applyTextViews_()}applyTextViews_(){A(this.textsElem_);const e=this.element.ownerDocument;this.textViews_.forEach(t=>{const r=e.createElement("div");r.classList.add(Ct("c")),r.appendChild(t.element),this.textsElem_.appendChild(r)})}}function Mt(e,t,r){const n=Ve(e,t)[r];return new $({min:0,max:n})}function Pt(e,t,r){return new ye(e,{arrayPosition:0===r?"fst":2===r?"lst":"mid",baseStep:Re(!1),parser:t.parser,props:d.fromObject({draggingScale:"float"===t.colorType?.01:1,formatter:(n=t.colorType,ne("float"===n?2:0))}),value:p(0,{constraint:Mt(t.colorMode,t.colorType,r)}),viewProps:t.viewProps});var n}class Tt{constructor(e,t){this.onModeSelectChange_=this.onModeSelectChange_.bind(this),this.colorType_=t.colorType,this.parser_=t.parser,this.value=t.value,this.viewProps=t.viewProps,this.colorMode=p(this.value.rawValue.mode),this.ccs_=this.createComponentControllers_(e),this.view=new kt(e,{colorMode:this.colorMode,textViews:[this.ccs_[0].view,this.ccs_[1].view,this.ccs_[2].view],viewProps:this.viewProps}),this.view.modeSelectElement.addEventListener("change",this.onModeSelectChange_)}createComponentControllers_(e){const t={colorMode:this.colorMode.rawValue,colorType:this.colorType_,parser:this.parser_,viewProps:this.viewProps},r=[Pt(e,t,0),Pt(e,t,1),Pt(e,t,2)];return r.forEach((e,t)=>{oe({primary:this.value,secondary:e.value,forward:e=>e.rawValue.getComponents(this.colorMode.rawValue,this.colorType_)[t],backward:(e,r)=>{const n=this.colorMode.rawValue,i=e.rawValue.getComponents(n,this.colorType_);return i[t]=r.rawValue,new Oe(Se(Te(i),i[3]),n,this.colorType_)}})}),r}onModeSelectChange_(e){const t=e.currentTarget;this.colorMode.rawValue=t.value,this.ccs_=this.createComponentControllers_(this.view.element.ownerDocument),this.view.textViews=[this.ccs_[0].view,this.ccs_[1].view,this.ccs_[2].view]}}const St=o("hpl");class $t{constructor(e,t){this.onValueChange_=this.onValueChange_.bind(this),this.value=t.value,this.value.emitter.on("change",this.onValueChange_),this.element=e.createElement("div"),this.element.classList.add(St()),t.viewProps.bindClassModifiers(this.element),t.viewProps.bindTabIndex(this.element);const r=e.createElement("div");r.classList.add(St("c")),this.element.appendChild(r);const n=e.createElement("div");n.classList.add(St("m")),this.element.appendChild(n),this.markerElem_=n,this.update_()}update_(){const e=this.value.rawValue,[t]=e.getComponents("hsv");this.markerElem_.style.backgroundColor=ht(new Oe([t,100,100],"hsv"));const r=pe(t,0,360,0,100);this.markerElem_.style.left=r+"%"}onValueChange_(){this.update_()}}class Vt{constructor(e,t){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=t.value,this.viewProps=t.viewProps,this.view=new $t(e,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new he(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(e,t){if(!e.point)return;const r=pe(me(e.point.x,0,e.bounds.width),0,e.bounds.width,0,360),n=this.value.rawValue,[,i,a,o]=n.getComponents("hsv");this.value.setRawValue(new Oe([r,i,a,o],"hsv"),t)}onPointerDown_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onKeyDown_(e){const t=se(Re(!1),le(e));if(0===t)return;const r=this.value.rawValue,[n,i,a,o]=r.getComponents("hsv");this.value.setRawValue(new Oe([n+t,i,a,o],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(e){0!==se(Re(!1),le(e))&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}const Dt=o("svp");class Lt{constructor(e,t){this.onValueChange_=this.onValueChange_.bind(this),this.value=t.value,this.value.emitter.on("change",this.onValueChange_),this.element=e.createElement("div"),this.element.classList.add(Dt()),t.viewProps.bindClassModifiers(this.element),t.viewProps.bindTabIndex(this.element);const r=e.createElement("canvas");r.height=64,r.width=64,r.classList.add(Dt("c")),this.element.appendChild(r),this.canvasElement=r;const n=e.createElement("div");n.classList.add(Dt("m")),this.element.appendChild(n),this.markerElem_=n,this.update_()}update_(){const e=function(e){const t=e.ownerDocument.defaultView;return t&&"document"in t?e.getContext("2d",{willReadFrequently:!0}):null}(this.canvasElement);if(!e)return;const t=this.value.rawValue.getComponents("hsv"),r=this.canvasElement.width,n=this.canvasElement.height,i=e.getImageData(0,0,r,n),a=i.data;for(let u=0;u<n;u++)for(let e=0;e<r;e++){const i=pe(e,0,r,0,100),o=pe(u,0,n,100,0),s=Pe(t[0],i,o),l=4*(u*r+e);a[l]=s[0],a[l+1]=s[1],a[l+2]=s[2],a[l+3]=255}e.putImageData(i,0,0);const o=pe(t[1],0,100,0,100);this.markerElem_.style.left=o+"%";const s=pe(t[2],0,100,100,0);this.markerElem_.style.top=s+"%"}onValueChange_(){this.update_()}}class Ot{constructor(e,t){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=t.value,this.viewProps=t.viewProps,this.view=new Lt(e,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new he(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(e,t){if(!e.point)return;const r=pe(e.point.x,0,e.bounds.width,0,100),n=pe(e.point.y,0,e.bounds.height,100,0),[i,,,a]=this.value.rawValue.getComponents("hsv");this.value.setRawValue(new Oe([i,r,n,a],"hsv"),t)}onPointerDown_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onKeyDown_(e){ce(e.key)&&e.preventDefault();const[t,r,n,i]=this.value.rawValue.getComponents("hsv"),a=Re(!1),o=se(a,le(e)),s=se(a,ue(e));0===o&&0===s||this.value.setRawValue(new Oe([t,r+o,n+s,i],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(e){const t=Re(!1),r=se(t,le(e)),n=se(t,ue(e));0===r&&0===n||this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}class jt{constructor(e,t){this.value=t.value,this.viewProps=t.viewProps,this.hPaletteC_=new Vt(e,{value:this.value,viewProps:this.viewProps}),this.svPaletteC_=new Ot(e,{value:this.value,viewProps:this.viewProps}),this.alphaIcs_=t.supportsAlpha?{palette:new At(e,{value:this.value,viewProps:this.viewProps}),text:new ye(e,{parser:re,baseStep:.1,props:d.fromObject({draggingScale:.01,formatter:ne(2)}),value:p(0,{constraint:new $({min:0,max:1})}),viewProps:this.viewProps})}:null,this.alphaIcs_&&oe({primary:this.value,secondary:this.alphaIcs_.text.value,forward:e=>e.rawValue.getComponents()[3],backward:(e,t)=>{const r=e.rawValue.getComponents();return r[3]=t.rawValue,new Oe(r,e.rawValue.mode)}}),this.textC_=new Tt(e,{colorType:t.colorType,parser:re,value:this.value,viewProps:this.viewProps}),this.view=new Ie(e,{alphaViews:this.alphaIcs_?{palette:this.alphaIcs_.palette.view,text:this.alphaIcs_.text.view}:null,hPaletteView:this.hPaletteC_.view,supportsAlpha:t.supportsAlpha,svPaletteView:this.svPaletteC_.view,textView:this.textC_.view,viewProps:this.viewProps})}get textController(){return this.textC_}}const It=o("colsw");class Ft{constructor(e,t){this.onValueChange_=this.onValueChange_.bind(this),t.value.emitter.on("change",this.onValueChange_),this.value=t.value,this.element=e.createElement("div"),this.element.classList.add(It()),t.viewProps.bindClassModifiers(this.element);const r=e.createElement("div");r.classList.add(It("sw")),this.element.appendChild(r),this.swatchElem_=r;const n=e.createElement("button");n.classList.add(It("b")),t.viewProps.bindDisabled(n),this.element.appendChild(n),this.buttonElement=n,this.update_()}update_(){const e=this.value.rawValue;this.swatchElem_.style.backgroundColor=ft(e)}onValueChange_(){this.update_()}}class Bt{constructor(e,t){this.value=t.value,this.viewProps=t.viewProps,this.view=new Ft(e,{value:this.value,viewProps:this.viewProps})}}class Rt{constructor(e,t){this.onButtonBlur_=this.onButtonBlur_.bind(this),this.onButtonClick_=this.onButtonClick_.bind(this),this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.value=t.value,this.viewProps=t.viewProps,this.foldable_=k.create(t.expanded),this.swatchC_=new Bt(e,{value:this.value,viewProps:this.viewProps});const r=this.swatchC_.view.buttonElement;r.addEventListener("blur",this.onButtonBlur_),r.addEventListener("click",this.onButtonClick_),this.textC_=new B(e,{parser:t.parser,props:d.fromObject({formatter:t.formatter}),value:this.value,viewProps:this.viewProps}),this.view=new Me(e,{foldable:this.foldable_,pickerLayout:t.pickerLayout}),this.view.swatchElement.appendChild(this.swatchC_.view.element),this.view.textElement.appendChild(this.textC_.view.element),this.popC_="popup"===t.pickerLayout?new j(e,{viewProps:this.viewProps}):null;const n=new jt(e,{colorType:t.colorType,supportsAlpha:t.supportsAlpha,value:this.value,viewProps:this.viewProps});n.view.allFocusableElements.forEach(e=>{e.addEventListener("blur",this.onPopupChildBlur_),e.addEventListener("keydown",this.onPopupChildKeydown_)}),this.pickerC_=n,this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(n.view.element),oe({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:e=>e.rawValue,backward:(e,t)=>t.rawValue})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),P(this.foldable_,this.view.pickerElement))}get textController(){return this.textC_}onButtonBlur_(e){if(!this.popC_)return;const t=this.view.element,r=e.relatedTarget;r&&t.contains(r)||(this.popC_.shows.rawValue=!1)}onButtonClick_(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.view.allFocusableElements[0].focus()}onPopupChildBlur_(e){if(!this.popC_)return;const t=this.popC_.view.element,r=C(e);r&&t.contains(r)||r&&r===this.swatchC_.view.buttonElement&&!w(t.ownerDocument)||(this.popC_.shows.rawValue=!1)}onPopupChildKeydown_(e){this.popC_?"Escape"===e.key&&(this.popC_.shows.rawValue=!1):this.view.pickerElement&&"Escape"===e.key&&this.swatchC_.view.buttonElement.focus()}}function zt(e){return Te(e.getComponents("rgb")).reduce((e,t)=>e<<8|255&Math.floor(t),0)}function Ut(e){return e.getComponents("rgb").reduce((e,t,r)=>e<<8|255&Math.floor(3===r?255*t:t),0)>>>0}function Nt(e){return"number"!=typeof e?Oe.black():new Oe([(t=e)>>16&255,t>>8&255,255&t],"rgb");var t}function qt(e){return"number"!=typeof e?Oe.black():new Oe([(t=e)>>24&255,t>>16&255,t>>8&255,pe(255&t,0,255,0,1)],"rgb");var t}function Ht(e){var t;return!(!(null==e?void 0:e.alpha)&&!(null===(t=null==e?void 0:e.color)||void 0===t?void 0:t.alpha))}function Kt(e){return e?e=>ft(e,"0x"):e=>ct(e,"0x")}Oe.equals;function Gt(e,t){return r=>e?bt(r,t):vt(r,t)}Oe.equals,Oe.equals;class Wt{constructor(e){this.components=e.components,this.asm_=e.assembly}constrain(e){const t=this.asm_.toComponents(e).map((e,t)=>{var r,n;return null!==(n=null===(r=this.components[t])||void 0===r?void 0:r.constrain(e))&&void 0!==n?n:e});return this.asm_.fromComponents(t)}}const Yt=o("pndtxt");class Qt{constructor(e,t){this.textViews=t.textViews,this.element=e.createElement("div"),this.element.classList.add(Yt()),this.textViews.forEach(t=>{const r=e.createElement("div");r.classList.add(Yt("a")),r.appendChild(t.element),this.element.appendChild(r)})}}class Xt{constructor(e,t){this.value=t.value,this.viewProps=t.viewProps,this.acs_=t.axes.map((r,n)=>function(e,t,r){return new ye(e,{arrayPosition:0===r?"fst":r===t.axes.length-1?"lst":"mid",baseStep:t.axes[r].baseStep,parser:t.parser,props:t.axes[r].textProps,value:p(0,{constraint:t.axes[r].constraint}),viewProps:t.viewProps})}(e,t,n)),this.acs_.forEach((e,r)=>{oe({primary:this.value,secondary:e.value,forward:e=>t.assembly.toComponents(e.rawValue)[r],backward:(e,n)=>{const i=t.assembly.toComponents(e.rawValue);return i[r]=n.rawValue,t.assembly.fromComponents(i)}})}),this.view=new Qt(e,{textViews:this.acs_.map(e=>e.view)})}}function Jt(e,r){return"step"in e&&!t(e.step)?new D(e.step,r):null}function Zt(e){return t(e.max)||t(e.min)?t(e.max)&&t(e.min)?null:new V({max:e.max,min:e.min}):new $({max:e.max,min:e.min})}class er{constructor(e=0,t=0){this.x=e,this.y=t}getComponents(){return[this.x,this.y]}static isObject(e){if(t(e))return!1;const r=e.x,n=e.y;return"number"==typeof r&&"number"==typeof n}static equals(e,t){return e.x===t.x&&e.y===t.y}toObject(){return{x:this.x,y:this.y}}}const tr={toComponents:e=>e.getComponents(),fromComponents:e=>new er(...e)},rr=o("p2d");class nr{constructor(e,t){this.element=e.createElement("div"),this.element.classList.add(rr()),t.viewProps.bindClassModifiers(this.element),u(t.expanded,c(this.element,rr(void 0,"expanded")));const r=e.createElement("div");r.classList.add(rr("h")),this.element.appendChild(r);const n=e.createElement("button");n.classList.add(rr("b")),n.appendChild(E(e,"p2dpad")),t.viewProps.bindDisabled(n),r.appendChild(n),this.buttonElement=n;const i=e.createElement("div");if(i.classList.add(rr("t")),r.appendChild(i),this.textElement=i,"inline"===t.pickerLayout){const t=e.createElement("div");t.classList.add(rr("p")),this.element.appendChild(t),this.pickerElement=t}else this.pickerElement=null}}const ir=o("p2dp");class ar{constructor(e,t){this.onFoldableChange_=this.onFoldableChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.invertsY_=t.invertsY,this.maxValue_=t.maxValue,this.element=e.createElement("div"),this.element.classList.add(ir()),"popup"===t.layout&&this.element.classList.add(ir(void 0,"p")),t.viewProps.bindClassModifiers(this.element);const r=e.createElement("div");r.classList.add(ir("p")),t.viewProps.bindTabIndex(r),this.element.appendChild(r),this.padElement=r;const n=e.createElementNS(y,"svg");n.classList.add(ir("g")),this.padElement.appendChild(n),this.svgElem_=n;const i=e.createElementNS(y,"line");i.classList.add(ir("ax")),i.setAttributeNS(null,"x1","0"),i.setAttributeNS(null,"y1","50%"),i.setAttributeNS(null,"x2","100%"),i.setAttributeNS(null,"y2","50%"),this.svgElem_.appendChild(i);const a=e.createElementNS(y,"line");a.classList.add(ir("ax")),a.setAttributeNS(null,"x1","50%"),a.setAttributeNS(null,"y1","0"),a.setAttributeNS(null,"x2","50%"),a.setAttributeNS(null,"y2","100%"),this.svgElem_.appendChild(a);const o=e.createElementNS(y,"line");o.classList.add(ir("l")),o.setAttributeNS(null,"x1","50%"),o.setAttributeNS(null,"y1","50%"),this.svgElem_.appendChild(o),this.lineElem_=o;const s=e.createElement("div");s.classList.add(ir("m")),this.padElement.appendChild(s),this.markerElem_=s,t.value.emitter.on("change",this.onValueChange_),this.value=t.value,this.update_()}get allFocusableElements(){return[this.padElement]}update_(){const[e,t]=this.value.rawValue.getComponents(),r=this.maxValue_,n=pe(e,-r,+r,0,100),i=pe(t,-r,+r,0,100),a=this.invertsY_?100-i:i;this.lineElem_.setAttributeNS(null,"x2",n+"%"),this.lineElem_.setAttributeNS(null,"y2",a+"%"),this.markerElem_.style.left=n+"%",this.markerElem_.style.top=a+"%"}onValueChange_(){this.update_()}onFoldableChange_(){this.update_()}}function or(e,t,r){return[se(t[0],le(e)),se(t[1],ue(e))*(r?1:-1)]}class sr{constructor(e,t){this.onPadKeyDown_=this.onPadKeyDown_.bind(this),this.onPadKeyUp_=this.onPadKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=t.value,this.viewProps=t.viewProps,this.baseSteps_=t.baseSteps,this.maxValue_=t.maxValue,this.invertsY_=t.invertsY,this.view=new ar(e,{invertsY:this.invertsY_,layout:t.layout,maxValue:this.maxValue_,value:this.value,viewProps:this.viewProps}),this.ptHandler_=new he(this.view.padElement),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.padElement.addEventListener("keydown",this.onPadKeyDown_),this.view.padElement.addEventListener("keyup",this.onPadKeyUp_)}handlePointerEvent_(e,t){if(!e.point)return;const r=this.maxValue_,n=pe(e.point.x,0,e.bounds.width,-r,+r),i=pe(this.invertsY_?e.bounds.height-e.point.y:e.point.y,0,e.bounds.height,-r,+r);this.value.setRawValue(new er(n,i),t)}onPointerDown_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onPadKeyDown_(e){ce(e.key)&&e.preventDefault();const[t,r]=or(e,this.baseSteps_,this.invertsY_);0===t&&0===r||this.value.setRawValue(new er(this.value.rawValue.x+t,this.value.rawValue.y+r),{forceEmit:!1,last:!1})}onPadKeyUp_(e){const[t,r]=or(e,this.baseSteps_,this.invertsY_);0===t&&0===r||this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}class ur{constructor(e,t){var r,n;this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.onPadButtonBlur_=this.onPadButtonBlur_.bind(this),this.onPadButtonClick_=this.onPadButtonClick_.bind(this),this.value=t.value,this.viewProps=t.viewProps,this.foldable_=k.create(t.expanded),this.popC_="popup"===t.pickerLayout?new j(e,{viewProps:this.viewProps}):null;const i=new sr(e,{baseSteps:[t.axes[0].baseStep,t.axes[1].baseStep],invertsY:t.invertsY,layout:t.pickerLayout,maxValue:t.maxValue,value:this.value,viewProps:this.viewProps});i.view.allFocusableElements.forEach(e=>{e.addEventListener("blur",this.onPopupChildBlur_),e.addEventListener("keydown",this.onPopupChildKeydown_)}),this.pickerC_=i,this.textC_=new Xt(e,{assembly:tr,axes:t.axes,parser:t.parser,value:this.value,viewProps:this.viewProps}),this.view=new nr(e,{expanded:this.foldable_.value("expanded"),pickerLayout:t.pickerLayout,viewProps:this.viewProps}),this.view.textElement.appendChild(this.textC_.view.element),null===(r=this.view.buttonElement)||void 0===r||r.addEventListener("blur",this.onPadButtonBlur_),null===(n=this.view.buttonElement)||void 0===n||n.addEventListener("click",this.onPadButtonClick_),this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(this.pickerC_.view.element),oe({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:e=>e.rawValue,backward:(e,t)=>t.rawValue})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),P(this.foldable_,this.view.pickerElement))}onPadButtonBlur_(e){if(!this.popC_)return;const t=this.view.element,r=e.relatedTarget;r&&t.contains(r)||(this.popC_.shows.rawValue=!1)}onPadButtonClick_(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.view.allFocusableElements[0].focus()}onPopupChildBlur_(e){if(!this.popC_)return;const t=this.popC_.view.element,r=C(e);r&&t.contains(r)||r&&r===this.view.buttonElement&&!w(t.ownerDocument)||(this.popC_.shows.rawValue=!1)}onPopupChildKeydown_(e){this.popC_?"Escape"===e.key&&(this.popC_.shows.rawValue=!1):this.view.pickerElement&&"Escape"===e.key&&this.view.buttonElement.focus()}}class lr{constructor(e=0,t=0,r=0){this.x=e,this.y=t,this.z=r}getComponents(){return[this.x,this.y,this.z]}static isObject(e){if(t(e))return!1;const r=e.x,n=e.y,i=e.z;return"number"==typeof r&&"number"==typeof n&&"number"==typeof i}static equals(e,t){return e.x===t.x&&e.y===t.y&&e.z===t.z}toObject(){return{x:this.x,y:this.y,z:this.z}}}const cr={toComponents:e=>e.getComponents(),fromComponents:e=>new lr(...e)};function fr(e,t){return{baseStep:Ae(t),constraint:t,textProps:d.fromObject({draggingScale:Ce(t,e),formatter:ne(Ee(t,e))})}}lr.equals;class hr{constructor(e=0,t=0,r=0,n=0){this.x=e,this.y=t,this.z=r,this.w=n}getComponents(){return[this.x,this.y,this.z,this.w]}static isObject(e){if(t(e))return!1;const r=e.x,n=e.y,i=e.z,a=e.w;return"number"==typeof r&&"number"==typeof n&&"number"==typeof i&&"number"==typeof a}static equals(e,t){return e.x===t.x&&e.y===t.y&&e.z===t.z&&e.w===t.w}toObject(){return{x:this.x,y:this.y,z:this.z,w:this.w}}}const pr={toComponents:e=>e.getComponents(),fromComponents:e=>new hr(...e)};hr.equals,o("mll");o("sgl");o("grl");function dr(e,t){if(!e)return;const r=[],n=Jt(e,t);n&&r.push(n);const i=Zt(e);return i&&r.push(i),new T(r)}function mr(e,r){const[n,i]=e?function(e){const t=S(e,$);if(t)return[t.values.get("min"),t.values.get("max")];const r=S(e,V);return r?[r.minValue,r.maxValue]:[void 0,void 0]}(e):[];if(!t(n)||!t(i))return Math.max(Math.abs(null!=n?n:0),Math.abs(null!=i?i:0));const a=Ae(e);return Math.max(10*Math.abs(a),10*Math.abs(r))}function vr(e,t){const r=t instanceof Wt?t.components[0]:void 0,n=t instanceof Wt?t.components[1]:void 0,i=mr(r,e.x),a=mr(n,e.y);return Math.max(i,a)}function gr(e,t){return{baseStep:Ae(t),constraint:t,textProps:d.fromObject({draggingScale:Ce(t,e),formatter:ne(Ee(t,e))})}}function br(e){if(!("y"in e))return!1;const t=e.y;return!!t&&"inverted"in t&&!!t.inverted}er.equals;new class{constructor(e){const[t,r]=e.split("-"),n=t.split(".");this.major=parseInt(n[0],10),this.minor=parseInt(n[1],10),this.patch=parseInt(n[2],10),this.prerelease=null!=r?r:null}toString(){const e=[this.major,this.minor,this.patch].join(".");return null!==this.prerelease?[e,this.prerelease].join("-"):e}}("3.1.7");Object.defineProperty(e,"__esModule",{value:!0})},"object"==typeof _$tweakpane_84.exports?factory(_$tweakpane_84.exports):"function"==typeof define&&define.amd?define(["exports"],factory):factory((__global_84="undefined"!=typeof globalThis?globalThis:__global_84||self).Tweakpane={}),_$tweakpane_84=_$tweakpane_84.exports;var _$multiline_1={};const{shuffle:shuffle,shuffleLCD:shuffleLCD,directions:__directions_1,animations:__animations_1}=_$txtShuffle_2,{split:split}=_$js_12;let elPreset,canvas,context,lines=[],linesShuffle=[],idxPreset=-1,__text_1="We chase misprinted lies\nWe face the path of time\nAnd yet I fight, and yet I fight\nThis battle all alone\nNo one to cry to\nNo place to call home";const presets=[{fn:"shuffle",glyphs:"_"},{fn:"shuffle"},{fn:"shuffle",glyphs:"\u2582\u2584\u2586",fps:40},{fn:"shuffle",glyphs:"weruoaszxcvnm",direction:__directions_1.RANDOM},{fn:"shuffleLCD",fps:40}],setup=()=>{elPreset=document.querySelector(".preset"),canvas=document.querySelector("canvas"),(context=canvas.getContext("2d")).font="48px monospace",window.addEventListener("resize",resize),canvas.addEventListener("click",onCanvasClick),resize(),animate(),onCanvasClick()},draw=()=>{context.fillStyle="#eee",context.fillRect(0,0,canvas.width,canvas.height),context.fillStyle="black",context.font="48px monospace",context.textBaseline="top";let e=200;linesShuffle.forEach(t=>{context.fillText(t,20,e),e+=60})},playShuffle=()=>{const preset=presets[idxPreset],fn=eval(preset.fn);lines.forEach((e,t)=>{fn({text:e,delay:.2*t,fps:preset.fps,glyphs:preset.glyphs,direction:preset.direction,onUpdate:e=>{linesShuffle[t]=e}})})},animate=()=>{requestAnimationFrame(animate),draw()},resize=()=>{canvas.width=window.innerWidth,canvas.height=window.innerHeight,lines=split(context,__text_1,context.font,canvas.width)},onCanvasClick=()=>{idxPreset++;let e="Example "+(idxPreset%=presets.length);const t=presets[idxPreset];for(const r in t)e=`${e} ${r}: ${t[r]}`;elPreset.innerText=e,playShuffle()};setup()}();