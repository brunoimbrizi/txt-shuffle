!function(){"use strict";var _$defined_7=function(){for(var t=0;t<arguments.length;t++)if(void 0!==arguments[t])return arguments[t]},_$wrap_4=function(t,e,n){if("number"!=typeof e||"number"!=typeof n)throw new TypeError('Must specify "to" and "from" arguments as numbers');if(e>n){var i=e;e=n,n=i}var s=n-e;return 0===s?n:t-s*Math.floor((t-e)/s)},EPSILON=Number.EPSILON;function clamp(t,e,n){return e<n?t<e?e:t>n?n:t:t<n?n:t>e?e:t}function lerp(t,e,n){return t*(1-n)+e*n}function inverseLerp(t,e,n){return Math.abs(t-e)<EPSILON?0:(n-t)/(e-t)}function toFinite(t,e){return e=_$defined_7(e,0),"number"==typeof t&&isFinite(t)?t:e}function expandVector(t){if("number"!=typeof t)throw new TypeError("Expected dims argument");return function(e,n){var i;n=_$defined_7(n,0),null==e?i=n:"number"==typeof e&&isFinite(e)&&(i=e);var s,o=[];if(null==i)for(s=0;s<t;s++)o[s]=toFinite(e[s],n);else for(s=0;s<t;s++)o[s]=i;return o}}function lerpArray(t,e,n,i){if(i=i||[],t.length!==e.length)throw new TypeError("min and max array are expected to have the same length");for(var s=0;s<t.length;s++)i[s]=lerp(t[s],e[s],n);return i}function newArray(t,e){if("number"!=typeof(t=_$defined_7(t,0)))throw new TypeError("Expected n argument to be a number");for(var n=[],i=0;i<t;i++)n.push(e);return n}function mod(t,e){return(t%e+e)%e}function damp(t,e,n,i){return lerp(t,e,1-Math.exp(-n*i))}var _$math_5={mod:mod,clamp01:function(t){return clamp(t,0,1)}},_$seedRandom_40={};(function(t){(function(){var e=[],n=void 0===t?window:t,i=Math.pow(256,6),s=Math.pow(2,52),o=2*s,r=Math.random;function a(t){var e,n=t.length,i=this,s=0,o=i.i=i.j=0,r=i.S=[];for(n||(t=[n++]);s<256;)r[s]=s++;for(s=0;s<256;s++)r[s]=r[o=255&o+t[s%n]+(e=r[s])],r[o]=e;(i.g=function(t){for(var e,n=0,s=i.i,o=i.j,r=i.S;t--;)e=r[s=255&s+1],n=256*n+r[255&(r[s]=r[o=255&o+e])+(r[o]=e)];return i.i=s,i.j=o,n})(256)}function l(t,e){for(var n,i=t+"",s=0;s<i.length;)e[255&s]=255&(n^=19*e[255&s])+i.charCodeAt(s++);return u(e)}function u(t){return String.fromCharCode.apply(0,t)}(_$seedRandom_40=function(t,r){if(r&&!0===r.global)return r.global=!1,Math.random=_$seedRandom_40(t,r),r.global=!0,Math.random;var h=[],c=(l(function t(e,n){var i,s=[],o=(typeof e)[0];if(n&&"o"==o)for(i in e)try{s.push(t(e[i],n-1))}catch(r){}return s.length?s:"s"==o?e:e+"\0"}(r&&r.entropy?[t,u(e)]:0 in arguments?t:function(t){try{return n.crypto.getRandomValues(t=new Uint8Array(256)),u(t)}catch(i){return[+new Date,n,n.navigator&&n.navigator.plugins,n.screen,u(e)]}}(),3),h),new a(h));return l(u(c.S),e),function(){for(var t=c.g(6),e=i,n=0;t<s;)t=256*(t+n),e*=256,n=c.g(1);for(;t>=o;)t/=2,e/=2,n>>>=1;return(t+n)/e}}).resetGlobal=function(){Math.random=r},l(Math.random(),e)}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var _$simplexNoise_41={exports:{}};!function(){var t=.5*(Math.sqrt(3)-1),e=(3-Math.sqrt(3))/6,n=(Math.sqrt(5)-1)/4,i=(5-Math.sqrt(5))/20;function s(t){var e;e="function"==typeof t?t:t?function(){var t,e=0,n=0,i=0,s=1,o=(t=4022871197,function(e){e=e.toString();for(var n=0;n<e.length;n++){var i=.02519603282416938*(t+=e.charCodeAt(n));i-=t=i>>>0,t=(i*=t)>>>0,t+=4294967296*(i-=t)}return 2.3283064365386963e-10*(t>>>0)});e=o(" "),n=o(" "),i=o(" ");for(var r=0;r<arguments.length;r++)(e-=o(arguments[r]))<0&&(e+=1),(n-=o(arguments[r]))<0&&(n+=1),(i-=o(arguments[r]))<0&&(i+=1);return o=null,function(){var t=2091639*e+2.3283064365386963e-10*s;return e=n,n=i,i=t-(s=0|t)}}(t):Math.random,this.p=o(e),this.perm=new Uint8Array(512),this.permMod12=new Uint8Array(512);for(var n=0;n<512;n++)this.perm[n]=this.p[255&n],this.permMod12[n]=this.perm[n]%12}function o(t){var e,n=new Uint8Array(256);for(e=0;e<256;e++)n[e]=e;for(e=0;e<255;e++){var i=e+~~(t()*(256-e)),s=n[e];n[e]=n[i],n[i]=s}return n}s.prototype={grad3:new Float32Array([1,1,0,-1,1,0,1,-1,0,-1,-1,0,1,0,1,-1,0,1,1,0,-1,-1,0,-1,0,1,1,0,-1,1,0,1,-1,0,-1,-1]),grad4:new Float32Array([0,1,1,1,0,1,1,-1,0,1,-1,1,0,1,-1,-1,0,-1,1,1,0,-1,1,-1,0,-1,-1,1,0,-1,-1,-1,1,0,1,1,1,0,1,-1,1,0,-1,1,1,0,-1,-1,-1,0,1,1,-1,0,1,-1,-1,0,-1,1,-1,0,-1,-1,1,1,0,1,1,1,0,-1,1,-1,0,1,1,-1,0,-1,-1,1,0,1,-1,1,0,-1,-1,-1,0,1,-1,-1,0,-1,1,1,1,0,1,1,-1,0,1,-1,1,0,1,-1,-1,0,-1,1,1,0,-1,1,-1,0,-1,-1,1,0,-1,-1,-1,0]),noise2D:function(n,i){var s,o,r=this.permMod12,a=this.perm,l=this.grad3,u=0,h=0,c=0,p=(n+i)*t,d=Math.floor(n+p),m=Math.floor(i+p),f=(d+m)*e,v=n-(d-f),_=i-(m-f);v>_?(s=1,o=0):(s=0,o=1);var w=v-s+e,g=_-o+e,b=v-1+2*e,y=_-1+2*e,x=255&d,E=255&m,C=.5-v*v-_*_;if(C>=0){var P=3*r[x+a[E]];u=(C*=C)*C*(l[P]*v+l[P+1]*_)}var M=.5-w*w-g*g;if(M>=0){var V=3*r[x+s+a[E+o]];h=(M*=M)*M*(l[V]*w+l[V+1]*g)}var $=.5-b*b-y*y;if($>=0){var L=3*r[x+1+a[E+1]];c=($*=$)*$*(l[L]*b+l[L+1]*y)}return 70*(u+h+c)},noise3D:function(t,e,n){var i,s,o,r,a,l,u,h,c,p,d=this.permMod12,m=this.perm,f=this.grad3,v=(t+e+n)*(1/3),_=Math.floor(t+v),w=Math.floor(e+v),g=Math.floor(n+v),b=(_+w+g)*(1/6),y=t-(_-b),x=e-(w-b),E=n-(g-b);y>=x?x>=E?(a=1,l=0,u=0,h=1,c=1,p=0):y>=E?(a=1,l=0,u=0,h=1,c=0,p=1):(a=0,l=0,u=1,h=1,c=0,p=1):x<E?(a=0,l=0,u=1,h=0,c=1,p=1):y<E?(a=0,l=1,u=0,h=0,c=1,p=1):(a=0,l=1,u=0,h=1,c=1,p=0);var C=y-a+1/6,P=x-l+1/6,M=E-u+1/6,V=y-h+1/6*2,$=x-c+1/6*2,L=E-p+1/6*2,k=y-1+.5,D=x-1+.5,S=E-1+.5,I=255&_,T=255&w,F=255&g,N=.6-y*y-x*x-E*E;if(N<0)i=0;else{var A=3*d[I+m[T+m[F]]];i=(N*=N)*N*(f[A]*y+f[A+1]*x+f[A+2]*E)}var K=.6-C*C-P*P-M*M;if(K<0)s=0;else{var O=3*d[I+a+m[T+l+m[F+u]]];s=(K*=K)*K*(f[O]*C+f[O+1]*P+f[O+2]*M)}var j=.6-V*V-$*$-L*L;if(j<0)o=0;else{var R=3*d[I+h+m[T+c+m[F+p]]];o=(j*=j)*j*(f[R]*V+f[R+1]*$+f[R+2]*L)}var U=.6-k*k-D*D-S*S;if(U<0)r=0;else{var q=3*d[I+1+m[T+1+m[F+1]]];r=(U*=U)*U*(f[q]*k+f[q+1]*D+f[q+2]*S)}return 32*(i+s+o+r)},noise4D:function(t,e,s,o){var r,a,l,u,h,c,p,d,m,f,v,_,w,g,b,y,x,E=this.perm,C=this.grad4,P=(t+e+s+o)*n,M=Math.floor(t+P),V=Math.floor(e+P),$=Math.floor(s+P),L=Math.floor(o+P),k=(M+V+$+L)*i,D=t-(M-k),S=e-(V-k),I=s-($-k),T=o-(L-k),F=0,N=0,A=0,K=0;D>S?F++:N++,D>I?F++:A++,D>T?F++:K++,S>I?N++:A++,S>T?N++:K++,I>T?A++:K++;var O=D-(c=F>=3?1:0)+i,j=S-(p=N>=3?1:0)+i,R=I-(d=A>=3?1:0)+i,U=T-(m=K>=3?1:0)+i,q=D-(f=F>=2?1:0)+2*i,H=S-(v=N>=2?1:0)+2*i,B=I-(_=A>=2?1:0)+2*i,z=T-(w=K>=2?1:0)+2*i,Y=D-(g=F>=1?1:0)+3*i,W=S-(b=N>=1?1:0)+3*i,G=I-(y=A>=1?1:0)+3*i,X=T-(x=K>=1?1:0)+3*i,J=D-1+4*i,Z=S-1+4*i,Q=I-1+4*i,tt=T-1+4*i,et=255&M,nt=255&V,it=255&$,st=255&L,ot=.6-D*D-S*S-I*I-T*T;if(ot<0)r=0;else{var rt=E[et+E[nt+E[it+E[st]]]]%32*4;r=(ot*=ot)*ot*(C[rt]*D+C[rt+1]*S+C[rt+2]*I+C[rt+3]*T)}var at=.6-O*O-j*j-R*R-U*U;if(at<0)a=0;else{var lt=E[et+c+E[nt+p+E[it+d+E[st+m]]]]%32*4;a=(at*=at)*at*(C[lt]*O+C[lt+1]*j+C[lt+2]*R+C[lt+3]*U)}var ut=.6-q*q-H*H-B*B-z*z;if(ut<0)l=0;else{var ht=E[et+f+E[nt+v+E[it+_+E[st+w]]]]%32*4;l=(ut*=ut)*ut*(C[ht]*q+C[ht+1]*H+C[ht+2]*B+C[ht+3]*z)}var ct=.6-Y*Y-W*W-G*G-X*X;if(ct<0)u=0;else{var pt=E[et+g+E[nt+b+E[it+y+E[st+x]]]]%32*4;u=(ct*=ct)*ct*(C[pt]*Y+C[pt+1]*W+C[pt+2]*G+C[pt+3]*X)}var dt=.6-J*J-Z*Z-Q*Q-tt*tt;if(dt<0)h=0;else{var mt=E[et+1+E[nt+1+E[it+1+E[st+1]]]]%32*4;h=(dt*=dt)*dt*(C[mt]*J+C[mt+1]*Z+C[mt+2]*Q+C[mt+3]*tt)}return 27*(r+a+l+u+h)}},s._buildPermutationTable=o,"undefined"!=typeof define&&define.amd&&define((function(){return s})),void 0!==_$simplexNoise_41.exports?_$simplexNoise_41.exports.SimplexNoise=s:"undefined"!=typeof window&&(window.SimplexNoise=s),_$simplexNoise_41.exports=s}(),_$simplexNoise_41=_$simplexNoise_41.exports;var _$random_6=function t(e){e=_$defined_7(e,null);var n,i,s,o=Math.random,r=null,a=!1;return l(e),{value:u,createRandom:function(e){return t(e)},setSeed:l,getSeed:function(){return n},getRandomSeed:function(){return String(Math.floor(1e6*Math.random()))},valueNonZero:function(){for(var t=0;0===t;)t=u();return t},permuteNoise:function(){s=h()},noise1D:function(t,e,n){if(!isFinite(t))throw new TypeError("x component for noise() must be finite");return e=_$defined_7(e,1),(n=_$defined_7(n,1))*s.noise2D(t*e,0)},noise2D:function(t,e,n,i){if(!isFinite(t))throw new TypeError("x component for noise() must be finite");if(!isFinite(e))throw new TypeError("y component for noise() must be finite");return n=_$defined_7(n,1),(i=_$defined_7(i,1))*s.noise2D(t*n,e*n)},noise3D:function(t,e,n,i,o){if(!isFinite(t))throw new TypeError("x component for noise() must be finite");if(!isFinite(e))throw new TypeError("y component for noise() must be finite");if(!isFinite(n))throw new TypeError("z component for noise() must be finite");return i=_$defined_7(i,1),(o=_$defined_7(o,1))*s.noise3D(t*i,e*i,n*i)},noise4D:function(t,e,n,i,o,r){if(!isFinite(t))throw new TypeError("x component for noise() must be finite");if(!isFinite(e))throw new TypeError("y component for noise() must be finite");if(!isFinite(n))throw new TypeError("z component for noise() must be finite");if(!isFinite(i))throw new TypeError("w component for noise() must be finite");return o=_$defined_7(o,1),(r=_$defined_7(r,1))*s.noise4D(t*o,e*o,n*o,i*o)},sign:function(){return c()?1:-1},boolean:c,chance:function(t){if("number"!=typeof(t=_$defined_7(t,.5)))throw new TypeError("expected n to be a number");return u()<t},range:p,rangeFloor:d,pick:function(t){return 0===t.length?void 0:t[d(0,t.length)]},shuffle:function(t){if(!Array.isArray(t))throw new TypeError("Expected Array, got "+typeof t);for(var e,n,i=t.length,s=t.slice();i;)e=Math.floor(u()*i--),n=s[i],s[i]=s[e],s[e]=n;return s},onCircle:m,insideCircle:function(t,e){t=_$defined_7(t,1),m(1,e=e||[]);var n=t*Math.sqrt(u());return e[0]*=n,e[1]*=n,e},onSphere:function(t,e){t=_$defined_7(t,1),e=e||[];var n=u()*Math.PI*2,i=2*u()-1,s=n,o=Math.acos(i);return e[0]=t*Math.sin(o)*Math.cos(s),e[1]=t*Math.sin(o)*Math.sin(s),e[2]=t*Math.cos(o),e},insideSphere:function(t,e){t=_$defined_7(t,1),e=e||[];var n=u()*Math.PI*2,i=2*u()-1,s=u(),o=n,r=Math.acos(i),a=t*Math.cbrt(s);return e[0]=a*Math.sin(r)*Math.cos(o),e[1]=a*Math.sin(r)*Math.sin(o),e[2]=a*Math.cos(r),e},quaternion:function(t){t=t||[];var e=u(),n=u(),i=u(),s=Math.sqrt(1-e),o=Math.sqrt(e),r=2*Math.PI*n,a=2*Math.PI*i,l=Math.sin(r)*s,h=Math.cos(r)*s,c=Math.sin(a)*o,p=Math.cos(a)*o;return t[0]=l,t[1]=h,t[2]=c,t[3]=p,t},weighted:v,weightedSet:function(t){return 0===(t=t||[]).length?null:t[f(t)].value},weightedSetIndex:f,gaussian:function(t,e){if(t=_$defined_7(t,0),e=_$defined_7(e,1),a){a=!1;var n=r;return r=null,t+e*n}var i=0,s=0,o=0;do{o=(i=2*u()-1)*i+(s=2*u()-1)*s}while(o>=1||0===o);var l=Math.sqrt(-2*Math.log(o)/o);return r=s*l,a=!0,t+e*(i*l)}};function l(t,e){"number"==typeof t||"string"==typeof t?i=_$seedRandom_40(n=t,e):(n=void 0,i=o),s=h(),r=null,a=!1}function u(){return i()}function h(){return new _$simplexNoise_41(i)}function c(){return u()>.5}function p(t,e){if(void 0===e&&(e=t,t=0),"number"!=typeof t||"number"!=typeof e)throw new TypeError("Expected all arguments to be numbers");return u()*(e-t)+t}function d(t,e){if(void 0===e&&(e=t,t=0),"number"!=typeof t||"number"!=typeof e)throw new TypeError("Expected all arguments to be numbers");return Math.floor(p(t,e))}function m(t,e){t=_$defined_7(t,1),e=e||[];var n=2*u()*Math.PI;return e[0]=t*Math.cos(n),e[1]=t*Math.sin(n),e}function f(t){return 0===(t=t||[]).length?-1:v(t.map((function(t){return t.weight})))}function v(t){if(0===(t=t||[]).length)return-1;var e,n=0;for(e=0;e<t.length;e++)n+=t[e];if(n<=0)throw new Error("Weights must sum to > 0");var i=u()*n;for(e=0;e<t.length;e++){if(i<t[e])return e;i-=t[e]}return 0}}(),_$quadInOut_28=function(t){return(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1)},_$quartOut_33=function(t){return Math.pow(t-1,3)*(1-t)+1},_$backInOut_8=function(t){var e=2.5949095;return(t*=2)<1?t*t*((e+1)*t-e)*.5:.5*((t-=2)*t*((e+1)*t+e)+2)},_$backIn_9=function(t){var e=1.70158;return t*t*((e+1)*t-e)},_$backOut_10=function(t){var e=1.70158;return--t*t*((e+1)*t+e)+1},_$bounceOut_13=function(t){var e=t*t;return t<4/11?7.5625*e:t<8/11?9.075*e-9.9*t+3.4:t<.9?4356/361*e-35442/1805*t+16061/1805:10.8*t*t-20.52*t+10.72},_$bounceInOut_11=function(t){return t<.5?.5*(1-_$bounceOut_13(1-2*t)):.5*_$bounceOut_13(2*t-1)+.5},_$bounceIn_12=function(t){return 1-_$bounceOut_13(1-t)},_$circInOut_14=function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},_$circIn_15=function(t){return 1-Math.sqrt(1-t*t)},_$circOut_16=function(t){return Math.sqrt(1- --t*t)},_$cubicInOut_17=function(t){return t<.5?4*t*t*t:.5*Math.pow(2*t-2,3)+1},_$cubicIn_18=function(t){return t*t*t},_$cubicOut_19=function(t){var e=t-1;return e*e*e+1},_$elasticInOut_20=function(t){return t<.5?.5*Math.sin(13*Math.PI/2*2*t)*Math.pow(2,10*(2*t-1)):.5*Math.sin(-13*Math.PI/2*(2*t-1+1))*Math.pow(2,-10*(2*t-1))+1},_$elasticIn_21=function(t){return Math.sin(13*t*Math.PI/2)*Math.pow(2,10*(t-1))},_$elasticOut_22=function(t){return Math.sin(-13*(t+1)*Math.PI/2)*Math.pow(2,-10*t)+1},_$expoInOut_23=function(t){return 0===t||1===t?t:t<.5?.5*Math.pow(2,20*t-10):-.5*Math.pow(2,10-20*t)+1},_$expoIn_24=function(t){return 0===t?t:Math.pow(2,10*(t-1))},_$expoOut_25=function(t){return 1===t?t:1-Math.pow(2,-10*t)},_$linear_27=function(t){return t},_$quadIn_29=function(t){return t*t},_$quadOut_30=function(t){return-t*(t-2)},_$quartInOut_31=function(t){return t<.5?8*Math.pow(t,4):-8*Math.pow(t-1,4)+1},_$quartIn_32=function(t){return Math.pow(t,4)},_$quintInOut_34=function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)},_$quintIn_35=function(t){return t*t*t*t*t},_$quintOut_36=function(t){return--t*t*t*t*t+1},_$sineInOut_37=function(t){return-.5*(Math.cos(Math.PI*t)-1)},_$sineIn_38=function(t){var e=Math.cos(t*Math.PI*.5);return Math.abs(e)<1e-14?1:1-e},_$sineOut_39=function(t){return Math.sin(t*Math.PI/2)},_$eases_26={quadInOut:_$quadInOut_28,quartOut:_$quartOut_33};const directions={RIGHT:"right",LEFT:"left",RANDOM:"random"},animations={SHOW:"show",HIDE:"hide",STAY:"stay"};var _$txtShuffle_2={animations:animations,directions:directions,shuffle:({text:t="",duration:e=1,delay:n=0,delayResolve:i=.2,fps:s=60,glyphs:o=" !#$&%()*+0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[]^_`abcdefghijklmnopqrstu\xfcvwxyz{|}~",animation:r=animations.SHOW,direction:a=directions.RIGHT,onUpdate:l=null,onComplete:u=null}={})=>{const h=o.split(""),c=t.split(""),p=1e3/s;let d,m,f,v,_,w,g,b,y,x=Date.now(),E=Date.now(),C=c.map((t,e)=>e);r==animations.HIDE&&(a==directions.LEFT?a=directions.RIGHT:a==directions.RIGHT&&(a=directions.LEFT)),a==directions.LEFT&&C.reverse(),a==directions.RANDOM&&(C=_$random_6.shuffle(C));const P=()=>{if(Date.now()-x<p)requestAnimationFrame(P);else{x=Date.now(),v="",g=.001*(x-E)/e,r==animations.HIDE&&(g=1-g),b=_$math_5.clamp01(g-n),b=_$eases_26.quartOut(b),y=_$math_5.clamp01(g-n-i),y*=1/(1-i),y=_$eases_26.quadInOut(y),d=Math.round(b*t.length),m=Math.round(y*t.length);for(let e=0;e<t.length;e++)w=C[e],f=c[e],w>=d&&r!=animations.STAY&&(f=" ")," "!=f&&w>=m&&(f=_$random_6.pick(h)),v=`${v}${f}`;(_=r==animations.HIDE?b<=0:b>=1)?v=r==animations.HIDE?"":t:requestAnimationFrame(P),l&&l(v),_&&u&&u(v)}};P()},shuffleLCD:({text:t="",delay:e=0,fps:n=60,glyphs:i=" '\"\u201c\u201d\u2018\u2019\xb9\xb2\xb3!#$&%()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstu\xfcvwxyz{|}~\xbd\xbc\xa1\xab\xbb\xd7\u2591\u2592\u2593\u2502\u2524\u2561\u2562\u2556\u2555\u2563\u2551\u2557\u255d\u255c\u255b\u2510\u2514\u2534\u252c\u251c\u2500\u253c\u255e\u255f\u255a\u2554\u2569\u2566\u2560\u2550\u256c\u2567\u2568\u2564\u2565\u2559\u2558\u2552\u2553\u256b\u256a\u2518\u250c",animation:s=animations.SHOW,stayFrames:o=25,onUpdate:r=null,onComplete:a=null}={})=>{const l=i.split(""),u=t.split(""),h=1e3/n;u.map((t,e)=>e),l.map((t,e)=>e);let c=u.map(t=>0),p=u.map(t=>l.findIndex(e=>e==t));s==animations.HIDE&&(c=p.concat()),s==animations.STAY&&(c=p.map(t=>_$math_5.mod(t-_$random_6.rangeFloor(5,o),l.length)));let d,m,f,v,_,w,g=Date.now(),b=Date.now(),y=0;const x=()=>{if(Date.now()-g<h)requestAnimationFrame(x);else{(g=Date.now())-b>1e3*e&&y++,m="",v=0;for(let e=0;e<t.length;e++)_=c[e],w=p[e],s==animations.SHOW&&(_!=w?e<y&&_++:v++),s==animations.HIDE&&(_>0?e<y&&_--:v++),s==animations.STAY&&(_!=w?_++:v++),d=l[_%l.length],c[e]=_%l.length,m=`${m}${d}`;(f=v>=t.length)?m=s==animations.HIDE?"":t:requestAnimationFrame(x),r&&r(m),f&&a&&a(m)}};x()}},_$js_3={};Object.defineProperty(_$js_3,"__esModule",{value:!0}),_$js_3.split=function(t,e,n,i,s,o){let r=`${e}_${n}_${i}px`,a=d.get(r);if(void 0!==a)return a;if(i<=0)return[];let l=[],u=e.split("\n"),h=b.get(n),c=void 0===h?e.length:i/h.size*1.5,m=s&&void 0!==h&&h.count>2e4;for(let d of u){let e=p(t,d.slice(0,Math.max(0,c)),n,m),s=Math.min(d.length,c);if(e<=i)l.push(d);else{for(;e>i;){let r=T(t,d,i,n,e,s,m,o),a=d.slice(0,Math.max(0,r));d=d.slice(a.length),l.push(a),e=p(t,d.slice(0,Math.max(0,c)),n,m),s=Math.min(d.length,c)}e>0&&l.push(d)}}return l=l.map((t,e)=>0===e?t.trimEnd():t.trim()),d.set(r,l),d.size>500&&d.delete(d.keys().next().value),l};var d=new Map,b=new Map,__z_3=new Map;function p(t,e,n,i){var s,o;let r=b.get(n);if(i&&void 0!==r&&r.count>2e4){let i=__z_3.get(n);if(void 0===i&&(i=function(t,e){var n;let i=new Map,s=0;for(let l of"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890,.-+=?"){let e=t.measureText(l).width;i.set(l,e),s+=e}let o=s/i.size,r=(e/o+3)/4,a=i.keys();for(let l of a)i.set(l,(null!=(n=i.get(l))?n:o)*r);return i}(t,r.size),__z_3.set(n,i)),r.count>5e5){let t=0;for(let n of e)t+=null!=(s=i.get(n))?s:r.size;return 1.01*t}let o=t.measureText(e);return function(t,e,n,i,s){var o,r,a;let l=0,u={};for(let c of t)l+=null!=(o=n.get(c))?o:s,u[c]=(null!=(r=u[c])?r:0)+1;let h=e-l;for(let c of Object.keys(u)){let t=u[c],e=null!=(a=n.get(c))?a:s,o=e+h*(e*t/l)*i/t;n.set(c,o)}}(e,o.width,i,Math.max(.05,1-r.count/2e5),r.size),b.set(n,{count:r.count+e.length,size:r.size}),o.width}let a=t.measureText(e),l=a.width/e.length;if((null!=(o=null==r?void 0:r.count)?o:0)>2e4)return a.width;if(void 0===r)b.set(n,{count:e.length,size:l});else{let t=l-r.size,i=e.length/(r.count+e.length),s=r.size+t*i;b.set(n,{count:r.count+e.length,size:s})}return a.width}function T(t,e,n,i,s,o,r,a){if(e.length<=1)return e.length;if(s<n)return-1;let l=Math.floor(n/s*o),u=p(t,e.slice(0,Math.max(0,l)),i,r),h=null==a?void 0:a(e);if(u!==n)if(u<n){for(;u<n;)l++,u=p(t,e.slice(0,Math.max(0,l)),i,r);l--}else for(;u>n;){let n=void 0!==h?0:e.lastIndexOf(" ",l-1);n>0?l=n:l--,u=p(t,e.slice(0,Math.max(0,l)),i,r)}if(" "!==e[l]){let t=0;if(void 0===h)t=e.lastIndexOf(" ",l);else for(let e of h){if(e>l)break;t=e}t>0&&(l=t)}return l}var _$tweakpane_42={exports:{}},__global_42,factory;__global_42=void 0,factory=function(t){function e(t){return null==t}const n={alreadydisposed:()=>"View has been already disposed",invalidparams:t=>`Invalid parameters for '${t.name}'`,nomatchingcontroller:t=>`No matching controller for '${t.key}'`,nomatchingview:t=>`No matching view for '${JSON.stringify(t.params)}'`,notbindable:()=>"Value is not bindable",propertynotfound:t=>`Property '${t.name}' not found`,shouldneverhappen:()=>"This error should never happen"};class i{static alreadyDisposed(){return new i({type:"alreadydisposed"})}static notBindable(){return new i({type:"notbindable"})}static propertyNotFound(t){return new i({type:"propertynotfound",context:{name:t}})}static shouldNeverHappen(){return new i({type:"shouldneverhappen"})}constructor(t){var e;this.message=null!==(e=n[t.type](t.context))&&void 0!==e?e:"Unexpected error",this.name=this.constructor.name,this.stack=new Error(this.message).stack,this.type=t.type}}class s{constructor(){this.observers_={}}on(t,e){let n=this.observers_[t];return n||(n=this.observers_[t]=[]),n.push({handler:e}),this}off(t,e){const n=this.observers_[t];return n&&(this.observers_[t]=n.filter(t=>t.handler!==e)),this}emit(t,e){const n=this.observers_[t];n&&n.forEach(t=>{t.handler(e)})}}const o="tp";function r(t){return(e,n)=>[o,"-",t,"v",e?"_"+e:"",n?"-"+n:""].join("")}function a(t){return t.rawValue}function l(t,e){var n,i;t.emitter.on("change",(n=a,i=e,t=>i(n(t)))),e(t.rawValue)}function u(t,e,n){l(t.value(e),n)}function h(t,e){return n=>{!function(t,e,n){n?t.classList.add(e):t.classList.remove(e)}(t,e,n)}}r("btn");class c{constructor(t,e){var n;this.constraint_=null==e?void 0:e.constraint,this.equals_=null!==(n=null==e?void 0:e.equals)&&void 0!==n?n:(t,e)=>t===e,this.emitter=new s,this.rawValue_=t}get constraint(){return this.constraint_}get rawValue(){return this.rawValue_}set rawValue(t){this.setRawValue(t,{forceEmit:!1,last:!0})}setRawValue(t,e){const n=null!=e?e:{forceEmit:!1,last:!0},i=this.constraint_?this.constraint_.constrain(t):t,s=this.rawValue_;(!this.equals_(s,i)||n.forceEmit)&&(this.emitter.emit("beforechange",{sender:this}),this.rawValue_=i,this.emitter.emit("change",{options:n,previousRawValue:s,rawValue:i,sender:this}))}}class p{constructor(t){this.emitter=new s,this.value_=t}get rawValue(){return this.value_}set rawValue(t){this.setRawValue(t,{forceEmit:!1,last:!0})}setRawValue(t,e){const n=null!=e?e:{forceEmit:!1,last:!0},i=this.value_;(i!==t||n.forceEmit)&&(this.emitter.emit("beforechange",{sender:this}),this.value_=t,this.emitter.emit("change",{options:n,previousRawValue:i,rawValue:this.value_,sender:this}))}}function d(t,e){const n=null==e?void 0:e.constraint,i=null==e?void 0:e.equals;return n||i?new c(t,e):new p(t)}class m{constructor(t){this.emitter=new s,this.valMap_=t;for(const e in this.valMap_)this.valMap_[e].emitter.on("change",()=>{this.emitter.emit("change",{key:e,sender:this})})}static createCore(t){return Object.keys(t).reduce((e,n)=>Object.assign(e,{[n]:d(t[n])}),{})}static fromObject(t){const e=this.createCore(t);return new m(e)}get(t){return this.valMap_[t].rawValue}set(t,e){this.valMap_[t].rawValue=e}value(t){return this.valMap_[t]}}function f(t){return e=>n=>{if(!e&&void 0===n)return{succeeded:!1,value:void 0};if(e&&void 0===n)return{succeeded:!0,value:void 0};const i=t(n);return void 0!==i?{succeeded:!0,value:i}:{succeeded:!1,value:void 0}}}function v(t){return{custom:e=>f(e)(t),boolean:f(t=>"boolean"==typeof t?t:void 0)(t),number:f(t=>"number"==typeof t?t:void 0)(t),string:f(t=>"string"==typeof t?t:void 0)(t),function:f(t=>"function"==typeof t?t:void 0)(t),constant:e=>f(t=>t===e?e:void 0)(t),raw:f(t=>t)(t),object:e=>f(t=>{if(null!==(n=t)&&"object"==typeof n)return function(t,e){return Object.keys(e).reduce((n,i)=>{if(void 0===n)return;const s=(0,e[i])(t[i]);return s.succeeded?Object.assign(Object.assign({},n),{[i]:s.value}):void 0},{})}(t,e);var n})(t),array:e=>f(t=>{if(Array.isArray(t))return n=e,t.reduce((t,e)=>{if(void 0===t)return;const i=n(e);return i.succeeded&&void 0!==i.value?[...t,i.value]:void 0},[]);var n})(t)}}const _={optional:v(!0),required:v(!1)};function w(t,e){const n=_.required.object(e)(t);return n.succeeded?n.value:void 0}r("");r("");const g="http://www.w3.org/2000/svg";function b(t){t.offsetHeight}function y(t){return void 0!==t.ontouchstart}const x={check:'<path d="M2 8l4 4l8 -8"/>',dropdown:'<path d="M5 7h6l-3 3 z"/>',p2dpad:'<path d="M8 4v8"/><path d="M4 8h8"/><circle cx="12" cy="12" r="1.2"/>'};function E(t,e){const n=t.createElementNS(g,"svg");return n.innerHTML=x[e],n}function C(t){for(;t.children.length>0;)t.removeChild(t.children[0])}function P(t){return t.relatedTarget?t.relatedTarget:"explicitOriginalTarget"in t?t.explicitOriginalTarget:null}r("lbl");class M extends m{constructor(t){super(t)}static create(t){const e={completed:!0,expanded:t,expandedHeight:null,shouldFixHeight:!1,temporaryExpanded:null},n=m.createCore(e);return new M(n)}get styleExpanded(){var t;return null!==(t=this.get("temporaryExpanded"))&&void 0!==t?t:this.get("expanded")}get styleHeight(){if(!this.styleExpanded)return"0";const t=this.get("expandedHeight");return this.get("shouldFixHeight")&&!e(t)?t+"px":"auto"}bindExpandedClass(t,e){const n=()=>{this.styleExpanded?t.classList.add(e):t.classList.remove(e)};u(this,"expanded",n),u(this,"temporaryExpanded",n)}cleanUpTransition(){this.set("shouldFixHeight",!1),this.set("expandedHeight",null),this.set("completed",!0)}}function V(t,e){e.style.height=t.styleHeight}function $(t,n){t.value("expanded").emitter.on("beforechange",()=>{if(t.set("completed",!1),e(t.get("expandedHeight"))){const e=function(t,e){let n=0;return function(i,s){const o=i.style.transition;i.style.transition="none",t.set("expandedHeight",null),t.set("temporaryExpanded",!0),b(e),n=e.clientHeight,t.set("temporaryExpanded",null),b(e),i.style.transition=o}(e),n}(t,n);e>0&&t.set("expandedHeight",e)}t.set("shouldFixHeight",!0),b(n)}),t.emitter.on("change",()=>{V(t,n)}),V(t,n),n.addEventListener("transitionend",e=>{"height"===e.propertyName&&t.cleanUpTransition()})}r("cnt");r("spr");r("tbi");r("tab");class L{constructor(t){this.constraints=t}constrain(t){return this.constraints.reduce((t,e)=>e.constrain(t),t)}}function k(t,e){if(t instanceof e)return t;if(t instanceof L){const n=t.constraints.reduce((t,n)=>t||(n instanceof e?n:null),null);if(n)return n}return null}class D{constructor(t){this.values=m.fromObject({max:t.max,min:t.min})}constrain(t){const e=this.values.get("max"),n=this.values.get("min");return Math.min(Math.max(t,n),e)}}class S{constructor(t){this.values=m.fromObject({max:t.max,min:t.min})}get maxValue(){return this.values.get("max")}get minValue(){return this.values.get("min")}constrain(t){const n=this.values.get("max"),i=this.values.get("min");let s=t;return e(i)||(s=Math.max(s,i)),e(n)||(s=Math.min(s,n)),s}}class I{constructor(t,e=0){this.step=t,this.origin=e}constrain(t){const e=this.origin%this.step;return e+Math.round((t-e)/this.step)*this.step}}r("lst");const T=r("pop");class F{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(T()),e.viewProps.bindClassModifiers(this.element),l(e.shows,h(this.element,T(void 0,"v")))}}class N{constructor(t,e){this.shows=d(!1),this.viewProps=e.viewProps,this.view=new F(t,{shows:this.shows,viewProps:this.viewProps})}}const A=r("txt");class K{constructor(t,e){this.onChange_=this.onChange_.bind(this),this.element=t.createElement("div"),this.element.classList.add(A()),e.viewProps.bindClassModifiers(this.element),this.props_=e.props,this.props_.emitter.on("change",this.onChange_);const n=t.createElement("input");n.classList.add(A("i")),n.type="text",e.viewProps.bindDisabled(n),this.element.appendChild(n),this.inputElement=n,e.value.emitter.on("change",this.onChange_),this.value_=e.value,this.refresh()}refresh(){const t=this.props_.get("formatter");this.inputElement.value=t(this.value_.rawValue)}onChange_(){this.refresh()}}class O{constructor(t,e){this.onInputChange_=this.onInputChange_.bind(this),this.parser_=e.parser,this.props=e.props,this.value=e.value,this.viewProps=e.viewProps,this.view=new K(t,{props:e.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_)}onInputChange_(t){const n=t.currentTarget.value,i=this.parser_(n);e(i)||(this.value.rawValue=i),this.view.refresh()}}class j{constructor(t){this.text=t}evaluate(){return Number(this.text)}toString(){return this.text}}const R={"**":(t,e)=>Math.pow(t,e),"*":(t,e)=>t*e,"/":(t,e)=>t/e,"%":(t,e)=>t%e,"+":(t,e)=>t+e,"-":(t,e)=>t-e,"<<":(t,e)=>t<<e,">>":(t,e)=>t>>e,">>>":(t,e)=>t>>>e,"&":(t,e)=>t&e,"^":(t,e)=>t^e,"|":(t,e)=>t|e};class U{constructor(t,e,n){this.left=e,this.operator=t,this.right=n}evaluate(){const t=R[this.operator];if(!t)throw new Error("unexpected binary operator: '"+this.operator);return t(this.left.evaluate(),this.right.evaluate())}toString(){return["b(",this.left.toString(),this.operator,this.right.toString(),")"].join(" ")}}const q={"+":t=>t,"-":t=>-t,"~":t=>~t};class H{constructor(t,e){this.operator=t,this.expression=e}evaluate(){const t=q[this.operator];if(!t)throw new Error("unexpected unary operator: '"+this.operator);return t(this.expression.evaluate())}toString(){return["u(",this.operator,this.expression.toString(),")"].join(" ")}}function B(t){return(e,n)=>{for(let i=0;i<t.length;i++){const s=t[i](e,n);if(""!==s)return s}return""}}function z(t,e){var n;const i=t.substr(e).match(/^\s+/);return null!==(n=i&&i[0])&&void 0!==n?n:""}function Y(t,e){var n;const i=t.substr(e).match(/^[0-9]+/);return null!==(n=i&&i[0])&&void 0!==n?n:""}function W(t,e){const n=t.substr(e,1);if(e+=1,"e"!==n.toLowerCase())return"";const i=function(t,e){const n=Y(t,e);if(""!==n)return n;const i=t.substr(e,1);if("-"!==i&&"+"!==i)return"";const s=Y(t,e+=1);return""===s?"":i+s}(t,e);return""===i?"":n+i}function G(t,e){const n=t.substr(e,1);if("0"===n)return n;const i=function(t,e){const n=t.substr(e,1);return n.match(/^[1-9]$/)?n:""}(t,e);return e+=i.length,""===i?"":i+Y(t,e)}const X=B([function(t,e){const n=G(t,e);if(e+=n.length,""===n)return"";const i=t.substr(e,1);if(e+=i.length,"."!==i)return"";const s=Y(t,e);return n+i+s+W(t,e+=s.length)},function(t,e){const n=t.substr(e,1);if(e+=n.length,"."!==n)return"";const i=Y(t,e);return e+=i.length,""===i?"":n+i+W(t,e)},function(t,e){const n=G(t,e);return e+=n.length,""===n?"":n+W(t,e)}]),J=B([function(t,e){const n=t.substr(e,2);if(e+=n.length,"0b"!==n.toLowerCase())return"";const i=function(t,e){var n;const i=t.substr(e).match(/^[01]+/);return null!==(n=i&&i[0])&&void 0!==n?n:""}(t,e);return""===i?"":n+i},function(t,e){const n=t.substr(e,2);if(e+=n.length,"0o"!==n.toLowerCase())return"";const i=function(t,e){var n;const i=t.substr(e).match(/^[0-7]+/);return null!==(n=i&&i[0])&&void 0!==n?n:""}(t,e);return""===i?"":n+i},function(t,e){const n=t.substr(e,2);if(e+=n.length,"0x"!==n.toLowerCase())return"";const i=function(t,e){var n;const i=t.substr(e).match(/^[0-9a-f]+/i);return null!==(n=i&&i[0])&&void 0!==n?n:""}(t,e);return""===i?"":n+i}]),Z=B([J,X]);function Q(t,e,n){n+=z(e,n).length;const i=t.filter(t=>e.startsWith(t,n))[0];return i?(n+=i.length,{cursor:n+=z(e,n).length,operator:i}):null}const tt=[["**"],["*","/","%"],["+","-"],["<<",">>>",">>"],["&"],["^"],["|"]].reduce((t,e)=>function(t,e){return(n,i)=>{const s=t(n,i);if(!s)return null;i=s.cursor;let o=s.evaluable;for(;;){const s=Q(e,n,i);if(!s)break;i=s.cursor;const r=t(n,i);if(!r)return null;i=r.cursor,o=new U(s.operator,o,r.evaluable)}return o?{cursor:i,evaluable:o}:null}}(t,e),(function t(e,n){const i=function(t,e){var n;return null!==(n=function(t,e){const n=Z(t,e);return e+=n.length,""===n?null:{evaluable:new j(n),cursor:e}}(t,e))&&void 0!==n?n:function(t,e){const n=t.substr(e,1);if(e+=n.length,"("!==n)return null;const i=et(t,e);if(!i)return null;e=i.cursor,e+=z(t,e).length;const s=t.substr(e,1);return e+=s.length,")"!==s?null:{evaluable:i.evaluable,cursor:e}}(t,e)}(e,n);if(i)return i;const s=e.substr(n,1);if(n+=s.length,"+"!==s&&"-"!==s&&"~"!==s)return null;const o=t(e,n);return o?{cursor:n=o.cursor,evaluable:new H(s,o.evaluable)}:null}));function et(t,e){return e+=z(t,e).length,tt(t,e)}function nt(t){var e;const n=function(t){const e=et(t,0);return e?e.cursor+z(t,e.cursor).length!==t.length?null:e.evaluable:null}(t);return null!==(e=null==n?void 0:n.evaluate())&&void 0!==e?e:null}function it(t){return e=>e.toFixed(Math.max(Math.min(t,20),0))}const st=it(0);function ot(t){return st(t)+"%"}function rt({primary:t,secondary:e,forward:n,backward:i}){let s=!1;function o(t){s||(s=!0,t(),s=!1)}t.emitter.on("change",i=>{o(()=>{e.setRawValue(n(t,e),i.options)})}),e.emitter.on("change",s=>{o(()=>{t.setRawValue(i(t,e),s.options)}),o(()=>{e.setRawValue(n(t,e),s.options)})}),o(()=>{e.setRawValue(n(t,e),{forceEmit:!1,last:!0})})}function at(t,e){const n=t*(e.altKey?.1:1)*(e.shiftKey?10:1);return e.upKey?+n:e.downKey?-n:0}function lt(t){return{altKey:t.altKey,downKey:"ArrowDown"===t.key,shiftKey:t.shiftKey,upKey:"ArrowUp"===t.key}}function ut(t){return{altKey:t.altKey,downKey:"ArrowLeft"===t.key,shiftKey:t.shiftKey,upKey:"ArrowRight"===t.key}}function ht(t){return function(t){return"ArrowUp"===t||"ArrowDown"===t}(t)||"ArrowLeft"===t||"ArrowRight"===t}function ct(t,e){var n,i;const s=e.ownerDocument.defaultView,o=e.getBoundingClientRect();return{x:t.pageX-((null!==(n=s&&s.scrollX)&&void 0!==n?n:0)+o.left),y:t.pageY-((null!==(i=s&&s.scrollY)&&void 0!==i?i:0)+o.top)}}class pt{constructor(t){this.lastTouch_=null,this.onDocumentMouseMove_=this.onDocumentMouseMove_.bind(this),this.onDocumentMouseUp_=this.onDocumentMouseUp_.bind(this),this.onMouseDown_=this.onMouseDown_.bind(this),this.onTouchEnd_=this.onTouchEnd_.bind(this),this.onTouchMove_=this.onTouchMove_.bind(this),this.onTouchStart_=this.onTouchStart_.bind(this),this.elem_=t,this.emitter=new s,t.addEventListener("touchstart",this.onTouchStart_,{passive:!1}),t.addEventListener("touchmove",this.onTouchMove_,{passive:!0}),t.addEventListener("touchend",this.onTouchEnd_),t.addEventListener("mousedown",this.onMouseDown_)}computePosition_(t){const e=this.elem_.getBoundingClientRect();return{bounds:{width:e.width,height:e.height},point:t?{x:t.x,y:t.y}:null}}onMouseDown_(t){var e;t.preventDefault(),null===(e=t.currentTarget)||void 0===e||e.focus();const n=this.elem_.ownerDocument;n.addEventListener("mousemove",this.onDocumentMouseMove_),n.addEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("down",{altKey:t.altKey,data:this.computePosition_(ct(t,this.elem_)),sender:this,shiftKey:t.shiftKey})}onDocumentMouseMove_(t){this.emitter.emit("move",{altKey:t.altKey,data:this.computePosition_(ct(t,this.elem_)),sender:this,shiftKey:t.shiftKey})}onDocumentMouseUp_(t){const e=this.elem_.ownerDocument;e.removeEventListener("mousemove",this.onDocumentMouseMove_),e.removeEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("up",{altKey:t.altKey,data:this.computePosition_(ct(t,this.elem_)),sender:this,shiftKey:t.shiftKey})}onTouchStart_(t){t.preventDefault();const e=t.targetTouches.item(0),n=this.elem_.getBoundingClientRect();this.emitter.emit("down",{altKey:t.altKey,data:this.computePosition_(e?{x:e.clientX-n.left,y:e.clientY-n.top}:void 0),sender:this,shiftKey:t.shiftKey}),this.lastTouch_=e}onTouchMove_(t){const e=t.targetTouches.item(0),n=this.elem_.getBoundingClientRect();this.emitter.emit("move",{altKey:t.altKey,data:this.computePosition_(e?{x:e.clientX-n.left,y:e.clientY-n.top}:void 0),sender:this,shiftKey:t.shiftKey}),this.lastTouch_=e}onTouchEnd_(t){var e;const n=null!==(e=t.targetTouches.item(0))&&void 0!==e?e:this.lastTouch_,i=this.elem_.getBoundingClientRect();this.emitter.emit("up",{altKey:t.altKey,data:this.computePosition_(n?{x:n.clientX-i.left,y:n.clientY-i.top}:void 0),sender:this,shiftKey:t.shiftKey})}}function dt(t,e,n,i,s){return i+(t-e)/(n-e)*(s-i)}function mt(t){return String(t.toFixed(10)).split(".")[1].replace(/0+$/,"").length}function ft(t,e,n){return Math.min(Math.max(t,e),n)}function vt(t,e){return(t%e+e)%e}const _t=r("txt");class wt{constructor(t,e){this.onChange_=this.onChange_.bind(this),this.props_=e.props,this.props_.emitter.on("change",this.onChange_),this.element=t.createElement("div"),this.element.classList.add(_t(),_t(void 0,"num")),e.arrayPosition&&this.element.classList.add(_t(void 0,e.arrayPosition)),e.viewProps.bindClassModifiers(this.element);const n=t.createElement("input");n.classList.add(_t("i")),n.type="text",e.viewProps.bindDisabled(n),this.element.appendChild(n),this.inputElement=n,this.onDraggingChange_=this.onDraggingChange_.bind(this),this.dragging_=e.dragging,this.dragging_.emitter.on("change",this.onDraggingChange_),this.element.classList.add(_t()),this.inputElement.classList.add(_t("i"));const i=t.createElement("div");i.classList.add(_t("k")),this.element.appendChild(i),this.knobElement=i;const s=t.createElementNS(g,"svg");s.classList.add(_t("g")),this.knobElement.appendChild(s);const o=t.createElementNS(g,"path");o.classList.add(_t("gb")),s.appendChild(o),this.guideBodyElem_=o;const a=t.createElementNS(g,"path");a.classList.add(_t("gh")),s.appendChild(a),this.guideHeadElem_=a;const l=t.createElement("div");l.classList.add(r("tt")()),this.knobElement.appendChild(l),this.tooltipElem_=l,e.value.emitter.on("change",this.onChange_),this.value=e.value,this.refresh()}onDraggingChange_(t){if(null===t.rawValue)return void this.element.classList.remove(_t(void 0,"drg"));this.element.classList.add(_t(void 0,"drg"));const e=t.rawValue/this.props_.get("draggingScale"),n=e+(e>0?-1:e<0?1:0),i=ft(-n,-4,4);this.guideHeadElem_.setAttributeNS(null,"d",[`M ${n+i},0 L${n},4 L${n+i},8`,`M ${e},-1 L${e},9`].join(" ")),this.guideBodyElem_.setAttributeNS(null,"d",`M 0,4 L${e},4`);const s=this.props_.get("formatter");this.tooltipElem_.textContent=s(this.value.rawValue),this.tooltipElem_.style.left=e+"px"}refresh(){const t=this.props_.get("formatter");this.inputElement.value=t(this.value.rawValue)}onChange_(){this.refresh()}}class gt{constructor(t,e){var n;this.originRawValue_=0,this.onInputChange_=this.onInputChange_.bind(this),this.onInputKeyDown_=this.onInputKeyDown_.bind(this),this.onInputKeyUp_=this.onInputKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.baseStep_=e.baseStep,this.parser_=e.parser,this.props=e.props,this.sliderProps_=null!==(n=e.sliderProps)&&void 0!==n?n:null,this.value=e.value,this.viewProps=e.viewProps,this.dragging_=d(null),this.view=new wt(t,{arrayPosition:e.arrayPosition,dragging:this.dragging_,props:this.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_),this.view.inputElement.addEventListener("keydown",this.onInputKeyDown_),this.view.inputElement.addEventListener("keyup",this.onInputKeyUp_);const i=new pt(this.view.knobElement);i.emitter.on("down",this.onPointerDown_),i.emitter.on("move",this.onPointerMove_),i.emitter.on("up",this.onPointerUp_)}constrainValue_(t){var e,n;const i=null===(e=this.sliderProps_)||void 0===e?void 0:e.get("minValue"),s=null===(n=this.sliderProps_)||void 0===n?void 0:n.get("maxValue");let o=t;return void 0!==i&&(o=Math.max(o,i)),void 0!==s&&(o=Math.min(o,s)),o}onInputChange_(t){const n=t.currentTarget.value,i=this.parser_(n);e(i)||(this.value.rawValue=this.constrainValue_(i)),this.view.refresh()}onInputKeyDown_(t){const e=at(this.baseStep_,lt(t));0!==e&&this.value.setRawValue(this.constrainValue_(this.value.rawValue+e),{forceEmit:!1,last:!1})}onInputKeyUp_(t){0!==at(this.baseStep_,lt(t))&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}onPointerDown_(){this.originRawValue_=this.value.rawValue,this.dragging_.rawValue=0}computeDraggingValue_(t){if(!t.point)return null;const e=t.point.x-t.bounds.width/2;return this.constrainValue_(this.originRawValue_+e*this.props.get("draggingScale"))}onPointerMove_(t){const e=this.computeDraggingValue_(t.data);null!==e&&(this.value.setRawValue(e,{forceEmit:!1,last:!1}),this.dragging_.rawValue=this.value.rawValue-this.originRawValue_)}onPointerUp_(t){const e=this.computeDraggingValue_(t.data);null!==e&&(this.value.setRawValue(e,{forceEmit:!0,last:!0}),this.dragging_.rawValue=null)}}r("sld");r("sldtxt");function bt(t,e){t.write(e)}function yt(t){if("inline"===t||"popup"===t)return t}function xt(t){const e=_;return e.required.object({max:e.optional.number,min:e.optional.number,step:e.optional.number})(t).value}function Et(t,e){const n=t&&k(t,I);return n?mt(n.step):Math.max(mt(e),2)}function Ct(t){const e=function(t){const e=t?k(t,I):null;return e?e.step:null}(t);return null!=e?e:1}function Pt(t,e){var n;const i=t&&k(t,I),s=Math.abs(null!==(n=null==i?void 0:i.step)&&void 0!==n?n:e);return 0===s?.1:Math.pow(10,Math.floor(Math.log10(s))-1)}r("ckb");const Mt=r("col");class Vt{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(Mt()),e.foldable.bindExpandedClass(this.element,Mt(void 0,"expanded")),u(e.foldable,"completed",h(this.element,Mt(void 0,"cpl")));const n=t.createElement("div");n.classList.add(Mt("h")),this.element.appendChild(n);const i=t.createElement("div");i.classList.add(Mt("s")),n.appendChild(i),this.swatchElement=i;const s=t.createElement("div");if(s.classList.add(Mt("t")),n.appendChild(s),this.textElement=s,"inline"===e.pickerLayout){const e=t.createElement("div");e.classList.add(Mt("p")),this.element.appendChild(e),this.pickerElement=e}else this.pickerElement=null}}function $t(t,e,n){const i=vt(t,360),s=ft(e/100,0,1),o=ft(n/100,0,1),r=o*s,a=r*(1-Math.abs(i/60%2-1)),l=o-r;let u,h,c;return[u,h,c]=i>=0&&i<60?[r,a,0]:i>=60&&i<120?[a,r,0]:i>=120&&i<180?[0,r,a]:i>=180&&i<240?[0,a,r]:i>=240&&i<300?[a,0,r]:[r,0,a],[255*(u+l),255*(h+l),255*(c+l)]}function Lt(t){return[t[0],t[1],t[2]]}function kt(t,e){return[t[0],t[1],t[2],e]}const Dt={hsl:{hsl:(t,e,n)=>[t,e,n],hsv:function(t,e,n){const i=n+e*(100-Math.abs(2*n-100))/200;return[t,0!==i?e*(100-Math.abs(2*n-100))/i:0,n+e*(100-Math.abs(2*n-100))/200]},rgb:function(t,e,n){const i=(t%360+360)%360,s=ft(e/100,0,1),o=ft(n/100,0,1),r=(1-Math.abs(2*o-1))*s,a=r*(1-Math.abs(i/60%2-1)),l=o-r/2;let u,h,c;return[u,h,c]=i>=0&&i<60?[r,a,0]:i>=60&&i<120?[a,r,0]:i>=120&&i<180?[0,r,a]:i>=180&&i<240?[0,a,r]:i>=240&&i<300?[a,0,r]:[r,0,a],[255*(u+l),255*(h+l),255*(c+l)]}},hsv:{hsl:function(t,e,n){const i=100-Math.abs(n*(200-e)/100-100);return[t,0!==i?e*n/i:0,n*(200-e)/200]},hsv:(t,e,n)=>[t,e,n],rgb:$t},rgb:{hsl:function(t,e,n){const i=ft(t/255,0,1),s=ft(e/255,0,1),o=ft(n/255,0,1),r=Math.max(i,s,o),a=Math.min(i,s,o),l=r-a;let u=0,h=0;const c=(a+r)/2;return 0!==l&&(h=l/(1-Math.abs(r+a-1)),u=(u=i===r?(s-o)/l:s===r?2+(o-i)/l:4+(i-s)/l)/6+(u<0?1:0)),[360*u,100*h,100*c]},hsv:function(t,e,n){const i=ft(t/255,0,1),s=ft(e/255,0,1),o=ft(n/255,0,1),r=Math.max(i,s,o),a=r-Math.min(i,s,o);let l;return[l=0===a?0:r===i?((s-o)/a%6+6)%6*60:r===s?60*((o-i)/a+2):60*((i-s)/a+4),100*(0===r?0:a/r),100*r]},rgb:(t,e,n)=>[t,e,n]}};function St(t,e){return["float"===e?1:"rgb"===t?255:360,"float"===e?1:"rgb"===t?255:100,"float"===e?1:"rgb"===t?255:100]}function It(t,e,n,i){const s=St(e,n),o=St(e,i);return t.map((t,e)=>t/s[e]*o[e])}function Tt(t,n){return"object"==typeof t&&!e(t)&&n in t&&"number"==typeof t[n]}class Ft{static black(t="int"){return new Ft([0,0,0],"rgb",t)}static fromObject(t,e="int"){const n="a"in t?[t.r,t.g,t.b,t.a]:[t.r,t.g,t.b];return new Ft(n,"rgb",e)}static toRgbaObject(t,e="int"){return t.toRgbaObject(e)}static isRgbColorObject(t){return Tt(t,"r")&&Tt(t,"g")&&Tt(t,"b")}static isRgbaColorObject(t){return this.isRgbColorObject(t)&&Tt(t,"a")}static isColorObject(t){return this.isRgbColorObject(t)}static equals(t,e){if(t.mode!==e.mode)return!1;const n=t.comps_,i=e.comps_;for(let s=0;s<n.length;s++)if(n[s]!==i[s])return!1;return!0}constructor(t,e,n="int"){this.mode=e,this.type=n,this.comps_=function(t,e,n){var i;const s=St(e,n);return["rgb"===e?ft(t[0],0,s[0]):(o=t[0],r=s[0],o===r?r:vt(o,r)),ft(t[1],0,s[1]),ft(t[2],0,s[2]),ft(null!==(i=t[3])&&void 0!==i?i:1,0,1)];var o,r}(t,e,n)}getComponents(t,e="int"){return kt(function(t,e,n){const i=It(t,e.mode,e.type,"int");return It(Dt[e.mode][n.mode](...i),n.mode,"int",n.type)}(Lt(this.comps_),{mode:this.mode,type:this.type},{mode:null!=t?t:this.mode,type:e}),this.comps_[3])}toRgbaObject(t="int"){const e=this.getComponents("rgb",t);return{r:e[0],g:e[1],b:e[2],a:e[3]}}}const Nt=r("colp");class At{constructor(t,e){this.alphaViews_=null,this.element=t.createElement("div"),this.element.classList.add(Nt()),e.viewProps.bindClassModifiers(this.element);const n=t.createElement("div");n.classList.add(Nt("hsv"));const i=t.createElement("div");i.classList.add(Nt("sv")),this.svPaletteView_=e.svPaletteView,i.appendChild(this.svPaletteView_.element),n.appendChild(i);const s=t.createElement("div");s.classList.add(Nt("h")),this.hPaletteView_=e.hPaletteView,s.appendChild(this.hPaletteView_.element),n.appendChild(s),this.element.appendChild(n);const o=t.createElement("div");if(o.classList.add(Nt("rgb")),this.textView_=e.textView,o.appendChild(this.textView_.element),this.element.appendChild(o),e.alphaViews){this.alphaViews_={palette:e.alphaViews.palette,text:e.alphaViews.text};const n=t.createElement("div");n.classList.add(Nt("a"));const i=t.createElement("div");i.classList.add(Nt("ap")),i.appendChild(this.alphaViews_.palette.element),n.appendChild(i);const s=t.createElement("div");s.classList.add(Nt("at")),s.appendChild(this.alphaViews_.text.element),n.appendChild(s),this.element.appendChild(n)}}get allFocusableElements(){const t=[this.svPaletteView_.element,this.hPaletteView_.element,this.textView_.modeSelectElement,...this.textView_.textViews.map(t=>t.inputElement)];return this.alphaViews_&&t.push(this.alphaViews_.palette.element,this.alphaViews_.text.inputElement),t}}function Kt(t){return"int"===t?"int":"float"===t?"float":void 0}function Ot(t){const e=_;return w(t,{alpha:e.optional.boolean,color:e.optional.object({alpha:e.optional.boolean,type:e.optional.custom(Kt)}),expanded:e.optional.boolean,picker:e.optional.custom(yt)})}function jt(t){return t?.1:1}function Rt(t){var e;return null===(e=t.color)||void 0===e?void 0:e.type}function Ut(t,e){const n=t.match(/^(.+)%$/);return n?Math.min(.01*parseFloat(n[1])*e,e):Math.min(parseFloat(t),e)}const qt={deg:t=>t,grad:t=>360*t/400,rad:t=>360*t/(2*Math.PI),turn:t=>360*t};function Ht(t){const e=t.match(/^([0-9.]+?)(deg|grad|rad|turn)$/);if(!e)return parseFloat(t);const n=parseFloat(e[1]),i=e[2];return qt[i](n)}function Bt(t){const e=t.match(/^rgb\(\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;const n=[Ut(e[1],255),Ut(e[2],255),Ut(e[3],255)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])?null:n}function zt(t){return e=>{const n=Bt(e);return n?new Ft(n,"rgb",t):null}}function Yt(t){const e=t.match(/^rgba\(\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;const n=[Ut(e[1],255),Ut(e[2],255),Ut(e[3],255),Ut(e[4],1)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])||isNaN(n[3])?null:n}function Wt(t){return e=>{const n=Yt(e);return n?new Ft(n,"rgb",t):null}}function Gt(t){const e=t.match(/^hsl\(\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;const n=[Ht(e[1]),Ut(e[2],100),Ut(e[3],100)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])?null:n}function Xt(t){return e=>{const n=Gt(e);return n?new Ft(n,"hsl",t):null}}function Jt(t){const e=t.match(/^hsla\(\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;const n=[Ht(e[1]),Ut(e[2],100),Ut(e[3],100),Ut(e[4],1)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])||isNaN(n[3])?null:n}function Zt(t){return e=>{const n=Jt(e);return n?new Ft(n,"hsl",t):null}}function Qt(t){const e=t.match(/^#([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);if(e)return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)];const n=t.match(/^(?:#|0x)([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);return n?[parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16)]:null}function te(t){const e=t.match(/^#?([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);if(e)return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16),dt(parseInt(e[4]+e[4],16),0,255,0,1)];const n=t.match(/^(?:#|0x)?([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);return n?[parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16),dt(parseInt(n[4],16),0,255,0,1)]:null}function ee(t){const e=t.match(/^\{\s*r\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*g\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*b\s*:\s*([0-9A-Fa-f.]+%?)\s*\}$/);if(!e)return null;const n=[parseFloat(e[1]),parseFloat(e[2]),parseFloat(e[3])];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])?null:n}function ne(t){return e=>{const n=ee(e);return n?new Ft(n,"rgb",t):null}}function ie(t){const e=t.match(/^\{\s*r\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*g\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*b\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*a\s*:\s*([0-9A-Fa-f.]+%?)\s*\}$/);if(!e)return null;const n=[parseFloat(e[1]),parseFloat(e[2]),parseFloat(e[3]),parseFloat(e[4])];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])||isNaN(n[3])?null:n}function se(t){return e=>{const n=ie(e);return n?new Ft(n,"rgb",t):null}}const oe=[{parser:Qt,result:{alpha:!1,mode:"rgb",notation:"hex"}},{parser:te,result:{alpha:!0,mode:"rgb",notation:"hex"}},{parser:Bt,result:{alpha:!1,mode:"rgb",notation:"func"}},{parser:Yt,result:{alpha:!0,mode:"rgb",notation:"func"}},{parser:Gt,result:{alpha:!1,mode:"hsl",notation:"func"}},{parser:Jt,result:{alpha:!0,mode:"hsl",notation:"func"}},{parser:ee,result:{alpha:!1,mode:"rgb",notation:"object"}},{parser:ie,result:{alpha:!0,mode:"rgb",notation:"object"}}];function re(t,e="int"){const n=function(t){return oe.reduce((e,{parser:n,result:i})=>e||(n(t)?i:null),null)}(t);return n?"hex"===n.notation&&"float"!==e?Object.assign(Object.assign({},n),{type:"int"}):"func"===n.notation?Object.assign(Object.assign({},n),{type:e}):null:null}const ae={int:[function(t){const e=Qt(t);return e?new Ft(e,"rgb","int"):null},function(t){const e=te(t);return e?new Ft(e,"rgb","int"):null},zt("int"),Wt("int"),Xt("int"),Zt("int"),ne("int"),se("int")],float:[zt("float"),Wt("float"),Xt("float"),Zt("float"),ne("float"),se("float")]};function le(t){const e=ae[t];return t=>e.reduce((e,n)=>e||n(t),null)}function ue(t){const e=ft(Math.floor(t),0,255).toString(16);return 1===e.length?"0"+e:e}function he(t,e="#"){return`${e}${Lt(t.getComponents("rgb")).map(ue).join("")}`}function ce(t,e="#"){const n=t.getComponents("rgb");return`${e}${[n[0],n[1],n[2],255*n[3]].map(ue).join("")}`}function pe(t,e){const n=it("float"===e?2:0);return`rgb(${Lt(t.getComponents("rgb",e)).map(t=>n(t)).join(", ")})`}function de(t){return e=>pe(e,t)}function me(t,e){const n=it(2),i=it("float"===e?2:0);return`rgba(${t.getComponents("rgb",e).map((t,e)=>(3===e?n:i)(t)).join(", ")})`}function fe(t){return e=>me(e,t)}function ve(t,e){const n=it("float"===e?2:0),i=["r","g","b"];return`{${Lt(t.getComponents("rgb",e)).map((t,e)=>`${i[e]}: ${n(t)}`).join(", ")}}`}function _e(t){return e=>ve(e,t)}function we(t,e){const n=it(2),i=it("float"===e?2:0),s=["r","g","b","a"];return`{${t.getComponents("rgb",e).map((t,e)=>`${s[e]}: ${(3===e?n:i)(t)}`).join(", ")}}`}function ge(t){return e=>we(e,t)}const be=[{format:{alpha:!1,mode:"rgb",notation:"hex",type:"int"},stringifier:he},{format:{alpha:!0,mode:"rgb",notation:"hex",type:"int"},stringifier:ce},{format:{alpha:!1,mode:"hsl",notation:"func",type:"int"},stringifier:function(t){const e=[it(0),ot,ot];return`hsl(${Lt(t.getComponents("hsl")).map((t,n)=>e[n](t)).join(", ")})`}},{format:{alpha:!0,mode:"hsl",notation:"func",type:"int"},stringifier:function(t){const e=[it(0),ot,ot,it(2)];return`hsla(${t.getComponents("hsl").map((t,n)=>e[n](t)).join(", ")})`}},...["int","float"].reduce((t,e)=>[...t,{format:{alpha:!1,mode:"rgb",notation:"func",type:e},stringifier:de(e)},{format:{alpha:!0,mode:"rgb",notation:"func",type:e},stringifier:fe(e)},{format:{alpha:!1,mode:"rgb",notation:"object",type:e},stringifier:_e(e)},{format:{alpha:!0,mode:"rgb",notation:"object",type:e},stringifier:ge(e)}],[])];function ye(t){return be.reduce((e,n)=>{return e||(i=n.format,s=t,i.alpha===s.alpha&&i.mode===s.mode&&i.notation===s.notation&&i.type===s.type?n.stringifier:null);var i,s},null)}const xe=r("apl");class Ee{constructor(t,e){this.onValueChange_=this.onValueChange_.bind(this),this.value=e.value,this.value.emitter.on("change",this.onValueChange_),this.element=t.createElement("div"),this.element.classList.add(xe()),e.viewProps.bindClassModifiers(this.element),e.viewProps.bindTabIndex(this.element);const n=t.createElement("div");n.classList.add(xe("b")),this.element.appendChild(n);const i=t.createElement("div");i.classList.add(xe("c")),n.appendChild(i),this.colorElem_=i;const s=t.createElement("div");s.classList.add(xe("m")),this.element.appendChild(s),this.markerElem_=s;const o=t.createElement("div");o.classList.add(xe("p")),this.markerElem_.appendChild(o),this.previewElem_=o,this.update_()}update_(){const t=this.value.rawValue,e=t.getComponents("rgb"),n=new Ft([e[0],e[1],e[2],0],"rgb"),i=new Ft([e[0],e[1],e[2],255],"rgb"),s=["to right",me(n),me(i)];this.colorElem_.style.background=`linear-gradient(${s.join(",")})`,this.previewElem_.style.backgroundColor=me(t);const o=dt(e[3],0,1,0,100);this.markerElem_.style.left=o+"%"}onValueChange_(){this.update_()}}class Ce{constructor(t,e){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=e.value,this.viewProps=e.viewProps,this.view=new Ee(t,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new pt(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(t,e){if(!t.point)return;const n=t.point.x/t.bounds.width,i=this.value.rawValue,[s,o,r]=i.getComponents("hsv");this.value.setRawValue(new Ft([s,o,r,n],"hsv"),e)}onPointerDown_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerMove_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerUp_(t){this.handlePointerEvent_(t.data,{forceEmit:!0,last:!0})}onKeyDown_(t){const e=at(jt(!0),ut(t));if(0===e)return;const n=this.value.rawValue,[i,s,o,r]=n.getComponents("hsv");this.value.setRawValue(new Ft([i,s,o,r+e],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(t){0!==at(jt(!0),ut(t))&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}const Pe=r("coltxt");class Me{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(Pe()),e.viewProps.bindClassModifiers(this.element);const n=t.createElement("div");n.classList.add(Pe("m")),this.modeElem_=function(t){const e=t.createElement("select");return e.appendChild([{text:"RGB",value:"rgb"},{text:"HSL",value:"hsl"},{text:"HSV",value:"hsv"}].reduce((e,n)=>{const i=t.createElement("option");return i.textContent=n.text,i.value=n.value,e.appendChild(i),e},t.createDocumentFragment())),e}(t),this.modeElem_.classList.add(Pe("ms")),n.appendChild(this.modeSelectElement),e.viewProps.bindDisabled(this.modeElem_);const i=t.createElement("div");i.classList.add(Pe("mm")),i.appendChild(E(t,"dropdown")),n.appendChild(i),this.element.appendChild(n);const s=t.createElement("div");s.classList.add(Pe("w")),this.element.appendChild(s),this.textsElem_=s,this.textViews_=e.textViews,this.applyTextViews_(),l(e.colorMode,t=>{this.modeElem_.value=t})}get modeSelectElement(){return this.modeElem_}get textViews(){return this.textViews_}set textViews(t){this.textViews_=t,this.applyTextViews_()}applyTextViews_(){C(this.textsElem_);const t=this.element.ownerDocument;this.textViews_.forEach(e=>{const n=t.createElement("div");n.classList.add(Pe("c")),n.appendChild(e.element),this.textsElem_.appendChild(n)})}}function Ve(t,e,n){const i=St(t,e)[n];return new D({min:0,max:i})}function $e(t,e,n){return new gt(t,{arrayPosition:0===n?"fst":2===n?"lst":"mid",baseStep:jt(!1),parser:e.parser,props:m.fromObject({draggingScale:"float"===e.colorType?.01:1,formatter:(i=e.colorType,it("float"===i?2:0))}),value:d(0,{constraint:Ve(e.colorMode,e.colorType,n)}),viewProps:e.viewProps});var i}class Le{constructor(t,e){this.onModeSelectChange_=this.onModeSelectChange_.bind(this),this.colorType_=e.colorType,this.parser_=e.parser,this.value=e.value,this.viewProps=e.viewProps,this.colorMode=d(this.value.rawValue.mode),this.ccs_=this.createComponentControllers_(t),this.view=new Me(t,{colorMode:this.colorMode,textViews:[this.ccs_[0].view,this.ccs_[1].view,this.ccs_[2].view],viewProps:this.viewProps}),this.view.modeSelectElement.addEventListener("change",this.onModeSelectChange_)}createComponentControllers_(t){const e={colorMode:this.colorMode.rawValue,colorType:this.colorType_,parser:this.parser_,viewProps:this.viewProps},n=[$e(t,e,0),$e(t,e,1),$e(t,e,2)];return n.forEach((t,e)=>{rt({primary:this.value,secondary:t.value,forward:t=>t.rawValue.getComponents(this.colorMode.rawValue,this.colorType_)[e],backward:(t,n)=>{const i=this.colorMode.rawValue,s=t.rawValue.getComponents(i,this.colorType_);return s[e]=n.rawValue,new Ft(kt(Lt(s),s[3]),i,this.colorType_)}})}),n}onModeSelectChange_(t){const e=t.currentTarget;this.colorMode.rawValue=e.value,this.ccs_=this.createComponentControllers_(this.view.element.ownerDocument),this.view.textViews=[this.ccs_[0].view,this.ccs_[1].view,this.ccs_[2].view]}}const ke=r("hpl");class De{constructor(t,e){this.onValueChange_=this.onValueChange_.bind(this),this.value=e.value,this.value.emitter.on("change",this.onValueChange_),this.element=t.createElement("div"),this.element.classList.add(ke()),e.viewProps.bindClassModifiers(this.element),e.viewProps.bindTabIndex(this.element);const n=t.createElement("div");n.classList.add(ke("c")),this.element.appendChild(n);const i=t.createElement("div");i.classList.add(ke("m")),this.element.appendChild(i),this.markerElem_=i,this.update_()}update_(){const t=this.value.rawValue,[e]=t.getComponents("hsv");this.markerElem_.style.backgroundColor=pe(new Ft([e,100,100],"hsv"));const n=dt(e,0,360,0,100);this.markerElem_.style.left=n+"%"}onValueChange_(){this.update_()}}class Se{constructor(t,e){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=e.value,this.viewProps=e.viewProps,this.view=new De(t,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new pt(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(t,e){if(!t.point)return;const n=dt(ft(t.point.x,0,t.bounds.width),0,t.bounds.width,0,360),i=this.value.rawValue,[,s,o,r]=i.getComponents("hsv");this.value.setRawValue(new Ft([n,s,o,r],"hsv"),e)}onPointerDown_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerMove_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerUp_(t){this.handlePointerEvent_(t.data,{forceEmit:!0,last:!0})}onKeyDown_(t){const e=at(jt(!1),ut(t));if(0===e)return;const n=this.value.rawValue,[i,s,o,r]=n.getComponents("hsv");this.value.setRawValue(new Ft([i+e,s,o,r],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(t){0!==at(jt(!1),ut(t))&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}const Ie=r("svp");class Te{constructor(t,e){this.onValueChange_=this.onValueChange_.bind(this),this.value=e.value,this.value.emitter.on("change",this.onValueChange_),this.element=t.createElement("div"),this.element.classList.add(Ie()),e.viewProps.bindClassModifiers(this.element),e.viewProps.bindTabIndex(this.element);const n=t.createElement("canvas");n.height=64,n.width=64,n.classList.add(Ie("c")),this.element.appendChild(n),this.canvasElement=n;const i=t.createElement("div");i.classList.add(Ie("m")),this.element.appendChild(i),this.markerElem_=i,this.update_()}update_(){const t=function(t){const e=t.ownerDocument.defaultView;return e&&"document"in e?t.getContext("2d",{willReadFrequently:!0}):null}(this.canvasElement);if(!t)return;const e=this.value.rawValue.getComponents("hsv"),n=this.canvasElement.width,i=this.canvasElement.height,s=t.getImageData(0,0,n,i),o=s.data;for(let l=0;l<i;l++)for(let t=0;t<n;t++){const s=dt(t,0,n,0,100),r=dt(l,0,i,100,0),a=$t(e[0],s,r),u=4*(l*n+t);o[u]=a[0],o[u+1]=a[1],o[u+2]=a[2],o[u+3]=255}t.putImageData(s,0,0);const r=dt(e[1],0,100,0,100);this.markerElem_.style.left=r+"%";const a=dt(e[2],0,100,100,0);this.markerElem_.style.top=a+"%"}onValueChange_(){this.update_()}}class Fe{constructor(t,e){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=e.value,this.viewProps=e.viewProps,this.view=new Te(t,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new pt(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(t,e){if(!t.point)return;const n=dt(t.point.x,0,t.bounds.width,0,100),i=dt(t.point.y,0,t.bounds.height,100,0),[s,,,o]=this.value.rawValue.getComponents("hsv");this.value.setRawValue(new Ft([s,n,i,o],"hsv"),e)}onPointerDown_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerMove_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerUp_(t){this.handlePointerEvent_(t.data,{forceEmit:!0,last:!0})}onKeyDown_(t){ht(t.key)&&t.preventDefault();const[e,n,i,s]=this.value.rawValue.getComponents("hsv"),o=jt(!1),r=at(o,ut(t)),a=at(o,lt(t));0===r&&0===a||this.value.setRawValue(new Ft([e,n+r,i+a,s],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(t){const e=jt(!1),n=at(e,ut(t)),i=at(e,lt(t));0===n&&0===i||this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}class Ne{constructor(t,e){this.value=e.value,this.viewProps=e.viewProps,this.hPaletteC_=new Se(t,{value:this.value,viewProps:this.viewProps}),this.svPaletteC_=new Fe(t,{value:this.value,viewProps:this.viewProps}),this.alphaIcs_=e.supportsAlpha?{palette:new Ce(t,{value:this.value,viewProps:this.viewProps}),text:new gt(t,{parser:nt,baseStep:.1,props:m.fromObject({draggingScale:.01,formatter:it(2)}),value:d(0,{constraint:new D({min:0,max:1})}),viewProps:this.viewProps})}:null,this.alphaIcs_&&rt({primary:this.value,secondary:this.alphaIcs_.text.value,forward:t=>t.rawValue.getComponents()[3],backward:(t,e)=>{const n=t.rawValue.getComponents();return n[3]=e.rawValue,new Ft(n,t.rawValue.mode)}}),this.textC_=new Le(t,{colorType:e.colorType,parser:nt,value:this.value,viewProps:this.viewProps}),this.view=new At(t,{alphaViews:this.alphaIcs_?{palette:this.alphaIcs_.palette.view,text:this.alphaIcs_.text.view}:null,hPaletteView:this.hPaletteC_.view,supportsAlpha:e.supportsAlpha,svPaletteView:this.svPaletteC_.view,textView:this.textC_.view,viewProps:this.viewProps})}get textController(){return this.textC_}}const Ae=r("colsw");class Ke{constructor(t,e){this.onValueChange_=this.onValueChange_.bind(this),e.value.emitter.on("change",this.onValueChange_),this.value=e.value,this.element=t.createElement("div"),this.element.classList.add(Ae()),e.viewProps.bindClassModifiers(this.element);const n=t.createElement("div");n.classList.add(Ae("sw")),this.element.appendChild(n),this.swatchElem_=n;const i=t.createElement("button");i.classList.add(Ae("b")),e.viewProps.bindDisabled(i),this.element.appendChild(i),this.buttonElement=i,this.update_()}update_(){const t=this.value.rawValue;this.swatchElem_.style.backgroundColor=ce(t)}onValueChange_(){this.update_()}}class Oe{constructor(t,e){this.value=e.value,this.viewProps=e.viewProps,this.view=new Ke(t,{value:this.value,viewProps:this.viewProps})}}class je{constructor(t,e){this.onButtonBlur_=this.onButtonBlur_.bind(this),this.onButtonClick_=this.onButtonClick_.bind(this),this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.value=e.value,this.viewProps=e.viewProps,this.foldable_=M.create(e.expanded),this.swatchC_=new Oe(t,{value:this.value,viewProps:this.viewProps});const n=this.swatchC_.view.buttonElement;n.addEventListener("blur",this.onButtonBlur_),n.addEventListener("click",this.onButtonClick_),this.textC_=new O(t,{parser:e.parser,props:m.fromObject({formatter:e.formatter}),value:this.value,viewProps:this.viewProps}),this.view=new Vt(t,{foldable:this.foldable_,pickerLayout:e.pickerLayout}),this.view.swatchElement.appendChild(this.swatchC_.view.element),this.view.textElement.appendChild(this.textC_.view.element),this.popC_="popup"===e.pickerLayout?new N(t,{viewProps:this.viewProps}):null;const i=new Ne(t,{colorType:e.colorType,supportsAlpha:e.supportsAlpha,value:this.value,viewProps:this.viewProps});i.view.allFocusableElements.forEach(t=>{t.addEventListener("blur",this.onPopupChildBlur_),t.addEventListener("keydown",this.onPopupChildKeydown_)}),this.pickerC_=i,this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(i.view.element),rt({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:t=>t.rawValue,backward:(t,e)=>e.rawValue})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),$(this.foldable_,this.view.pickerElement))}get textController(){return this.textC_}onButtonBlur_(t){if(!this.popC_)return;const e=this.view.element,n=t.relatedTarget;n&&e.contains(n)||(this.popC_.shows.rawValue=!1)}onButtonClick_(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.view.allFocusableElements[0].focus()}onPopupChildBlur_(t){if(!this.popC_)return;const e=this.popC_.view.element,n=P(t);n&&e.contains(n)||n&&n===this.swatchC_.view.buttonElement&&!y(e.ownerDocument)||(this.popC_.shows.rawValue=!1)}onPopupChildKeydown_(t){this.popC_?"Escape"===t.key&&(this.popC_.shows.rawValue=!1):this.view.pickerElement&&"Escape"===t.key&&this.swatchC_.view.buttonElement.focus()}}function Re(t){return Lt(t.getComponents("rgb")).reduce((t,e)=>t<<8|255&Math.floor(e),0)}function Ue(t){return t.getComponents("rgb").reduce((t,e,n)=>t<<8|255&Math.floor(3===n?255*e:e),0)>>>0}function qe(t){return"number"!=typeof t?Ft.black():new Ft([(e=t)>>16&255,e>>8&255,255&e],"rgb");var e}function He(t){return"number"!=typeof t?Ft.black():new Ft([(e=t)>>24&255,e>>16&255,e>>8&255,dt(255&e,0,255,0,1)],"rgb");var e}function Be(t){var e;return!(!(null==t?void 0:t.alpha)&&!(null===(e=null==t?void 0:t.color)||void 0===e?void 0:e.alpha))}function ze(t){return t?t=>ce(t,"0x"):t=>he(t,"0x")}Ft.equals;function Ye(t,e){return n=>t?we(n,e):ve(n,e)}Ft.equals,Ft.equals;class We{constructor(t){this.components=t.components,this.asm_=t.assembly}constrain(t){const e=this.asm_.toComponents(t).map((t,e)=>{var n,i;return null!==(i=null===(n=this.components[e])||void 0===n?void 0:n.constrain(t))&&void 0!==i?i:t});return this.asm_.fromComponents(e)}}const Ge=r("pndtxt");class Xe{constructor(t,e){this.textViews=e.textViews,this.element=t.createElement("div"),this.element.classList.add(Ge()),this.textViews.forEach(e=>{const n=t.createElement("div");n.classList.add(Ge("a")),n.appendChild(e.element),this.element.appendChild(n)})}}class Je{constructor(t,e){this.value=e.value,this.viewProps=e.viewProps,this.acs_=e.axes.map((n,i)=>function(t,e,n){return new gt(t,{arrayPosition:0===n?"fst":n===e.axes.length-1?"lst":"mid",baseStep:e.axes[n].baseStep,parser:e.parser,props:e.axes[n].textProps,value:d(0,{constraint:e.axes[n].constraint}),viewProps:e.viewProps})}(t,e,i)),this.acs_.forEach((t,n)=>{rt({primary:this.value,secondary:t.value,forward:t=>e.assembly.toComponents(t.rawValue)[n],backward:(t,i)=>{const s=e.assembly.toComponents(t.rawValue);return s[n]=i.rawValue,e.assembly.fromComponents(s)}})}),this.view=new Xe(t,{textViews:this.acs_.map(t=>t.view)})}}function Ze(t,n){return"step"in t&&!e(t.step)?new I(t.step,n):null}function Qe(t){return e(t.max)||e(t.min)?e(t.max)&&e(t.min)?null:new S({max:t.max,min:t.min}):new D({max:t.max,min:t.min})}class tn{constructor(t=0,e=0){this.x=t,this.y=e}getComponents(){return[this.x,this.y]}static isObject(t){if(e(t))return!1;const n=t.x,i=t.y;return"number"==typeof n&&"number"==typeof i}static equals(t,e){return t.x===e.x&&t.y===e.y}toObject(){return{x:this.x,y:this.y}}}const en={toComponents:t=>t.getComponents(),fromComponents:t=>new tn(...t)},nn=r("p2d");class sn{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(nn()),e.viewProps.bindClassModifiers(this.element),l(e.expanded,h(this.element,nn(void 0,"expanded")));const n=t.createElement("div");n.classList.add(nn("h")),this.element.appendChild(n);const i=t.createElement("button");i.classList.add(nn("b")),i.appendChild(E(t,"p2dpad")),e.viewProps.bindDisabled(i),n.appendChild(i),this.buttonElement=i;const s=t.createElement("div");if(s.classList.add(nn("t")),n.appendChild(s),this.textElement=s,"inline"===e.pickerLayout){const e=t.createElement("div");e.classList.add(nn("p")),this.element.appendChild(e),this.pickerElement=e}else this.pickerElement=null}}const on=r("p2dp");class rn{constructor(t,e){this.onFoldableChange_=this.onFoldableChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.invertsY_=e.invertsY,this.maxValue_=e.maxValue,this.element=t.createElement("div"),this.element.classList.add(on()),"popup"===e.layout&&this.element.classList.add(on(void 0,"p")),e.viewProps.bindClassModifiers(this.element);const n=t.createElement("div");n.classList.add(on("p")),e.viewProps.bindTabIndex(n),this.element.appendChild(n),this.padElement=n;const i=t.createElementNS(g,"svg");i.classList.add(on("g")),this.padElement.appendChild(i),this.svgElem_=i;const s=t.createElementNS(g,"line");s.classList.add(on("ax")),s.setAttributeNS(null,"x1","0"),s.setAttributeNS(null,"y1","50%"),s.setAttributeNS(null,"x2","100%"),s.setAttributeNS(null,"y2","50%"),this.svgElem_.appendChild(s);const o=t.createElementNS(g,"line");o.classList.add(on("ax")),o.setAttributeNS(null,"x1","50%"),o.setAttributeNS(null,"y1","0"),o.setAttributeNS(null,"x2","50%"),o.setAttributeNS(null,"y2","100%"),this.svgElem_.appendChild(o);const r=t.createElementNS(g,"line");r.classList.add(on("l")),r.setAttributeNS(null,"x1","50%"),r.setAttributeNS(null,"y1","50%"),this.svgElem_.appendChild(r),this.lineElem_=r;const a=t.createElement("div");a.classList.add(on("m")),this.padElement.appendChild(a),this.markerElem_=a,e.value.emitter.on("change",this.onValueChange_),this.value=e.value,this.update_()}get allFocusableElements(){return[this.padElement]}update_(){const[t,e]=this.value.rawValue.getComponents(),n=this.maxValue_,i=dt(t,-n,+n,0,100),s=dt(e,-n,+n,0,100),o=this.invertsY_?100-s:s;this.lineElem_.setAttributeNS(null,"x2",i+"%"),this.lineElem_.setAttributeNS(null,"y2",o+"%"),this.markerElem_.style.left=i+"%",this.markerElem_.style.top=o+"%"}onValueChange_(){this.update_()}onFoldableChange_(){this.update_()}}function an(t,e,n){return[at(e[0],ut(t)),at(e[1],lt(t))*(n?1:-1)]}class ln{constructor(t,e){this.onPadKeyDown_=this.onPadKeyDown_.bind(this),this.onPadKeyUp_=this.onPadKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=e.value,this.viewProps=e.viewProps,this.baseSteps_=e.baseSteps,this.maxValue_=e.maxValue,this.invertsY_=e.invertsY,this.view=new rn(t,{invertsY:this.invertsY_,layout:e.layout,maxValue:this.maxValue_,value:this.value,viewProps:this.viewProps}),this.ptHandler_=new pt(this.view.padElement),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.padElement.addEventListener("keydown",this.onPadKeyDown_),this.view.padElement.addEventListener("keyup",this.onPadKeyUp_)}handlePointerEvent_(t,e){if(!t.point)return;const n=this.maxValue_,i=dt(t.point.x,0,t.bounds.width,-n,+n),s=dt(this.invertsY_?t.bounds.height-t.point.y:t.point.y,0,t.bounds.height,-n,+n);this.value.setRawValue(new tn(i,s),e)}onPointerDown_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerMove_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerUp_(t){this.handlePointerEvent_(t.data,{forceEmit:!0,last:!0})}onPadKeyDown_(t){ht(t.key)&&t.preventDefault();const[e,n]=an(t,this.baseSteps_,this.invertsY_);0===e&&0===n||this.value.setRawValue(new tn(this.value.rawValue.x+e,this.value.rawValue.y+n),{forceEmit:!1,last:!1})}onPadKeyUp_(t){const[e,n]=an(t,this.baseSteps_,this.invertsY_);0===e&&0===n||this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}class un{constructor(t,e){var n,i;this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.onPadButtonBlur_=this.onPadButtonBlur_.bind(this),this.onPadButtonClick_=this.onPadButtonClick_.bind(this),this.value=e.value,this.viewProps=e.viewProps,this.foldable_=M.create(e.expanded),this.popC_="popup"===e.pickerLayout?new N(t,{viewProps:this.viewProps}):null;const s=new ln(t,{baseSteps:[e.axes[0].baseStep,e.axes[1].baseStep],invertsY:e.invertsY,layout:e.pickerLayout,maxValue:e.maxValue,value:this.value,viewProps:this.viewProps});s.view.allFocusableElements.forEach(t=>{t.addEventListener("blur",this.onPopupChildBlur_),t.addEventListener("keydown",this.onPopupChildKeydown_)}),this.pickerC_=s,this.textC_=new Je(t,{assembly:en,axes:e.axes,parser:e.parser,value:this.value,viewProps:this.viewProps}),this.view=new sn(t,{expanded:this.foldable_.value("expanded"),pickerLayout:e.pickerLayout,viewProps:this.viewProps}),this.view.textElement.appendChild(this.textC_.view.element),null===(n=this.view.buttonElement)||void 0===n||n.addEventListener("blur",this.onPadButtonBlur_),null===(i=this.view.buttonElement)||void 0===i||i.addEventListener("click",this.onPadButtonClick_),this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(this.pickerC_.view.element),rt({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:t=>t.rawValue,backward:(t,e)=>e.rawValue})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),$(this.foldable_,this.view.pickerElement))}onPadButtonBlur_(t){if(!this.popC_)return;const e=this.view.element,n=t.relatedTarget;n&&e.contains(n)||(this.popC_.shows.rawValue=!1)}onPadButtonClick_(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.view.allFocusableElements[0].focus()}onPopupChildBlur_(t){if(!this.popC_)return;const e=this.popC_.view.element,n=P(t);n&&e.contains(n)||n&&n===this.view.buttonElement&&!y(e.ownerDocument)||(this.popC_.shows.rawValue=!1)}onPopupChildKeydown_(t){this.popC_?"Escape"===t.key&&(this.popC_.shows.rawValue=!1):this.view.pickerElement&&"Escape"===t.key&&this.view.buttonElement.focus()}}class hn{constructor(t=0,e=0,n=0){this.x=t,this.y=e,this.z=n}getComponents(){return[this.x,this.y,this.z]}static isObject(t){if(e(t))return!1;const n=t.x,i=t.y,s=t.z;return"number"==typeof n&&"number"==typeof i&&"number"==typeof s}static equals(t,e){return t.x===e.x&&t.y===e.y&&t.z===e.z}toObject(){return{x:this.x,y:this.y,z:this.z}}}const cn={toComponents:t=>t.getComponents(),fromComponents:t=>new hn(...t)};function pn(t,e){return{baseStep:Ct(e),constraint:e,textProps:m.fromObject({draggingScale:Pt(e,t),formatter:it(Et(e,t))})}}hn.equals;class dn{constructor(t=0,e=0,n=0,i=0){this.x=t,this.y=e,this.z=n,this.w=i}getComponents(){return[this.x,this.y,this.z,this.w]}static isObject(t){if(e(t))return!1;const n=t.x,i=t.y,s=t.z,o=t.w;return"number"==typeof n&&"number"==typeof i&&"number"==typeof s&&"number"==typeof o}static equals(t,e){return t.x===e.x&&t.y===e.y&&t.z===e.z&&t.w===e.w}toObject(){return{x:this.x,y:this.y,z:this.z,w:this.w}}}const mn={toComponents:t=>t.getComponents(),fromComponents:t=>new dn(...t)};dn.equals,r("mll");r("sgl");r("grl");function fn(t,e){if(!t)return;const n=[],i=Ze(t,e);i&&n.push(i);const s=Qe(t);return s&&n.push(s),new L(n)}function vn(t,n){const[i,s]=t?function(t){const e=k(t,D);if(e)return[e.values.get("min"),e.values.get("max")];const n=k(t,S);return n?[n.minValue,n.maxValue]:[void 0,void 0]}(t):[];if(!e(i)||!e(s))return Math.max(Math.abs(null!=i?i:0),Math.abs(null!=s?s:0));const o=Ct(t);return Math.max(10*Math.abs(o),10*Math.abs(n))}function _n(t,e){const n=e instanceof We?e.components[0]:void 0,i=e instanceof We?e.components[1]:void 0,s=vn(n,t.x),o=vn(i,t.y);return Math.max(s,o)}function wn(t,e){return{baseStep:Ct(e),constraint:e,textProps:m.fromObject({draggingScale:Pt(e,t),formatter:it(Et(e,t))})}}function gn(t){if(!("y"in t))return!1;const e=t.y;return!!e&&"inverted"in e&&!!e.inverted}tn.equals;new class{constructor(t){const[e,n]=t.split("-"),i=e.split(".");this.major=parseInt(i[0],10),this.minor=parseInt(i[1],10),this.patch=parseInt(i[2],10),this.prerelease=null!=n?n:null}toString(){const t=[this.major,this.minor,this.patch].join(".");return null!==this.prerelease?[t,this.prerelease].join("-"):t}}("3.1.7");Object.defineProperty(t,"__esModule",{value:!0})},"object"==typeof _$tweakpane_42.exports?factory(_$tweakpane_42.exports):"function"==typeof define&&define.amd?define(["exports"],factory):factory((__global_42="undefined"!=typeof globalThis?globalThis:__global_42||self).Tweakpane={}),_$tweakpane_42=_$tweakpane_42.exports;var _$multiline_1={};const{shuffle:shuffle,shuffleLCD:shuffleLCD,directions:__directions_1,animations:__animations_1}=_$txtShuffle_2,{split:split}=_$js_3;let elPreset,canvas,context,lines=[],linesShuffle=[],idxPreset=-1,__text_1="We chase misprinted lies\nWe face the path of time\nAnd yet I fight, and yet I fight\nThis battle all alone\nNo one to cry to\nNo place to call home";const presets=[{fn:"shuffle",glyphs:"_"},{fn:"shuffle"},{fn:"shuffle",glyphs:"\u2582\u2584\u2586",fps:40},{fn:"shuffle",glyphs:"weruoaszxcvnm",direction:__directions_1.RANDOM},{fn:"shuffleLCD",fps:40}],setup=()=>{elPreset=document.querySelector(".preset"),canvas=document.querySelector("canvas"),(context=canvas.getContext("2d")).font="48px monospace",window.addEventListener("resize",resize),canvas.addEventListener("click",onCanvasClick),resize(),animate(),onCanvasClick()},draw=()=>{context.fillStyle="#eee",context.fillRect(0,0,canvas.width,canvas.height),context.fillStyle="black",context.font="48px monospace",context.textBaseline="top";let t=200;linesShuffle.forEach(e=>{context.fillText(e,20,t),t+=60})},playShuffle=()=>{const preset=presets[idxPreset],fn=eval(preset.fn);lines.forEach((t,e)=>{fn({text:t,delay:.2*e,fps:preset.fps,glyphs:preset.glyphs,direction:preset.direction,onUpdate:t=>{linesShuffle[e]=t}})})},animate=()=>{requestAnimationFrame(animate),draw()},resize=()=>{canvas.width=window.innerWidth,canvas.height=window.innerHeight,lines=split(context,__text_1,context.font,canvas.width)},onCanvasClick=()=>{idxPreset++;let t="Example "+(idxPreset%=presets.length);const e=presets[idxPreset];for(const n in e)t=`${t} ${n}: ${e[n]}`;elPreset.innerText=t,playShuffle()};setup()}();